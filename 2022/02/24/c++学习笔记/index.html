<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>c++ 学习笔记 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="c++笔记我自己的命名规则类名：首字母大写其他小写 Circle 函数名：首字母小写且驼峰  calculateCircle 变量名 ：全部小写，用下划线链接  circle_r">
<meta property="og:type" content="article">
<meta property="og:title" content="c++ 学习笔记">
<meta property="og:url" content="http://example.com/2022/02/24/c++%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="c++笔记我自己的命名规则类名：首字母大写其他小写 Circle 函数名：首字母小写且驼峰  calculateCircle 变量名 ：全部小写，用下划线链接  circle_r">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://z3.ax1x.com/2021/07/11/W9rUGn.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/10/7Ea8c4.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/10/7Ed9KJ.png">
<meta property="article:published_time" content="2022-02-24T11:21:56.170Z">
<meta property="article:modified_time" content="2022-02-11T07:09:10.535Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="c++学习, 学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://z3.ax1x.com/2021/07/11/W9rUGn.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-c++学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/24/c++%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2022-02-24T11:21:56.170Z" itemprop="datePublished">2022-02-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      c++ 学习笔记
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="c-笔记"><a href="#c-笔记" class="headerlink" title="c++笔记"></a>c++笔记</h1><h2 id="我自己的命名规则"><a href="#我自己的命名规则" class="headerlink" title="我自己的命名规则"></a>我自己的命名规则</h2><p><strong>类名</strong>：首字母大写其他小写 Circle</p>
<p><strong>函数名</strong>：首字母小写且驼峰  calculateCircle</p>
<p><strong>变量名</strong> ：全部小写，用下划线链接  circle_r</p>
<span id="more"></span>

<h2 id="Visual-Studio使用技巧"><a href="#Visual-Studio使用技巧" class="headerlink" title="Visual Studio使用技巧"></a>Visual Studio使用技巧</h2><ol>
<li>VS创建空项目后在 <div>            <!--块级封装-->
 <center>    <!--将图片和文字居中-->
 <img src="https://z3.ax1x.com/2021/07/11/W9rUGn.png"
      alt="无法显示图片"
      style="zoom:90%"/>
 <br>        <!--换行-->
 打开资源管理器    <!--标题-->
 </center>
</div></li>
<li>ctrl + k  然后  ctrl + c 多行注释</li>
</ol>
<p>​      ctrl + k  然后  ctrl + u 取消注释</p>
<ol start="3">
<li>一个项目中只可以有一个main（），而且一整个项目中，函数名，类名等都不可以重名</li>
</ol>
<h2 id="遗漏的知识点"><a href="#遗漏的知识点" class="headerlink" title="遗漏的知识点"></a>遗漏的知识点</h2><h3 id="1-数组名做函数形参，实参会改变"><a href="#1-数组名做函数形参，实参会改变" class="headerlink" title="1. 数组名做函数形参，实参会改变"></a>1. 数组名做函数形参，实参会改变</h3><p> 在普通变量或下标变量作函数参数时，形参变量和实参变量是由编译系统分配的两个不同的内存单元。在函数调用时发生的值传送是把实参变量的值赋予形参变量。在用数组名作函数参数时，不是进行值的传送，即不是把实参数组的每一个元素的值都赋予形参数组的各个元素。因为实际上形参数组并不存在，编译系统不为形参数组分配内存。那么，数据的传送是如何实现的呢?在我们曾介绍过，数组名就是数组的首地址。因此在数组名作函数参数时所进行的传送只是地址的传送，也就是说把实参数组的首地址赋予形参数组名。形参数组名取得该首地址之后，也就等于有了实在的数组。实际上是形参数组和实参数组为同一数组，共同拥有一段内存空间。因此当形参数组发生变化时，实参数组也随之变化。</p>
<h3 id="2-return"><a href="#2-return" class="headerlink" title="2. return"></a>2. return</h3><p>函数一旦return就会返回，后面的一切都不会继续执行</p>
<h3 id="3-int-字母"><a href="#3-int-字母" class="headerlink" title="3. int = 字母"></a>3. int = 字母</h3><p>cin&gt;&gt;值；</p>
<p>如果用户输入的不是数字而是字母的话，int也会被赋值，会变成一个极大无比的数！并存在内存里面</p>
<h3 id="4-查看变量类型"><a href="#4-查看变量类型" class="headerlink" title="4. 查看变量类型"></a>4. 查看变量类型</h3><p> <code>typeid(变量名).name() </code></p>
<h3 id="5-const"><a href="#5-const" class="headerlink" title="5. const"></a>5. const</h3><p>只读，定义后不能修改的变量</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">a=<span class="number">9</span>; <span class="comment">// 错误，不能更改</span></span><br></pre></td></tr></table></figure>

<h3 id="6-分号问题"><a href="#6-分号问题" class="headerlink" title="6. 分号问题"></a>6. 分号问题</h3><p>类定义的<code>&#123;&#125;</code>后面<strong>有</strong><code>；</code>但是函数的函数体后面<strong>没</strong>有<code>；</code></p>
<h3 id="7-随机数生成"><a href="#7-随机数生成" class="headerlink" title="7. 随机数生成"></a>7. 随机数生成</h3><p><code>rand() % 100</code>  生成一个0~99的随机数</p>
<p>rand要给种子,否则每次运行的结果都是一样的，通过时间函数加种子</p>
<p><code># include&lt;time.h&gt;</code> </p>
<p><code>long t=time(0);</code> </p>
<p><code>srand(t);</code>   其中t就是种子</p>
<p>对于一个函数而言只需要srand(t)一次，之后rand()生成的随机数就不一样了</p>
<p>time（0）是long类型, 其值是系统从1970年1月1日00:00:00到现在总共的秒数</p>
<h3 id="8-类与函数的命名"><a href="#8-类与函数的命名" class="headerlink" title="8. 类与函数的命名"></a>8. 类与函数的命名</h3><p>同一个项目中，文件名不能重复，函数名不能重复，甚至 <strong>类名</strong> 也不能重复！！</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h3 id="顺序、选择、循环-三种语句"><a href="#顺序、选择、循环-三种语句" class="headerlink" title="顺序、选择、循环 三种语句"></a>顺序、选择、循环 三种语句</h3><h4 id="单行if"><a href="#单行if" class="headerlink" title="单行if"></a>单行if</h4><p>if（条件）</p>
<p>{若条件满足执行的代码}</p>
<p><strong>if后面没有   ‘；’</strong>，如果加了，则{}内的代码总会执行</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (score &gt;= <span class="number">600</span>) </span><br><span class="line">&#123; </span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;分数大于等于600&quot;</span> &lt;&lt; endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="if-else"><a href="#if-else" class="headerlink" title="if-else"></a>if-else</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>()</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>



<h4 id="多条件if"><a href="#多条件if" class="headerlink" title="多条件if"></a>多条件if</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>()&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ()&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>()&#123;&#125;</span><br></pre></td></tr></table></figure>



<h4 id="三目运算符"><a href="#三目运算符" class="headerlink" title="三目运算符"></a>三目运算符</h4><p><code>c = ( a &lt; b ? a : b )</code></p>
<p>返回的是一个变量，就是a,b之一</p>
<h4 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h4><p>switch( 表达式)</p>
<p>{</p>
<p>case 结果1:  执行语句 ;break;</p>
<p>case 结果2:  执行语句 ;break;</p>
<p>…</p>
<p>default:  执行语句 ; break;</p>
<p>}</p>
<p>注意每次执行之后都有break；</p>
<h4 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(循环条件)</span><br><span class="line">&#123;</span><br><span class="line">    循环语句;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="do-while循环"><a href="#do-while循环" class="headerlink" title="do-while循环"></a>do-while循环</h4><p>不管循环条件，上来先循环一遍</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    循环语句</span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">while</span></span><br><span class="line">&#123;</span><br><span class="line">    循环条件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(起始表达式；条件表达式；末尾循环体)</span><br><span class="line">&#123;</span><br><span class="line">    循环语句；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="跳转语句"><a href="#跳转语句" class="headerlink" title="跳转语句"></a>跳转语句</h3><h4 id="break语句"><a href="#break语句" class="headerlink" title="break语句"></a>break语句</h4><p>直接跳出当前循环体</p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h4 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义数组</span></span><br><span class="line"><span class="type">double</span> balance[<span class="number">5</span>] = &#123;<span class="number">1000.0</span>, <span class="number">2.0</span>, <span class="number">3.4</span>, <span class="number">7.0</span>, <span class="number">50.0</span>&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="一维数组名的意义"><a href="#一维数组名的意义" class="headerlink" title="一维数组名的意义"></a>一维数组名的意义</h4><p>统计数组在内存中占的空间：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sizeof</span>(数组名)</span><br></pre></td></tr></table></figure>

<p>由于数组中元素都是一个类型的，所以每个元素都一样大！</p>
<p>统计数组中某一个元素的大小:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sizeof</span>(数组名[位置])</span><br></pre></td></tr></table></figure>

<p>查看数组的首地址：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接写数组的名字就是数字首地址</span></span><br><span class="line">cout&lt;&lt;<span class="string">&quot;数组首地址是： &quot;</span>&lt;&lt;arry&lt;&lt;endl;</span><br><span class="line"><span class="comment">//返回的是一个十六进制的数，可以通过(int)强行装换为十进制的数</span></span><br><span class="line">cout&lt;&lt;<span class="string">&quot;数组的首地址用十进制表示为：&quot;</span>&lt;&lt;(<span class="type">int</span>)arry&lt;&lt;endl;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看数组中某个元素的地址</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;arry[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>

<p>数组名是常量，不可修改</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a><strong>指针</strong></h3><p>指针就是地址</p>
<h4 id="定义指针"><a href="#定义指针" class="headerlink" title="定义指针"></a>定义指针</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *p;p = &amp;acout &lt;&lt; p &lt;&lt; endl;  <span class="comment">//结果是这个内存的编号：0000009619B8F7C4  </span></span><br><span class="line">cout &lt;&lt;*p &lt;&lt; endl;  <span class="comment">//结果就是p这个地址对应的值</span></span><br></pre></td></tr></table></figure>

<p>&amp;是取地址的符号，取到变量的地址</p>
<p>指针的类型取决于它这个地址里面的值对应的类型</p>
<h4 id="查看指针所占内存空间"><a href="#查看指针所占内存空间" class="headerlink" title="查看指针所占内存空间"></a>查看指针所占内存空间</h4><p>由于指针实际上是一个数字，所以占用的空间是固定的（仅取决于操作系统）</p>
<h4 id="空指针"><a href="#空指针" class="headerlink" title="空指针"></a>空指针</h4><p>指向内存编号为0的指针，可以用来初始化指针，但是空指针指向的内存是不能访问的！</p>
<p> 0~255的内存编号是系统的，不可以访问！下面的程序运行就会报错：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *p = <span class="literal">NULL</span>;	*p = <span class="number">100</span>;</span><br></pre></td></tr></table></figure>

<h4 id="野指针"><a href="#野指针" class="headerlink" title="野指针"></a>野指针</h4><p>指向非法内存空间的指针，主动的指向一个内存地址就是非法的，只能请求！所以要避免出现野指针</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *p = (<span class="type">int</span> *)<span class="number">0x110</span><span class="comment">//(int *) 可以将一个十六进制的数强行转换成指针类</span></span><br></pre></td></tr></table></figure>



<h4 id="const修饰指针"><a href="#const修饰指针" class="headerlink" title="const修饰指针"></a>const修饰指针</h4><p>const 修饰的值不可以改</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> *p=&amp;a; <span class="comment">//*p对应的值不可以直接改，*p对应的是a对应的值，不是地址</span></span><br><span class="line"><span class="type">int</span> * <span class="type">const</span> p =&amp;a; <span class="comment">//p的值不可以改，p是指地址</span></span><br></pre></td></tr></table></figure>



<h4 id="指针和数组"><a href="#指针和数组" class="headerlink" title="指针和数组"></a>指针和数组</h4><p>利用指针访问数组中的元素</p>
<p>指针是整形的，所以p++直接是p移动四个字节</p>
<h4 id="指针和函数"><a href="#指针和函数" class="headerlink" title="指针和函数"></a>指针和函数</h4><p>值传递和地址传递</p>
<p>新函数的传入参数是地址，将这个地址中对应的值改变，则主函数中对应的值就会被改变</p>
<h4 id="指针、数组和函数"><a href="#指针、数组和函数" class="headerlink" title="指针、数组和函数"></a>指针、数组和函数</h4><h3 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h3><h4 id="结构体的定义和使用"><a href="#结构体的定义和使用" class="headerlink" title="结构体的定义和使用"></a>结构体的定义和使用</h4><p>结构体和其他量一样，既可以定义在主函数里面，也可以定义在主函数外面。仅仅是全局变量和局部变量的区别。</p>
<p>使用就是  结构体名 具体的结构体</p>
<p>通过面向对象符号 . 来访问</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> 结构体名 &#123;结构体成员&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Student</span>	</span><br><span class="line">    &#123;		</span><br><span class="line">        string name;		</span><br><span class="line">        <span class="type">int</span> age;		</span><br><span class="line">        <span class="type">int</span> score;	</span><br><span class="line">    &#125;;		</span><br><span class="line">    Student s1 =&#123;<span class="string">&quot;lanpangzi&quot;</span>, <span class="number">12</span>, <span class="number">99</span>&#125;; <span class="comment">//创建一个具体的结构体	</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;name = &quot;</span> &lt;&lt; s1.name &lt;&lt; endl;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;everything all done&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="结构体数组"><a href="#结构体数组" class="headerlink" title="结构体数组"></a>结构体数组</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> 结构类型名 数组名[元素个数] = &#123; &#123;&#125;, &#123;&#125;, &#123;&#125; &#125;</span><br></pre></td></tr></table></figure>

<p>就跟普通数组的定义一样，只不过数组里面的元素类型是该结构体类型</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Student</span>	</span><br><span class="line">    &#123;		</span><br><span class="line">        string name;		</span><br><span class="line">        <span class="type">int</span> age;		</span><br><span class="line">        <span class="type">int</span> score;	</span><br><span class="line">    &#125;;		</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Student</span> stuarray[<span class="number">3</span>]=	&#123;		&#123;<span class="string">&quot;张三&quot;</span>, <span class="number">18</span>, <span class="number">90</span>&#125;,	    &#123;<span class="string">&quot;李四&quot;</span>,<span class="number">17</span>,<span class="number">90</span>&#125;,		&#123;<span class="string">&quot;王五&quot;</span>,<span class="number">16</span>,<span class="number">99</span>&#125;	&#125;;	</span><br><span class="line">    stuarray[<span class="number">2</span>].name = <span class="string">&quot;lanpangzi&quot;</span>;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;stuarray[2].name = &quot;</span> &lt;&lt; stuarray[<span class="number">2</span>].name &lt;&lt;endl;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;everything all done&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="结构体指针"><a href="#结构体指针" class="headerlink" title="结构体指针"></a>结构体指针</h4><p>创建一个结构体类型后和int那些数据类型一样，可以通过结构体类型名来定义同类型的指针</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span>	&#123;		</span><br><span class="line">        string name;		</span><br><span class="line">        <span class="type">int</span> age;		</span><br><span class="line">        <span class="type">int</span> score;	</span><br><span class="line">    &#125;;			</span><br><span class="line">Student s = &#123; <span class="string">&quot;lanpanzgi&quot;</span>,<span class="number">17</span>, <span class="number">98</span> &#125;;	</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> * p = &amp;s; </span><br></pre></td></tr></table></figure>

<p>利用操作符 -&gt; 可以通过结构体指针访问结构体属性</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; <span class="string">&quot;p-&gt;name = &quot;</span> &lt;&lt; p-&gt;name &lt;&lt; endl;</span><br></pre></td></tr></table></figure>

<h4 id="结构体嵌套循环体"><a href="#结构体嵌套循环体" class="headerlink" title="结构体嵌套循环体"></a>结构体嵌套循环体</h4><p>结构体中的元素是另一个结构体</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span>	&#123;		</span><br><span class="line">    string name;		</span><br><span class="line">    <span class="type">int</span> age;		</span><br><span class="line">    <span class="type">int</span> score;	</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">teacher</span> &#123;	</span><br><span class="line">    <span class="type">int</span> id;	</span><br><span class="line">    string name;	</span><br><span class="line">    <span class="type">int</span> age;   </span><br><span class="line">    student Bob;</span><br><span class="line">&#125;;<span class="comment">//创建一个teacher对象并赋值</span></span><br><span class="line">teacher t;</span><br><span class="line">t.name = <span class="string">&quot;Tony&quot;</span>;</span><br><span class="line">t.id = <span class="number">123</span>;</span><br><span class="line">t.age = <span class="number">32</span>;</span><br><span class="line">t.Bob.age =<span class="number">12</span>;</span><br></pre></td></tr></table></figure>

<h4 id="结构体做函数参数"><a href="#结构体做函数参数" class="headerlink" title="结构体做函数参数"></a>结构体做函数参数</h4><p>将结构体作为参数向函数中传递，传递方式分为值传递和地址传递两种</p>
<p>地址传递因为只是创建了一个新的指针，并没将传进来的结构体进行复制，会省略很多内存空间</p>
<p>传递的结构体一定要在主函数外面定义，否则子函数将无法识别此类型！</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//值传递法，无法更改原结构体对象中的值struct student  </span></span><br><span class="line"><span class="comment">//一定要在外面定义</span></span><br><span class="line">&#123;	</span><br><span class="line">    string name;	</span><br><span class="line">    <span class="type">int</span> age;	</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printstudent</span><span class="params">(student stu)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;子函数输出:stu.name: &quot;</span> &lt;&lt; stu.name &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">    student stu;	</span><br><span class="line">    stu.age = <span class="number">12</span>;	</span><br><span class="line">    stu.name = <span class="string">&quot;sat&quot;</span>;	</span><br><span class="line">    stu.score = <span class="number">90</span>;  </span><br><span class="line">    <span class="built_in">printstudent</span>(stu);	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;everything all done&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//地址传递</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span>  <span class="comment">//一定要在外面定义</span></span><br><span class="line">&#123;	</span><br><span class="line">    string name;	</span><br><span class="line">    <span class="type">int</span> age;	</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printstudent2</span><span class="params">(student *p)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    p-&gt;name = <span class="string">&quot;lanpangzi&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    student stu;	</span><br><span class="line">    stu.age = <span class="number">12</span>;</span><br><span class="line">    stu.name = <span class="string">&quot;sat&quot;</span>;</span><br><span class="line">    stu.score = <span class="number">90</span>;   </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;stu更改前stu.name=&quot;</span> &lt;&lt; stu.name &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">printstudent2</span>(&amp;stu);	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;stu更改后stu.name=&quot;</span> &lt;&lt; stu.name &lt;&lt; endl;   </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;everything all done&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="结构体中const的使用"><a href="#结构体中const的使用" class="headerlink" title="结构体中const的使用"></a>结构体中const的使用</h4><p>可以通过const来防止误操作，通过const定义的变量，值不可改变</p>
<p>const更像是一个约束，可以对一个已经定义好的变量进行约束，这种用法尤其对子函数参数的定义使用，防止用户在子函数中改变值</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printstudent1</span><span class="params">(<span class="type">const</span> student stu)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    stu.name = <span class="string">&quot;sally&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;子函数输出:stu.name: &quot;</span> &lt;&lt; stu.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="C-核心编程"><a href="#C-核心编程" class="headerlink" title="C++核心编程"></a>C++核心编程</h2><p>对c++面向对象编程技术进行介绍</p>
<h3 id="内训分区模型"><a href="#内训分区模型" class="headerlink" title="内训分区模型"></a>内训分区模型</h3><p>c++在程序执行时将内存分为4个区域：</p>
<p>代码区、全局区、栈区、堆区</p>
<p>程序运行前：</p>
<blockquote>
<p><em>代码区</em>：存放cpu执行的机器指令，代码区是共享的但只读的</p>
<p><em>全局区</em>：存放全局变量和静态变量，还包含常量区（字符串常量和其他常量）</p>
</blockquote>
<p>程序运行后：</p>
<blockquote>
<p><em>栈区</em>：函数的参数值，局部变量等（不要返回局部变量的地址，因为栈区的数据在函数执行完后会自动释放，返回来也没用）</p>
<p><em>堆区</em>：在c++中使用new在堆区开辟一块内存，在子函数中使用new可以将本处于栈区的东西放在堆区</p>
</blockquote>
<h3 id="new操作符"><a href="#new操作符" class="headerlink" title="new操作符"></a>new操作符</h3><p>堆区开辟数据，由程序员手动开辟，手动释放，释放关键字delete</p>
<p>new返回的值是该数据的指针</p>
<p>语法：<code>new 数据类型</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> *<span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">    <span class="comment">//在堆栈区创建单个变量	</span></span><br><span class="line">    <span class="type">int</span> *p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);	</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="type">int</span> *p = <span class="built_in">fun</span>();	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*p=&quot;</span> &lt;&lt; *p &lt;&lt; endl;	</span><br><span class="line">    <span class="comment">//释放	</span></span><br><span class="line">    <span class="keyword">delete</span> p;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> * <span class="title">arr</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="comment">//在堆区创建数组	</span></span><br><span class="line">    <span class="type">int</span> *a = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];	</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)	</span><br><span class="line">    &#123;		</span><br><span class="line">        a[i] = i+<span class="number">100</span>;	</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	   </span><br><span class="line">    <span class="type">int</span> *a =<span class="built_in">arr</span>(); </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;	</span><br><span class="line">        cout &lt;&lt; a[i] &lt;&lt; endl;</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="comment">//释放堆区数组  </span></span><br><span class="line">    <span class="comment">//释放堆区数组要加 []	</span></span><br><span class="line">    <span class="keyword">delete</span>[] a;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><p>作用：给变量起别名</p>
<p>语法：<code>数据类型&amp; 别名 =  原名</code></p>
<p>也就是两个名字对应同一块内存,跟指针差不多</p>
<p>引用必须初始化，且一旦初始化后就不可以更改了！</p>
<p>引用本质上是一个指针常量,归根到底是一个指针，但是这个指针指向的地址是不可更改的，地址对应的值倒是可以更改：</p>
<p><code>int&amp; ref = a</code>  相当于 <code>int* const ref = &amp;a</code></p>
<h4 id="引用做函数参数"><a href="#引用做函数参数" class="headerlink" title="引用做函数参数"></a>引用做函数参数</h4><p>子函数的形参就是主函数参数的别名，只是刚好重名方便使用</p>
<p>相当于：</p>
<p>myswap(&amp;a=a,&amp;b=b)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">myswap</span><span class="params">(<span class="type">int</span> &amp;a, <span class="type">int</span> &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="type">int</span> temp = a;</span><br><span class="line">    a = b;	</span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;	</span><br><span class="line">    <span class="type">int</span> b = <span class="number">6</span>;	</span><br><span class="line">    <span class="built_in">myswap</span>(a, b);	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;a=&quot;</span> &lt;&lt; a&lt;&lt;endl;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="引用做函数的返回值"><a href="#引用做函数的返回值" class="headerlink" title="引用做函数的返回值"></a>引用做函数的返回值</h4><p>不要返回局部变量的引用：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//int&amp; 类型返回的是变量a ，而不是a对应的值！！</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>;	</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="type">int</span>&amp; ref = <span class="built_in">test01</span>();	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ref=&quot;</span>&lt;&lt;ref&lt;&lt;endl;   </span><br><span class="line">    <span class="comment">//第一次输出编译器保存了a，之后a会被销毁，所以第二次输出的就是错误的值了</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ref=&quot;</span>&lt;&lt;ref&lt;&lt; endl;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种函数可以作为左值：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">    <span class="comment">//添加static可以将其设置为静态变量并放在全局区（并不是全局变量！），只在第一次定义的时候初始化，后面再运行时不会重新初始化！	</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> a = <span class="number">0</span>;	</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="type">int</span>&amp; ref = <span class="built_in">test01</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ref=&quot;</span>&lt;&lt;ref&lt;&lt;endl;	</span><br><span class="line">    <span class="built_in">test01</span>() = <span class="number">1000</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;test01=&quot;</span> &lt;&lt; <span class="built_in">test01</span>() &lt;&lt; endl;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ref=&quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="常量引用"><a href="#常量引用" class="headerlink" title="常量引用"></a>常量引用</h4><p>作用：防止形参修饰实参</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">showvalue</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; a)</span></span>&#123;<span class="comment">//这里面将无法对传进来的参数进行修改&#125;</span></span><br></pre></td></tr></table></figure>

<p>引用的右值必须是变量，不能是数字：</p>
<p><code>int&amp; ref=10;</code> 将报错，但是 <code>const int&amp; ref = 10;</code>就可以，因为这一步操作编译器自动进行了一步类似于 <code>int temp = 10; const int&amp; ref=temp;</code>的操作，这样定义的引用没有原名</p>
<h3 id="函数提高"><a href="#函数提高" class="headerlink" title="函数提高"></a>函数提高</h3><h4 id="函数的默认参数"><a href="#函数的默认参数" class="headerlink" title="函数的默认参数"></a>函数的默认参数</h4><p>语法：<code>int func(int a=10, int b =2,int c = 3) &#123; &#125;</code></p>
<p>注意，如果某个位置已经有了默认值，则从这个位置往后都必须由默认值。且声明和实现只能有一个有默认参数</p>
<h4 id="函数的占位参数"><a href="#函数的占位参数" class="headerlink" title="函数的占位参数"></a>函数的占位参数</h4><p>语法：<code>void func(int) &#123;&#125;   </code>形参只写类型不写变量名</p>
<p>占位的数在子函数中暂时是无法使用的</p>
<h4 id="函数重载"><a href="#函数重载" class="headerlink" title="函数重载"></a>函数重载</h4><p>作用：函数名可以相同，提高复用性</p>
<p>前提：函数的名字相同，但是形参不完全相同。另外有默认值的也不行：</p>
<p><code>void func(int a)</code> 和 <code>void func(int a,int b=10)</code> 放一起，<code>func(10)</code>这样调用会出问题</p>
<h3 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h3><p>c++认为万物皆对象，封装、继承、多态</p>
<p>具有相同性质的对象称为类</p>
<p>使用案列：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> PI = <span class="number">3.1415926</span>;</span><br><span class="line"><span class="comment">//设计一个类，这个类的名字叫“Circle“</span></span><br><span class="line"><span class="comment">//创建类的关键字是class，后面紧接着是这个类的名字class Circle  </span></span><br><span class="line"><span class="comment">//没有括号也没有冒号</span></span><br><span class="line">&#123;	</span><br><span class="line">    <span class="comment">//访问权限</span></span><br><span class="line">    <span class="keyword">public</span>: </span><br><span class="line">    <span class="comment">//公共权限，注意是冒号！ 也可以先使用变量后定义变量</span></span><br><span class="line">    <span class="comment">//属性	</span></span><br><span class="line">    <span class="type">int</span> m_r;	</span><br><span class="line">    <span class="comment">//行为		</span></span><br><span class="line">    <span class="comment">//计算圆的周长	</span></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">calculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;		</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * PI*m_r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="comment">//通过上面定义的类来创建一个具体的求园的周长的对象（实例化）</span></span><br><span class="line">    Circle cal_cir;	</span><br><span class="line">    <span class="comment">//给创建的对象的属性进行赋值	</span></span><br><span class="line">    cal_cir.m_r = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//用.进行访问	</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;圆的周长为：&quot;</span> &lt;&lt; cal_cir.<span class="built_in">calculate</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="struct和class的区别"><a href="#struct和class的区别" class="headerlink" title="struct和class的区别"></a>struct和class的区别</h4><p>默认的权限不同，struct默认的权限是public，class默认的权限是private</p>
<h4 id="成员属性设置为私有"><a href="#成员属性设置为私有" class="headerlink" title="成员属性设置为私有"></a>成员属性设置为私有</h4><p>将所有的成员都设置为私有的，然后通过定义共有函数来访问和修改这些私有成员，防止误操作！</p>
<h4 id="类的封装"><a href="#类的封装" class="headerlink" title="类的封装"></a>类的封装</h4><p>将类拆成头文件和源文件两大部分，对于大型项目尤其重要</p>
<p>1、首先创建空的头文件并命名（注意.h）</p>
<p>2、头文件中内容，注意头文件与源代码的不同，而且头文件中的函数只要声明不要操作，如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once <span class="comment">//防止头文件重复包含</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;<span class="comment">//如果这里面使用了其他的类，需要包含那个类的头文件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span>:	</span><br><span class="line">    <span class="type">int</span> m_x;	</span><br><span class="line">    <span class="type">int</span> m_y;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setX</span><span class="params">(<span class="type">int</span> x)</span></span>;<span class="comment">//没有具体的操作	</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getX</span><span class="params">()</span></span>;<span class="comment">//没有具体的操作	</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setY</span><span class="params">(<span class="type">int</span> y)</span></span>;<span class="comment">//没有具体的操作	</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getY</span><span class="params">()</span></span>;<span class="comment">//没有具体的操作</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>3、创建point类的空源文件并命名（注意后缀是.cpp）</p>
<p>4、源文件中内容，注意开头包含上面创造的头文件，源文件中只有具体的操作没有声明，所以直接使用变量会报错，需要给定作用域(头文件中的)Point</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;point.h&quot;</span></span></span><br><span class="line"><span class="comment">//已声明头文件，所以下面给定Point作用域才有效</span></span><br><span class="line"><span class="comment">//没有class等声明，只有具体的函数操作</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Point::setX</span><span class="params">(<span class="type">int</span> x)</span>  <span class="comment">//注意给定作用域</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    m_x = x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Point::getX</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="keyword">return</span> m_x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Point::setY</span><span class="params">(<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    m_y = y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Point::getY</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5、要想使用某个类，只需在头文件中包含即可</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//包含使用的类的头文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;point.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;circle.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br></pre></td></tr></table></figure>

<h4 id="各种默认的函数"><a href="#各种默认的函数" class="headerlink" title="各种默认的函数"></a>各种默认的函数</h4><h5 id="对象的初始化和清理函数"><a href="#对象的初始化和清理函数" class="headerlink" title="对象的初始化和清理函数"></a>对象的初始化和清理函数</h5><p>构造函数用来初始化，析构函数是用来清理</p>
<p>构造函数语法：<code>类名（）&#123;&#125;</code></p>
<p>析构函数：<code>~类名（）&#123;&#125;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//对象的初始化和清理</span></span><br><span class="line"><span class="comment">//构造函数 进行初始化</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//任何操作都要要给作用域！</span></span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="comment">//构造函数函数名与类名相同，可以有参数，创建对象是该函数会被自动调用一次	</span></span><br><span class="line">    <span class="comment">//如果用户不写，编译器会自动写一个Person()&#123;&#125;,这个没有任何操作的函数进行初始化	</span></span><br><span class="line">    <span class="built_in">Person</span>() 	</span><br><span class="line">    <span class="comment">//注意，虽然没有返回值，但是也不要写void	</span></span><br><span class="line">    &#123;		</span><br><span class="line">        <span class="comment">//每一次创建对象，Person()都会被调用一次		</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;构造函数被调用&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="comment">//析构函数 进行清理的操作	</span></span><br><span class="line">    <span class="comment">//不能有参数，函数名与类名相同，在名称前加~,对象在销毁前会调用析构函数一次</span></span><br><span class="line">    ~<span class="built_in">Person</span>()	</span><br><span class="line">    &#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;析构函数被调用&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    Person p1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="built_in">test01</span>();<span class="comment">//在函数中创建了对象，运行结束后对象就会被销毁，所以两个函数都会运行</span></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="初始化列表"><a href="#初始化列表" class="headerlink" title="初始化列表"></a>初始化列表</h5><p>语法：<code>Person(int a,int b,int c) : m_A&#123;a&#125;, m_B(b), m_C(c) &#123;&#125;</code></p>
<h5 id="拷贝构造函数"><a href="#拷贝构造函数" class="headerlink" title="拷贝构造函数"></a>拷贝构造函数</h5><p>作用：使用一个对象对另一个对象进行赋值时默认调用拷贝构造函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span>:	</span><br><span class="line">    <span class="type">int</span> p_age;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//无参构造函数</span></span><br><span class="line">    <span class="built_in">Person</span>()	</span><br><span class="line">    &#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;无参构造函数已调用&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="comment">//有参构造函数	</span></span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> age)	&#123;	</span><br><span class="line">        <span class="comment">//调用构造函数	</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;调用构造函数age=&quot;</span> &lt;&lt; age&lt;&lt;endl;	</span><br><span class="line">        p_age = age;	</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//拷贝构造函数, 当使用该类的对象给其他对象赋值时调用该函数	</span></span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">const</span> Person &amp;p) 	</span><br><span class="line">    &#123;		</span><br><span class="line">        p_age = p.p_age;		</span><br><span class="line">        cout&lt;&lt; <span class="string">&quot;拷贝构造函数被调用&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;打印p_age = &quot;</span> &lt;&lt;p_age&lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    Person p3;  <span class="comment">//无参，调用的是无参构造函数  </span></span><br><span class="line">    <span class="function">Person <span class="title">p</span><span class="params">()</span></span>; <span class="comment">//这个不是无参，这是个函数声明！不会报错	</span></span><br><span class="line">    <span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">12</span>)</span></span>; <span class="comment">//构造函数里面有参数，所以需要传参	</span></span><br><span class="line">    <span class="function">Person <span class="title">p2</span><span class="params">(p1)</span></span>; <span class="comment">//等效于 p2=p1     </span></span><br><span class="line">    Person p4 = <span class="built_in">Person</span>(<span class="number">12</span>);<span class="comment">//等于 Person p4(12)      </span></span><br><span class="line">    Person p5 = <span class="built_in">Person</span>(p1);<span class="comment">//等于 Person p5=p1	</span></span><br><span class="line">    p2.<span class="built_in">print</span>();<span class="comment">//不可以将没有返回值的函数放到cout中</span></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Person(10);</code>//匿名对象，执行完立即被销毁</p>
<h6 id="深拷贝与浅拷贝"><a href="#深拷贝与浅拷贝" class="headerlink" title="深拷贝与浅拷贝"></a>深拷贝与浅拷贝</h6><p>浅拷贝：简单的赋值操作 （编译器默认的是浅拷贝），容易造成堆区的内存重复释放</p>
<p>深拷贝：在堆区重新申请空间，进行拷贝操作</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="type">int</span> p_age;</span><br><span class="line">    <span class="type">int</span>* h_height;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="comment">//有参构造函数</span></span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> age,<span class="type">int</span> height)	</span><br><span class="line">    &#123;		</span><br><span class="line">        <span class="comment">//调用构造函数	</span></span><br><span class="line">        p_age = age;   <span class="comment">//此处p_age已经定义过了，不能重复定义了，否则会报错   </span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;调用有参构造函数&quot;</span> &lt;&lt;endl;	</span><br><span class="line">        h_height = <span class="keyword">new</span> <span class="built_in">int</span>(height);	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;构造函数内h_height=&quot;</span> &lt;&lt; h_height &lt;&lt; endl;</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="comment">//拷贝构造函数	</span></span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">const</span> Person &amp;p) 	</span><br><span class="line">    &#123;			</span><br><span class="line">        cout&lt;&lt; <span class="string">&quot;拷贝构造函数被调用&quot;</span> &lt;&lt; endl;	</span><br><span class="line">        p_age = p.p_age; </span><br><span class="line">        <span class="comment">// h_height=p.h_height; //这就是默认的浅拷贝代码		</span></span><br><span class="line">        <span class="comment">// 深拷贝		</span></span><br><span class="line">        h_height = <span class="keyword">new</span> <span class="built_in">int</span>(*p.h_height);</span><br><span class="line">        <span class="comment">//新开辟一块内存	</span></span><br><span class="line">    &#125;	</span><br><span class="line">    ~<span class="built_in">Person</span>()	</span><br><span class="line">    &#123;		</span><br><span class="line">        <span class="comment">//释放内存		</span></span><br><span class="line">        <span class="keyword">if</span> (h_height != <span class="literal">NULL</span>)		</span><br><span class="line">        &#123;	</span><br><span class="line">            <span class="comment">//标准删除方法	</span></span><br><span class="line">            <span class="keyword">delete</span> h_height;		</span><br><span class="line">            h_height = <span class="literal">NULL</span>;  </span><br><span class="line">            </span><br><span class="line">        &#125;	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;调用析构函数&quot;</span> &lt;&lt; endl;		</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">12</span>, <span class="number">78</span>)</span></span>;</span><br><span class="line">    <span class="function">Person <span class="title">p2</span><span class="params">(p1)</span></span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;p1.p_age=&quot;</span> &lt;&lt; p1.p_age &lt;&lt; <span class="string">&quot;  *p1.h_height=&quot;</span> &lt;&lt; *p1.h_height &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="类对象作为类成员"><a href="#类对象作为类成员" class="headerlink" title="类对象作为类成员"></a>类对象作为类成员</h4><p>一个类中的某个对象是另一个类  （即套娃）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;<span class="keyword">class</span> <span class="title class_">B</span> &#123;    A b;&#125;</span><br></pre></td></tr></table></figure>



<h4 id="静态成员"><a href="#静态成员" class="headerlink" title="静态成员"></a>静态成员</h4><p>静态成员，顾名思义是类中的概念，就是在定义变量或函数的前面加上static关键字</p>
<p>静态成员分为：</p>
<p><strong>静态成员变量</strong> ，所有势力对象共享同一份数据，在编译阶段完成内存的分配，如果静态成员变量在类中，则必须要类内声明类外初始化。</p>
<p><strong>静态成员函数</strong> ，所有的对象公用一个函数，静态成员函数只能访问静态成员变量</p>
<h4 id="静态成员函数与静态成员变量"><a href="#静态成员函数与静态成员变量" class="headerlink" title="静态成员函数与静态成员变量"></a>静态成员函数与静态成员变量</h4><ol>
<li>静态成员函数不属于具体建立的对象，但是可以通过创建具体的对象来访问，也可以通过类名来直接访问。</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;   </span><br><span class="line">    <span class="function"><span class="type">static</span>  <span class="title">func</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">Person p; <span class="comment">//通过创建具体的对象来访问</span></span><br><span class="line">p.<span class="built_in">func</span>(); <span class="comment">//直接通过类名来访问</span></span><br><span class="line">Person::<span class="built_in">func</span>();</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>静态成员函数只能访问静态的成员变量,不能访问一般变量：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:   </span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> a;  </span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="title">func</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function">    </span>&#123;      </span><br><span class="line">        a=<span class="number">100</span>;<span class="comment">//一般函数这样写就会报错   </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> Person::a=<span class="number">0</span>;<span class="comment">//静态成员函数要在外面申明</span></span><br></pre></td></tr></table></figure>

<h4 id="this指针"><a href="#this指针" class="headerlink" title="this指针"></a>this指针</h4><p>this指针是隐含每一个非静态成员函数的一种指针</p>
<p>this指针不需要定义，直接使即可</p>
<p>this指针的用途：</p>
<p>1）当形参和成员变量同名是，this指针可用来区分</p>
<p>2）当类中的函数要返回对象本身时，可使用<code>return *this;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;    </span><br><span class="line">    <span class="keyword">public</span>:  </span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> age)   </span><br><span class="line">    &#123;       </span><br><span class="line">        <span class="type">int</span> age =age;<span class="comment">//这样，默认，这三个age是一个东西，跟属性age没有任何关系  </span></span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="type">int</span> age;       <span class="comment">//这种写法是错误的，Person()构造函数里面的age和外面定义的age不是一个age，构造函数里面的定义对外面的age没有影响！</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;    </span><br><span class="line">    <span class="keyword">public</span>: </span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> age)    </span><br><span class="line">    &#123;       </span><br><span class="line">        <span class="keyword">this</span>-&gt;  age =age; <span class="comment">//直接指向被调用的成员函数所属的对象，此处相当于p1-&gt;age=age,而p1-&gt;age就是p1内的属性age,就不会报错了   </span></span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="type">int</span> age;     </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">    Person p1;   </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>); </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="type">int</span> age;	</span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">    &#123;	</span><br><span class="line">        <span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">//要返回函数的本体，则函数类型为Person&amp;（用引用的方式进行返回）   </span></span><br><span class="line">    <span class="comment">//Person&amp;的方式返回的是此对象的引用，之后再更改更改的就是此对象的值，如果是Person的方式，返回的就是自动利用拷贝函数生成的新的Person对象，之后再操作原来对象中的age并不会被改变	</span></span><br><span class="line">    <span class="function">Person&amp; <span class="title">PersonAddAge</span><span class="params">(Person p)</span>	</span></span><br><span class="line"><span class="function">    </span>&#123;	</span><br><span class="line">        <span class="keyword">this</span>-&gt;age += p.age;	</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="友元"><a href="#友元" class="headerlink" title="友元"></a>友元</h4><p>在程序中，对于一些类里面的私有属性也想让类外的一些函数或类进行访问访问，就需要用到友元</p>
<p>友元，就是让一个函数或者类访问另一个类中的私有成员</p>
<p>友元的关键字：<code>friend</code></p>
<p>友元的三种实现：</p>
<p>全局函数做友元、类做友元、成员函数做友元</p>
<h5 id="1-全局函数做友元"><a href="#1-全局函数做友元" class="headerlink" title="1. 全局函数做友元"></a>1. 全局函数做友元</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 跟Build提前说声能访问的全局函数</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">goodGay</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">public</span>:	<span class="built_in">Building</span>()	</span><br><span class="line">    &#123;		</span><br><span class="line">        m_BedRoom = <span class="string">&quot;卧室&quot;</span>;	</span><br><span class="line">        m_SittingRoom = <span class="string">&quot;客厅&quot;</span>;	</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    string m_SittingRoom;   <span class="comment">//客厅，公有</span></span><br><span class="line">    <span class="keyword">private</span>:	string m_BedRoom;       <span class="comment">//卧室。私有</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    Building building;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;好基友正在访问：&quot;</span> &lt;&lt; building.m_SittingRoom &lt;&lt; endl;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;好基友正在访问：&quot;</span> &lt;&lt; building.m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="built_in">goodGay</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Everything all done!&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-类做友元"><a href="#2-类做友元" class="headerlink" title="2. 类做友元"></a>2. 类做友元</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;	</span><br><span class="line">    <span class="comment">// 跟Build提前说声能访问的类	</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">Goodgay</span>;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="built_in">Building</span>()</span><br><span class="line">    &#123; 		</span><br><span class="line">        m_BedRoom = <span class="string">&quot;卧室&quot;</span>;		</span><br><span class="line">        m_SittingRoom = <span class="string">&quot;客厅&quot;</span>;	</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    string m_SittingRoom;   <span class="comment">//客厅，公有</span></span><br><span class="line">    <span class="keyword">private</span>:	</span><br><span class="line">    string m_BedRoom;       <span class="comment">//卧室。私有</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Goodgay</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    Building building; 	</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function">    </span>&#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;好基友类正在访问: &quot;</span> &lt;&lt; building.m_SittingRoom &lt;&lt; endl;	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;好基友类正在访问: &quot;</span> &lt;&lt; building.m_BedRoom &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Goodgay gg;</span><br><span class="line">    gg.<span class="built_in">visit</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Everything all done!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-其他类中的成员函数做友元"><a href="#3-其他类中的成员函数做友元" class="headerlink" title="3. 其他类中的成员函数做友元"></a>3. 其他类中的成员函数做友元</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;	</span><br><span class="line">    <span class="comment">// 跟Build提前说声能访问的成员函数及其所在的类</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">Goodgay::visit</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="built_in">Building</span>()	</span><br><span class="line">    &#123; 		</span><br><span class="line">        m_BedRoom = <span class="string">&quot;卧室&quot;</span>;	</span><br><span class="line">        m_SittingRoom = <span class="string">&quot;客厅&quot;</span>;	</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    string m_SittingRoom;   <span class="comment">//客厅，公有</span></span><br><span class="line">    <span class="keyword">private</span>:	</span><br><span class="line">    string m_BedRoom;       <span class="comment">//卧室。私有</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Goodgay</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    Building building; 	</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span><span class="comment">//Goodgay中只有这个成员函数能访问Building中的s	</span></span></span><br><span class="line"><span class="function">    </span>&#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;好基友类正在访问: &quot;</span> &lt;&lt; building.m_SittingRoom &lt;&lt; endl;	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;好基友类正在访问: &quot;</span> &lt;&lt; building.m_BedRoom &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    Goodgay gg;</span><br><span class="line">    gg.<span class="built_in">visit</span>();	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Everything all done!&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h4><p>概念：对已有的运算符重新进行定义，以适应不同的数据类型之间的运算</p>
<h5 id="1-加号运算符重载"><a href="#1-加号运算符重载" class="headerlink" title="1. 加号运算符重载"></a>1. 加号运算符重载</h5><p>作用：实现两个自定义数据类型的加运算</p>
<p>方式：（1）成员函数重载，写在类的定义中</p>
<p>​          （2）全局函数重载，写在main外面</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="comment">//通过成员函数重载,函数名必须使用operator+	</span></span><br><span class="line">    Person <span class="keyword">operator</span>+(Person&amp; p)  	</span><br><span class="line">    &#123;		</span><br><span class="line">        Person temp;	</span><br><span class="line">        temp.m_a = <span class="keyword">this</span>-&gt;m_a + p.m_a;	</span><br><span class="line">        temp.m_b = <span class="keyword">this</span>-&gt;m_b + p.m_b;	</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="type">int</span> m_a;	</span><br><span class="line">    <span class="type">int</span> m_b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    Person p1;</span><br><span class="line">    p1.m_a = <span class="number">10</span>;</span><br><span class="line">    p1.m_b = <span class="number">5</span>;	</span><br><span class="line">    Person p2;</span><br><span class="line">    p2.m_a = <span class="number">10</span>;	</span><br><span class="line">    p2.m_b = <span class="number">10</span>;	</span><br><span class="line">    Person p3 = p1 + p2;  </span><br><span class="line">    <span class="comment">//本质上是调用函数operator+函数，但是可以简写成一个加号	</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;p3.m_a=&quot;</span> &lt;&lt; p3.m_a &lt;&lt; <span class="string">&quot;p3.m_b=&quot;</span> &lt;&lt; p3.m_b &lt;&lt; endl;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="type">int</span> m_a;</span><br><span class="line">    <span class="type">int</span> m_b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//通过全局函数重载</span></span><br><span class="line">Person <span class="keyword">operator</span>+(Person&amp; p1, Person&amp; p2)</span><br><span class="line">&#123;	</span><br><span class="line">    Person temp;	</span><br><span class="line">    temp.m_a = p1.m_a + p2.m_a;	</span><br><span class="line">    temp.m_b = p1.m_b + p2.m_b;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    Person p1;</span><br><span class="line">    p1.m_a = <span class="number">10</span>;	</span><br><span class="line">    p1.m_b = <span class="number">5</span>;	</span><br><span class="line">    Person p2;	</span><br><span class="line">    p2.m_a = <span class="number">10</span>;	</span><br><span class="line">    p2.m_b = <span class="number">10</span>;</span><br><span class="line">    Person p3 = p1 + p2;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;p3.m_a=&quot;</span> &lt;&lt; p3.m_a &lt;&lt; <span class="string">&quot;p3.m_b=&quot;</span> &lt;&lt; p3.m_b &lt;&lt; endl;	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="2-函数调用运算符“（）”重载"><a href="#2-函数调用运算符“（）”重载" class="headerlink" title="2. 函数调用运算符“（）”重载"></a>2. 函数调用运算符“（）”重载</h5><p>重载后的（）使用与函数的调用非常相似，因此也称之为仿函数，仿函数没有固定的写法，非常灵活</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Myprint</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//好像（）重载后就不能定义构造函数了</span></span><br><span class="line">    <span class="comment">//Myprint myprint(string text)	</span></span><br><span class="line">    <span class="comment">//&#123;	//	m_text = text;	//&#125;	//这个（）的作用就是直接打印传进来的string	</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(string text)</span>	</span></span><br><span class="line"><span class="function">    </span>&#123;		</span><br><span class="line">        cout &lt;&lt; text &lt;&lt; endl;	</span><br><span class="line">    &#125;	</span><br><span class="line">    string m_text;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    Myprint p1;</span><br><span class="line">    <span class="built_in">p1</span>(<span class="string">&quot;Jerry&quot;</span>);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h4><p>继承是面向对象的三大特征之一，利用继承在定义下级对像时可以减少工作量。</p>
<p>无论是哪种继承方式，子类都可以继承父类所有的属性，但是不一定能访问到</p>
<p>使用方式： <code>class 子类 :  继承方式 父类&#123;&#125;</code></p>
<h5 id="1-继承方式"><a href="#1-继承方式" class="headerlink" title="1. 继承方式"></a>1. 继承方式</h5><p>类的继承方式一共有3种：</p>
<p>公共继承、保护继承、私有继承</p>
<h5 id="2-继承中的构造和析构顺序"><a href="#2-继承中的构造和析构顺序" class="headerlink" title="2. 继承中的构造和析构顺序"></a>2. 继承中的构造和析构顺序</h5><p>父类构造函数先有，子类构造函数后有，子类析构函数先有，父类析构函数后有</p>
<p>及：</p>
<p><strong>父类先生成后销毁，子类后生成先销毁</strong></p>
<h5 id="3-父类和子类中的同名成员"><a href="#3-父类和子类中的同名成员" class="headerlink" title="3. 父类和子类中的同名成员"></a>3. 父类和子类中的同名成员</h5><p>子类中的直接访问，父类中的要加作用域</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父类：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;    </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="type">int</span> m_a=<span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//子类：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">public</span>:    </span><br><span class="line"><span class="type">int</span> m_a=<span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">Son s1;  </span><br><span class="line"><span class="comment">//访问子类中的m_a   </span></span><br><span class="line">s1.m_a;    </span><br><span class="line"><span class="comment">//访问父类中的m_a   </span></span><br><span class="line">s1.Base::m_a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>成员函数操作一样</p>
<h5 id="4-多继承语法"><a href="#4-多继承语法" class="headerlink" title="4. 多继承语法"></a>4. 多继承语法</h5><p>含义：允许一个子类继承多个父类</p>
<p><code>class Son : public Father1, protect Farther2..........&#123;&#125;</code></p>
<p><strong>多继承非常容易发生父类中类重名的情况，要注意使用作用域。c++不建议使用多继承！</strong></p>
<h5 id="5-菱形继承与虚继承"><a href="#5-菱形继承与虚继承" class="headerlink" title="5. 菱形继承与虚继承"></a>5. 菱形继承与虚继承</h5><p>两个子类继承同一个父类，又一个孙子类同时继承这两个子类</p>
<p>由此可知，菱形继承中的孙子类中的没个成员都有两份且每次使用时都要给定作用域，这很麻烦，使用虚继承可以解决这个问题</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//菱形继承与虚继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//使用 virtual关键字是按虚继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sheep</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tuo</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sheeptuo</span> : <span class="keyword">public</span> Sheep, <span class="keyword">public</span> Tuo &#123;&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	Sheeptuo st1;	<span class="comment">//这样 Sheeptuo中只有一个m_age成员，使用作用域后得到的也都只是指向这个m_aged	</span></span><br><span class="line">st1.m_age = <span class="number">10</span>;	</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st1.m_age=&quot;</span> &lt;&lt; st1.m_age &lt;&lt; endl;</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="类的多态"><a href="#类的多态" class="headerlink" title="类的多态"></a>类的多态</h4><p><strong>多态是c++面向对象的三大特性之一</strong></p>
<h5 id="1-多态的基本概念"><a href="#1-多态的基本概念" class="headerlink" title="1.多态的基本概念"></a>1.多态的基本概念</h5><p>多态的分类：静态多态、动态多态</p>
<p>两种多态的区别：静态的在编译阶段就已经确定函数的地址等，动态的在运行阶段才确定</p>
<p>关键：父类指针指向子类对象，这个指针实际上还是子类的东西</p>
<p><code>Base *s1 = new Son;</code></p>
<p>案列：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//动态多态</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="comment">//加virtua 实现动态多态	</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;动物在说话&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	<span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function">    </span>&#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;猫在说话&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//当用父类的指针指向子类的对象的时候，调用同名函数时若无上面的virtual 则默认调用父类中的函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSpeak</span><span class="params">(Animal&amp; animal)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    animal.<span class="built_in">speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    Cat cat;</span><br><span class="line">    <span class="built_in">doSpeak</span>(cat);	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>利用多态实现计算机：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//利用多态实现加减运算</span></span><br><span class="line"><span class="comment">// 利用多态的优点：</span></span><br><span class="line"><span class="comment">//1、更方便后期的扩展</span></span><br><span class="line"><span class="comment">//2、可读性强，每一个功能都分开了</span></span><br><span class="line"><span class="comment">//定义抽象的计算机类，它实现任何功能，</span></span><br><span class="line"><span class="comment">// 只是定义最终要结果的虚函数并接受两个数</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Abstractcalculator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">getResult</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;	</span><br><span class="line">&#125;	</span><br><span class="line"><span class="type">int</span> m_a;	</span><br><span class="line"><span class="type">int</span> m_b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//定义实现+的类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Addcalculator</span> : <span class="keyword">public</span> Abstractcalculator</span><br><span class="line">&#123;      </span><br><span class="line"><span class="keyword">public</span>:	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line"><span class="keyword">return</span> m_a + m_b;	</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//定义实现-的类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Subcalculator</span> : <span class="keyword">public</span> Abstractcalculator</span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">public</span>:	<span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line"><span class="keyword">return</span> m_a - m_b;	</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line"><span class="comment">//+ 多态实现的关键一步，父类指针指向子类对象	</span></span><br><span class="line">Abstractcalculator* add = <span class="keyword">new</span> Addcalculator;	</span><br><span class="line">add-&gt;m_a = <span class="number">10</span>;	</span><br><span class="line">add-&gt;m_b = <span class="number">12</span>;</span><br><span class="line">cout &lt;&lt; add-&gt;m_a &lt;&lt; <span class="string">&quot;+&quot;</span> &lt;&lt; add-&gt;m_b &lt;&lt; <span class="string">&quot;=&quot;</span> &lt;&lt; add-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;    </span><br><span class="line"><span class="keyword">delete</span> add		</span><br><span class="line"><span class="comment">//-	多态实现的关键一步，父类指针指向子类对象	</span></span><br><span class="line">Abstractcalculator* sub = <span class="keyword">new</span> Subcalculator;	</span><br><span class="line">sub-&gt;m_a = <span class="number">10</span>;	</span><br><span class="line">sub-&gt;m_b = <span class="number">12</span>;	</span><br><span class="line">cout &lt;&lt; sub-&gt;m_a &lt;&lt; <span class="string">&quot;+&quot;</span> &lt;&lt; sub-&gt;m_b &lt;&lt; <span class="string">&quot;=&quot;</span> &lt;&lt; sub-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;     </span><br><span class="line"><span class="function"><span class="keyword">delete</span> sub	<span class="title">system</span><span class="params">(<span class="string">&quot;pause&quot;</span>)</span></span>;	</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-纯虚函数和抽象类"><a href="#2-纯虚函数和抽象类" class="headerlink" title="2. 纯虚函数和抽象类"></a>2. 纯虚函数和抽象类</h5><p>多态中，通常父类中的虚函数是没用的，因此可以用纯虚函数代替，反正用的也是子类中的函数。</p>
<p>当一个类中出现了<strong>纯虚函数</strong>，则这个类就成为了<strong>抽象类</strong>，它不可以实列化对象，在子类中<strong>必须重写这个函数</strong></p>
<p>实现：<code>virtual int fun()=0;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//纯虚函数与抽象类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">fun</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;纯虚函数在子类中的的调用&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line"><span class="comment">//注意，多态需要父类指针指向子类对象	</span></span><br><span class="line">Base * s1=<span class="keyword">new</span> Son;	s1-&gt;<span class="built_in">fun</span>();	<span class="comment">//new出来的对象要及时删除！</span></span><br><span class="line"><span class="keyword">delete</span> s1;	</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-多态的应用案例"><a href="#3-多态的应用案例" class="headerlink" title="3.  多态的应用案例"></a>3.  多态的应用案例</h5><p>煮饮料，对于煮咖啡和煮茶都具有相同的步骤，所以定义一个父类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//利用多态实现饮料的冲泡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Abstractdring</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">boil</span><span class="params">()</span> </span>= <span class="number">0</span>;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">brew</span><span class="params">()</span> </span>= <span class="number">0</span>;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">pourInCup</span><span class="params">()</span> </span>= <span class="number">0</span>;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">putSomething</span><span class="params">()</span> </span>= <span class="number">0</span>;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">makeDring</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line"><span class="built_in">boil</span>();		</span><br><span class="line"><span class="built_in">brew</span>();	</span><br><span class="line"><span class="built_in">pourInCup</span>();	</span><br><span class="line"><span class="built_in">putSomething</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Coffee</span> : <span class="keyword">public</span> Abstractdring&#123;<span class="keyword">public</span>:	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">boil</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;咖啡开始煮水&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">brew</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;咖啡开始冲泡&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">pourInCup</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;咖啡开始倒入杯中&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">putSomething</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;咖啡加入一些调味品&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">makeDring</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line"><span class="built_in">boil</span>();		</span><br><span class="line"><span class="built_in">brew</span>();		</span><br><span class="line"><span class="built_in">pourInCup</span>();</span><br><span class="line"><span class="built_in">putSomething</span>();	</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tea</span> : <span class="keyword">public</span> Abstractdring</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">boil</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		cout &lt;&lt; <span class="string">&quot;茶开始煮水&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">brew</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;茶开始冲泡&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">pourInCup</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;茶开始倒入杯中&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">putSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;茶加入一些枸杞&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;	</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">makeDring</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line"><span class="built_in">boil</span>();		</span><br><span class="line"><span class="built_in">brew</span>();		</span><br><span class="line"><span class="built_in">pourInCup</span>();	</span><br><span class="line"><span class="built_in">putSomething</span>();	</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doWork</span><span class="params">(Abstractdring* abs)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">abs-&gt;<span class="built_in">makeDring</span>();	</span><br><span class="line"><span class="keyword">delete</span> abs;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line"><span class="comment">//直接new了一个Coffee对象，这个对象没有名字，但是使用后还是要释放	</span></span><br><span class="line"><span class="built_in">doWork</span>(<span class="keyword">new</span> Coffee);	</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;---------------------&quot;</span> &lt;&lt; endl;	</span><br><span class="line"><span class="built_in">doWork</span>(<span class="keyword">new</span> Tea);</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="4-虚析构和纯虚析构"><a href="#4-虚析构和纯虚析构" class="headerlink" title="4. 虚析构和纯虚析构"></a>4. 虚析构和纯虚析构</h5><p>作用：使用多态时，若子类有数据在堆区（new出来的）则父类在释放时释放不了子类在堆区的数据，造成内存浪费</p>
<p>实现：</p>
<p><strong>虚析构</strong>：</p>
<p>在父类的析构函数前加 <code>virtual</code></p>
<p><code>virtual ~Aniaml()</code></p>
<p><code>&#123;</code></p>
<p>​     <code>函数实现</code></p>
<p><code>&#125;</code></p>
<p><strong>纯虚析构</strong>：与纯虚函数一样，但是需要在类外加实现申明：</p>
<p><code>class Animal</code></p>
<p><code>&#123;...</code></p>
<p><code>...</code></p>
<p><code>virtual ~Animal()=0;</code></p>
<p><code>&#125;；</code></p>
<p><code>Animal::~Animal()</code></p>
<p><code>&#123;</code></p>
<p>​    <code>函数实现</code></p>
<p><code>&#125;</code></p>
<p>虚析构例子：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>()	</span><br><span class="line">    &#123;	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;父类构造函数&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="keyword">virtual</span> <span class="title">speak</span><span class="params">()</span> </span>= <span class="number">0</span>;  </span><br><span class="line">    <span class="comment">//当父类析构是虚析构时，delete 父类</span></span><br><span class="line">    <span class="comment">//时才会涉及到子类的析构函数	</span></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Base</span>()	</span><br><span class="line">    &#123;	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;父类析构函数&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span>:<span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	<span class="built_in">Son</span>(string name)	</span><br><span class="line">    &#123;		</span><br><span class="line">        n_name = <span class="keyword">new</span> <span class="built_in">string</span>(name);	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;子类构造函数&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="keyword">virtual</span> <span class="title">speak</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>&#123;		</span><br><span class="line">        cout &lt;&lt; *n_name &lt;&lt; <span class="string">&quot;小猫在说话&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;	</span><br><span class="line">    ~<span class="built_in">Son</span>()</span><br><span class="line">    &#123;		</span><br><span class="line">        <span class="keyword">if</span> (n_name != <span class="literal">NULL</span>)		</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//由于使用了new，要及时delete	</span></span><br><span class="line">            <span class="keyword">delete</span> n_name;	</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;子类析构函数&quot;</span> &lt;&lt; endl;	</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;	</span><br><span class="line">    string* n_name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="comment">//多态的实现，父类指针指向子类对象	</span></span><br><span class="line">    Base* b1 = <span class="keyword">new</span> <span class="built_in">Son</span>(<span class="string">&quot;TOM&quot;</span>);</span><br><span class="line">    b1-&gt;<span class="built_in">speak</span>();</span><br><span class="line">    <span class="comment">//父类指针在删除时不会涉及到子类的析构代码，	</span></span><br><span class="line">    <span class="comment">//所以new在Son中的数据不会被删除从而浪费内存	</span></span><br><span class="line">    <span class="keyword">delete</span> b1;	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5-案列-电脑组装"><a href="#5-案列-电脑组装" class="headerlink" title="5. 案列-电脑组装"></a>5. 案列-电脑组装</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//创建CPU、显卡、内存三个抽象类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cpu</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graphiccard</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Memory</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//创建电脑类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="built_in">Computer</span>(Cpu* cpu,Graphiccard* graphiccard,Memory* memory)	</span><br><span class="line">    &#123;		</span><br><span class="line">        m_cpu=cpu;	</span><br><span class="line">        m_graphiccard=graphiccard;	</span><br><span class="line">        m_memory= memory;	</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;	</span><br><span class="line">        m_cpu-&gt;<span class="built_in">calculate</span>();	</span><br><span class="line">        m_graphiccard-&gt;<span class="built_in">display</span>();	</span><br><span class="line">        m_memory-&gt;<span class="built_in">storage</span>();	</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="comment">//由于传进来了堆区的文件，一定要记得在析构函数中释放	</span></span><br><span class="line">    ~<span class="built_in">Computer</span>()	</span><br><span class="line">    &#123;		</span><br><span class="line">        <span class="keyword">if</span> (m_cpu!= <span class="literal">NULL</span>)	</span><br><span class="line">        &#123;			</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">delete</span> m_cpu;	</span><br><span class="line">            m_cpu = <span class="literal">NULL</span>;		</span><br><span class="line">        &#125;		</span><br><span class="line">        <span class="keyword">if</span> (m_graphiccard != <span class="literal">NULL</span>)	</span><br><span class="line">        &#123;			</span><br><span class="line">            <span class="keyword">delete</span> m_graphiccard;		</span><br><span class="line">            m_graphiccard = <span class="literal">NULL</span>;		</span><br><span class="line">        &#125;	</span><br><span class="line">        <span class="keyword">if</span> (m_memory != <span class="literal">NULL</span>)	</span><br><span class="line">        &#123;			</span><br><span class="line">            <span class="keyword">delete</span> m_memory;		</span><br><span class="line">            m_memory = <span class="literal">NULL</span>;	</span><br><span class="line">        &#125;	</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span>:	</span><br><span class="line">    Cpu* m_cpu;</span><br><span class="line">    Graphiccard* m_graphiccard;	</span><br><span class="line">    Memory* m_memory;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//创建两家厂商,每家厂商都可以单独制造这三种零件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lenovocpu</span>:<span class="keyword">public</span> Cpu</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;	</span><br><span class="line">        cout&lt;&lt; <span class="string">&quot;联想的CPU正在工作&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lenovogpu</span> :<span class="keyword">public</span> Graphiccard</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;联想的显卡正在工作&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lenovomemory</span> :<span class="keyword">public</span> Memory</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;联想的内存条正在工作&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Intelcpu</span> : <span class="keyword">public</span> Cpu</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function">    </span>&#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Intel的CPU正在工作&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Intelgpu</span> : <span class="keyword">public</span> Graphiccard</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function">    </span>&#123;	</span><br><span class="line">        cout&lt;&lt; <span class="string">&quot;Intel的显卡正在工作&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Intelmemory</span> :<span class="keyword">public</span> Memory&#123;</span><br><span class="line">    <span class="keyword">public</span>:	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Intel的内存条正在工作&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;创建第一台电脑&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    <span class="comment">//第一台电脑</span></span><br><span class="line">    Computer* computer_01= <span class="keyword">new</span> <span class="built_in">Computer</span>(<span class="keyword">new</span> Intelcpu, <span class="keyword">new</span> Intelgpu, <span class="keyword">new</span> Intelmemory);	</span><br><span class="line">    computer_01-&gt;<span class="built_in">work</span>();	</span><br><span class="line">    <span class="comment">//开辟到堆区的文件一定记得释放	</span></span><br><span class="line">    <span class="keyword">delete</span> computer_01;</span><br><span class="line">    computer_01 = <span class="literal">NULL</span>;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;============================&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;创建第二台电脑&quot;</span> &lt;&lt; endl;	</span><br><span class="line">    <span class="comment">//第二台电脑	</span></span><br><span class="line">    Computer* computer_02 = <span class="keyword">new</span> <span class="built_in">Computer</span>(<span class="keyword">new</span> Lenovocpu, <span class="keyword">new</span> Lenovogpu, <span class="keyword">new</span> Intelmemory);	</span><br><span class="line">    computer_02-&gt;<span class="built_in">work</span>();</span><br><span class="line">    <span class="comment">//开辟到堆区的文件一定记得释放	</span></span><br><span class="line">    <span class="keyword">delete</span> computer_02;</span><br><span class="line">    computer_02 = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><p>​      程序在运行过程中产生的数据都是临时的，程序已结束就会消失，所以需要主动保存文件，c++中将文件分为两类，文本文件和二进制文件（也就是我们常用的.mp4,.mp3等直接读不懂的文件），对文件的操作需要用到头文件<code>&lt;fstream&gt;</code>.</p>
<p>​    对文件的操作分为三类：读<code>ofstream</code>、写<code>ifstream</code>、读写<code>fstream</code></p>
<h4 id="1-文本文件"><a href="#1-文本文件" class="headerlink" title="1. 文本文件"></a>1. 文本文件</h4><h5 id="1-写文本文件"><a href="#1-写文本文件" class="headerlink" title="1. 写文本文件"></a>1. 写文本文件</h5><p>写文件分为4步：创建流对象<code>ofstream ofs</code>-&gt;打开文件<code>ofs.open(&quot;文件路径&quot;,打开方式)</code>-&gt;写入文件<code>ofs&lt;&lt;&quot;文件内容&quot;-</code>&gt;关闭文件<code>ofs.close()</code></p>
<p>打开文件的方式：</p>
<table>
<thead>
<tr>
<th align="center">打开方式</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ios::in</td>
<td align="center">读打开</td>
</tr>
<tr>
<td align="center">ios::out</td>
<td align="center">写打开</td>
</tr>
<tr>
<td align="center">ios::ate</td>
<td align="center">在文件末尾开始</td>
</tr>
<tr>
<td align="center">ios::app</td>
<td align="center">以追加的方式开始</td>
</tr>
<tr>
<td align="center">ios::trunc</td>
<td align="center">如果已存在文件直接删除重新创建</td>
</tr>
<tr>
<td align="center">ios::binary</td>
<td align="center">二进制方式</td>
</tr>
</tbody></table>
<p>注意：如果要多重方式打开文件，用 | 操作符</p>
<p>用二进制方式写文件：<code>ofs.open(&quot;E:\电影\风骚律师&quot;,ios:binary|ios::out);</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    ofstream ofs;</span><br><span class="line">    <span class="comment">//这个对象是从内存写到磁盘，所以是</span></span><br><span class="line">    ofstream	ofs.<span class="built_in">open</span>(<span class="string">&quot;test01.txt&quot;</span>, ios::out);</span><br><span class="line">    ofs &lt;&lt; <span class="string">&quot;这里是test01!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-读文件"><a href="#2-读文件" class="headerlink" title="2.读文件"></a>2.读文件</h5><p>读文件分为5步：创建流对象<code>ifstream ifs</code>-&gt;打开文件<code>ifs.open(&quot;文件路径&quot;,打开方式)</code>-&gt;<code>ifs.is_open()</code>判断是否打开成功-&gt;4种方式读取数据-&gt;关闭文件<code>ifs.close()</code></p>
<p>读取文件的方式有4种，分别为：</p>
<ol>
<li><p>用&gt;&gt;运算符 ：  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个数组用来存放读取的文件	</span></span><br><span class="line"><span class="type">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;	</span><br><span class="line"><span class="keyword">while</span> (ifs &gt;&gt; buf)</span><br><span class="line">&#123;		</span><br><span class="line">    cout &lt;&lt; buf &lt;&lt; endl;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>用getline()</p>
</li>
</ol>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;  	</span><br><span class="line"><span class="keyword">while</span> (ifs.<span class="built_in">getline</span>(buf,<span class="built_in">sizeof</span>(buf)))  </span><br><span class="line">&#123;  		</span><br><span class="line">    cout &lt;&lt; buf &lt;&lt; endl;  	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>getline+string</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个string用来存放读取的文件	</span></span><br><span class="line">string buf;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">getline</span>(ifs,buf))	</span><br><span class="line">&#123;		</span><br><span class="line">    cout &lt;&lt; buf &lt;&lt; endl;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>EOF+get    (不推荐使用这种方法)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   	<span class="comment">//创建一个char用来一个一个的存放字符</span></span><br><span class="line">   <span class="type">char</span> c;	</span><br><span class="line"><span class="keyword">while</span> ((c=ifs.<span class="built_in">get</span>())!=EOF)	</span><br><span class="line">   &#123;		</span><br><span class="line">       cout &lt;&lt; c;	</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ifstream ifs;	</span><br><span class="line">    ifs.<span class="built_in">open</span>(<span class="string">&quot;test01.txt&quot;</span>, ios::in);	</span><br><span class="line">    <span class="comment">//判断是否打开	</span></span><br><span class="line">    <span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())	</span><br><span class="line">    &#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;文件打开失败&quot;</span> &lt;&lt; endl;	</span><br><span class="line">        <span class="keyword">return</span>;	</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="comment">//创建一个char用来一个一个的存放字符</span></span><br><span class="line">    <span class="type">char</span> c;	</span><br><span class="line">    <span class="keyword">while</span> ((c=ifs.<span class="built_in">get</span>())!=EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; c;	</span><br><span class="line">    &#125;	</span><br><span class="line">    ifs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test01</span>();	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="2-二进制文件"><a href="#2-二进制文件" class="headerlink" title="2. 二进制文件"></a>2. 二进制文件</h4><h5 id="1-写文件"><a href="#1-写文件" class="headerlink" title="1. 写文件"></a>1. 写文件</h5><p>   可以将任意形式的文件写进磁盘，此处将一个Person类写进TXT文档</p>
   <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="type">char</span> m_name[<span class="number">64</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="type">int</span> m_age = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//此处类的赋值方式与struct相同	</span></span><br><span class="line">    Person p1 = &#123; <span class="string">&quot;Bob&quot;</span>,<span class="number">18</span> &#125;;	</span><br><span class="line">    <span class="function">ofstream <span class="title">ofs</span><span class="params">( <span class="string">&quot;Person_p1.txt&quot;</span>,ios::out | ios::binary )</span></span>;	</span><br><span class="line">    <span class="comment">//ofs.write()的第一个参数必须是const char*类型，所以要强制转换</span></span><br><span class="line">    ofs.<span class="built_in">write</span>((<span class="type">const</span> <span class="type">char</span>*)&amp;p1, <span class="built_in">sizeof</span>(Person));	</span><br><span class="line">    ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="built_in">test01</span>();	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-读文件-1"><a href="#2-读文件-1" class="headerlink" title="2.读文件"></a>2.读文件</h5><p>除了要用<code>read()</code>，其他与文本文件操作相同</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:	<span class="type">char</span> m_name[<span class="number">64</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="type">int</span> m_age = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    Person p1;</span><br><span class="line">    <span class="function">ifstream <span class="title">ifs</span><span class="params">( <span class="string">&quot;Person_p1.txt&quot;</span>,ios::in | ios::binary )</span></span>;</span><br><span class="line">    <span class="comment">//ifs.read()的第一个参数必须是char*类型，所以要强制转换	</span></span><br><span class="line">    ifs.<span class="built_in">read</span>((<span class="type">char</span>*)&amp;p1, <span class="built_in">sizeof</span>(Person));	</span><br><span class="line">    ifs.<span class="built_in">close</span>();</span><br><span class="line">    cout &lt;&lt; p1.m_age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="built_in">test01</span>();	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="C-提高编程"><a href="#C-提高编程" class="headerlink" title="C++提高编程"></a>C++提高编程</h2><h3 id="1-模板"><a href="#1-模板" class="headerlink" title="1. 模板"></a>1. 模板</h3><p>C++的另一特性：泛型编程</p>
<p>提供两种模板机制：函数模板和类模板</p>
<h4 id="1-1-函数模板"><a href="#1-1-函数模板" class="headerlink" title="1.1 函数模板"></a>1.1 函数模板</h4><p>函数模板：一个通用函数，其传入值和返回值的类型可以在定义时并不确定，而是用一个虚拟的类型来代表</p>
<p>语法：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">函数申明或定义</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&quot;typename是你自己起的名字，函数模板可以随便起，但类模板必须用class，所以建议全都用class</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="comment">//必须是这一行在前面，后面跟着定义的函数，数据类型全部替换为T，T可为任意字母</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	T temp = a;</span><br><span class="line">	a = b;</span><br><span class="line">	b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"><span class="built_in">mySwap</span>(a, b)<span class="comment">//这里的a,b可以为任何能完成交换的数据类型，编译器会自动识别数据类型</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong> ：一旦使用了模板，必须要指名T的类型，不能定义了个模板但是从头到尾没有出现T，会报错</p>
<h4 id="1-2-类模板"><a href="#1-2-类模板" class="headerlink" title="1.2 类模板"></a>1.2 类模板</h4><p>类模板：与函数模板相同，不过定义的是类。</p>
<p>类模板与函数模板得区别：类模板不可以自动得推导类型，类模板可以有默认得参数类型</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//类模板</span></span><br><span class="line"><span class="comment">//可以有默认得参数类型，但是建议定义不能省略</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span> = string, <span class="keyword">class</span> Agetype=<span class="type">int</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> Person&#123;</span><br><span class="line">        <span class="keyword">public</span>:	</span><br><span class="line">            <span class="built_in">Person</span>(NameType name,Agetype age)	</span><br><span class="line">            &#123;		</span><br><span class="line">                <span class="keyword">this</span>-&gt;m_name = name;		</span><br><span class="line">                <span class="keyword">this</span>-&gt;m_age = age;	</span><br><span class="line">            &#125;	</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function">        </span>&#123;		</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_name &lt;&lt; <span class="string">&quot;  age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_age &lt;&lt; endl;	</span><br><span class="line">        &#125;	</span><br><span class="line">        NameType m_name;	</span><br><span class="line">        Agetype m_age;&#125;;</span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;        </span><br><span class="line">    <span class="comment">//注意再Person后&lt;&gt;中说明变量得类型，类模板不能自动推导类型        </span></span><br><span class="line">    <span class="function">Person&lt;string, <span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;sunwukong&quot;</span>, <span class="number">99999</span>)</span></span>;	</span><br><span class="line">    p1.<span class="built_in">showPerson</span>();	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-1-类模板对象做函数传入参数"><a href="#1-2-1-类模板对象做函数传入参数" class="headerlink" title="1.2.1 类模板对象做函数传入参数"></a>1.2.1 类模板对象做函数传入参数</h5><p>类模板实例化出来得对象作为函数得参数</p>
<p>传入方式一共有3种：</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//类模板</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">Person</span>(T1 name,T2 age)	</span><br><span class="line">        &#123;		</span><br><span class="line">            <span class="keyword">this</span>-&gt;m_name = name;	</span><br><span class="line">            <span class="keyword">this</span>-&gt;m_age = age;	</span><br><span class="line">        &#125;	</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function">        </span>&#123;		</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_name &lt;&lt; <span class="string">&quot;  age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_age &lt;&lt; endl;	</span><br><span class="line">        &#125;	</span><br><span class="line">        T1 m_name;	</span><br><span class="line">        T2 m_age;</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="comment">//1. 直接指定传入类型，建议使用这种！</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson</span><span class="params">(Person&lt;string, <span class="type">int</span>&gt;&amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2. 参数模板化，利用了函数模板得自动类型推导</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1,<span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function">    <span class="type">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1,T2&gt;&amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//3. 将整个类作为一个模板,让函数自己推</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">    <span class="type">void</span> <span class="title">printPerson3</span><span class="params">(T&amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="function">Person&lt;string,<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;孙悟空&quot;</span>, <span class="number">99999</span>)</span></span>;	</span><br><span class="line">    <span class="built_in">printPerson</span>(p1);	</span><br><span class="line">    <span class="built_in">printPerson2</span>(p1);	</span><br><span class="line">    <span class="built_in">printPerson3</span>(p1);	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h5 id="1-2-2-类模板与继承"><a href="#1-2-2-类模板与继承" class="headerlink" title="1.2.2 类模板与继承"></a>1.2.2 类模板与继承</h5><p>类模板的继承要注意：</p>
<p>①、当子类的继承对象是个模板时，子类在声明的时候也要指出父类中T的类型</p>
<p>②、如果实在不能确定父类中T 的类型那么子类也要变成一个模板类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span>:	</span><br><span class="line">        T age=<span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="comment">//1. 直接声明T的类型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span>:<span class="keyword">public</span> Base&lt;<span class="type">int</span>&gt;&#123;&#125;;</span><br><span class="line"><span class="comment">//2. 不确定T，则将子类也设置位模板类,那么实例化时就要声明</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Son2</span> : <span class="keyword">public</span> Base&lt;T&gt;</span><br><span class="line">    &#123;&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Son s1;</span><br><span class="line">    cout &lt;&lt; s1.age &lt;&lt; endl;	</span><br><span class="line">    Son2&lt;<span class="type">int</span>&gt; s2;	</span><br><span class="line">    cout &lt;&lt; s2.age &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h5 id="1-2-3-模板类成员函数的类外实现"><a href="#1-2-3-模板类成员函数的类外实现" class="headerlink" title="1.2.3 模板类成员函数的类外实现"></a>1.2.3 模板类成员函数的类外实现</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//类模板</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span>:</span><br><span class="line">        <span class="comment">//构造函数，只需要写声明	</span></span><br><span class="line">        <span class="built_in">Person</span>(T name);	</span><br><span class="line">        <span class="comment">//成员函数，也只需要写声明</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;	</span><br><span class="line">        T name;</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="comment">//构造函数在类外的实现,注意要声明Person中有个T</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    Person&lt;T&gt;::<span class="built_in">Person</span>(T name)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//成员函数的类外实现，同样要声明Person里面有个T</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="type">void</span> Person&lt;T&gt;::<span class="built_in">showPerson</span>()</span><br><span class="line">    &#123;	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;name &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="function">Person&lt;string&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;葫芦娃&quot;</span>)</span></span>;	</span><br><span class="line">    p1.<span class="built_in">showPerson</span>();	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h5 id="1-2-4-类模板的分文件编写"><a href="#1-2-4-类模板的分文件编写" class="headerlink" title="1.2.4 类模板的分文件编写"></a>1.2.4 类模板的分文件编写</h5><p>由于模板类中的成员函数只有在运用的时候才会创建，所以如果将模板定义与实现分开编写的话编译器只能看到.h文件中的声明，并不能看到.cpp文件中的实现！</p>
<p>分文件编写：</p>
<p>person.h文件：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;<span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">    <span class="comment">//构造函数，只需要写声明</span></span><br><span class="line">    <span class="built_in">Person</span>(T name);	</span><br><span class="line">    <span class="comment">//成员函数，也只需要写声明</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line">    T name;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>person.cpp文件</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;person.h&quot;</span></span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    Person&lt;T&gt;::<span class="built_in">Person</span>(T name)</span><br><span class="line">    &#123;	</span><br><span class="line">        <span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="type">void</span> Person&lt;T&gt;::<span class="built_in">showPerson</span>()</span><br><span class="line">    &#123;	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;name &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>main.cpp文件</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;person.cpp&quot;</span></span></span><br><span class="line"><span class="comment">//注意，这里如果是包含的.h文件会出错</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="function">Person&lt;string&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;葫芦娃&quot;</span>)</span></span>;</span><br><span class="line">    p1.<span class="built_in">showPerson</span>();	</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>鉴于类模板这种特殊的情况（创建时不会主动创建成员函数）可以将.h和.cpp <strong>写在一个文件中并命名为.hpp</strong> </p>
<p>这种方式是处理类模板分文件编写的主要方式！</p>
<p><strong>person.hpp</strong>  文件：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//声明</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span>:	</span><br><span class="line">        <span class="comment">//构造函数，只需要写声明	</span></span><br><span class="line">        <span class="built_in">Person</span>(T name);</span><br><span class="line">        <span class="comment">//成员函数，也只需要写声明	</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line">        T name;</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="comment">//实现</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    Person&lt;T&gt;::<span class="built_in">Person</span>(T name)</span><br><span class="line">    &#123;	</span><br><span class="line">        <span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="type">void</span> Person&lt;T&gt;::<span class="built_in">showPerson</span>()</span><br><span class="line">    &#123;	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;name &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>mian.cpp文件：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;person.hpp&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="function">Person&lt;string&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;葫芦娃&quot;</span>)</span></span>;</span><br><span class="line">    p1.<span class="built_in">showPerson</span>();</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h5 id="1-2-5-类模板与友元"><a href="#1-2-5-类模板与友元" class="headerlink" title="1.2.5 类模板与友元"></a>1.2.5 类模板与友元</h5><p>目标：掌握类模板配合友元函数的类内和内外实现</p>
<p>注意：类外全局函数实现需要让编译器 <strong>提前知道这个模板类和这个全局函数存在</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//类外实现要提前让编译器知道有Person这个类</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Person</span>;<span class="comment">//类外实现要在定义Person类之前让编译器知道这个全局函数的存在</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1, <span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function">    <span class="type">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1, T2&gt; p)</span></span>;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>,<span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Person</span> </span><br><span class="line">&#123;	</span><br><span class="line">        <span class="comment">//全局函数的类内实现，注意传入的参数是Person类的实例化对象p</span></span><br><span class="line">        <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">printPerson</span><span class="params">(Person&lt;T1, T2&gt; p)</span>	</span></span><br><span class="line"><span class="function">        </span>&#123;		</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;类内实现的------name: &quot;</span> &lt;&lt; p.name &lt;&lt; <span class="string">&quot;age: &quot;</span> &lt;&lt; p.age &lt;&lt; endl;	</span><br><span class="line">        &#125;	</span><br><span class="line">        <span class="comment">//全局函数的类外实现，里面只有声明没有实现</span></span><br><span class="line">        <span class="keyword">friend</span> <span class="type">void</span> printPerson2&lt;&gt;(Person&lt;T1, T2&gt; p);</span><br><span class="line">        <span class="comment">//类外实现要加空参数列表&lt;&gt;   </span></span><br><span class="line">        <span class="keyword">public</span>:	<span class="built_in">Person</span>(T1 age,T2 name)	</span><br><span class="line">        &#123;		</span><br><span class="line">            <span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">            <span class="keyword">this</span>-&gt;name = name;	</span><br><span class="line">        &#125;</span><br><span class="line">        T1 age;</span><br><span class="line">        T2 name;</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="comment">//类外实现的具体函数内容，也可以在上面声明时直接写好</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1, <span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function">    <span class="type">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1, T2&gt; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;类外实现的------name: &quot;</span> &lt;&lt; p.name &lt;&lt; <span class="string">&quot;age: &quot;</span> &lt;&lt; p.age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="function">Person&lt;string,<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;葫芦娃&quot;</span>,<span class="number">12</span>)</span></span>;	</span><br><span class="line">    <span class="built_in">printPerson</span>(p1);</span><br><span class="line">    <span class="built_in">printPerson2</span>(p1);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h5 id="1-2-6-类模板案例"><a href="#1-2-6-类模板案例" class="headerlink" title="1.2.6 类模板案例"></a>1.2.6 类模板案例</h5><p>这个自定义的MyArray类需要实现的功能：</p>
<p>①  可以对内置数据类型以及自定义数据类型的数据进行存储·将数组中的数据存储到堆区<br>②  构造函数中可以传入数组的容量<br>③  提供对应的拷贝构造函数以及operator= 防止浅拷贝问题<br>④  提供尾插法和尾删法对数组中的数据进行增加和删除可以通过下标的方式访问数组中的元  素以获取数组中当前元素个数和数组的容量</p>
<p><strong>分析：</strong> 由于不知道放入的东西是什么类型，所以要用到模板</p>
<h6 id="1、构造函数，析构，深拷贝的实现，重载运算符-的实现"><a href="#1、构造函数，析构，深拷贝的实现，重载运算符-的实现" class="headerlink" title="1、构造函数，析构，深拷贝的实现，重载运算符= 的实现"></a>1、构造函数，析构，深拷贝的实现，重载运算符= 的实现</h6><p><strong>构造函数：</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//构造函数，完成初始化</span></span><br><span class="line"><span class="built_in">MyArray</span>(<span class="type">int</span> capacity)	</span><br><span class="line">&#123;		</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_capacity = capacity;	</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_size = <span class="number">0</span>;<span class="comment">//初始数组中没有数据	</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_capacity];    <span class="comment">//在堆区开辟一块地方存数据	</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;构造函数调用成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>析构函数：</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//析构函数，出现了堆区的数据，必须要有析构函数	</span></span><br><span class="line">~<span class="built_in">MyArray</span>()	</span><br><span class="line">&#123;		</span><br><span class="line">    <span class="comment">//析构函数释放堆区的常规操作		</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAddress != <span class="literal">NULL</span>)	</span><br><span class="line">    &#123;			</span><br><span class="line">        <span class="keyword">delete</span> [] <span class="keyword">this</span>-&gt;pAddress;		</span><br><span class="line">        <span class="keyword">this</span>-&gt;pAddress = <span class="literal">NULL</span>;	</span><br><span class="line">    &#125;	</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;析构函数调用成功&quot;</span> &lt;&lt; endl;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>深拷贝：</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//重定义拷贝构造函数，因为出现了堆区的数据，一定要防止浅拷贝导致的指针重复释放	</span></span><br><span class="line"><span class="built_in">MyArray</span>(<span class="type">const</span> MyArray&amp; arr)	</span><br><span class="line">&#123;		</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_capacity = arr.m_capacity;	</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_size = arr.m_size;	</span><br><span class="line">    <span class="comment">//this-&gt;pAdddress = arr.pAddress;</span></span><br><span class="line">    <span class="comment">//这就是默认的拷贝构造函数，是浅拷贝	</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;pAddress = <span class="keyword">new</span> T[arr.m_capacity];		</span><br><span class="line">    <span class="comment">//将原来数组中的数据拿过来	</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;m_size; i++)	</span><br><span class="line">    &#123;		</span><br><span class="line">        <span class="keyword">this</span>-&gt;pAddress[i] = arr.pAddress[i];	</span><br><span class="line">    &#125;		</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;拷贝函数调用成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>重载=：</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//重载operator= 防止 a=b=c的问题	</span></span><br><span class="line">MyArray&amp; <span class="keyword">operator</span>=(<span class="type">const</span> MyArray&amp; arr)	</span><br><span class="line">&#123;		</span><br><span class="line">    <span class="comment">//先判断b中是否有数据，如果有删掉换成c的	</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAddress != <span class="literal">NULL</span>)		</span><br><span class="line">    &#123;		</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_size = <span class="number">0</span>;		</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_capacity = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pAddress;	</span><br><span class="line">        <span class="keyword">this</span>-&gt;pAddress = <span class="literal">NULL</span>;	</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_capacity = arr.m_capacity;		</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_size = arr.m_size;	</span><br><span class="line">    <span class="comment">// 与深拷贝相同，也要重开一块，防止指针重复释放	</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;pAddress = <span class="keyword">new</span> T[arr.m_capacity];	</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;m_size; i++)	</span><br><span class="line">    &#123;			t</span><br><span class="line">        his-&gt;pAddress[i] = arr.pAddress[i];	</span><br><span class="line">    &#125;		</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;重载operator=调用成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    <span class="comment">//非常关键，重载=的目的就是让a=b返回a，使得a=b=c得以实现	</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2、尾插、尾删除、通过下标访问数据、得到数组容量和大小"><a href="#2、尾插、尾删除、通过下标访问数据、得到数组容量和大小" class="headerlink" title="2、尾插、尾删除、通过下标访问数据、得到数组容量和大小"></a>2、尾插、尾删除、通过下标访问数据、得到数组容量和大小</h6><p><strong>尾插：</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//尾插法，在数组最后面添加一个数据	</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushBack</span><span class="params">(<span class="type">const</span> T&amp; val)</span></span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_size == <span class="keyword">this</span>-&gt;m_capacity)	</span><br><span class="line">    &#123;		</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;数组已满，请先删除&quot;</span> &lt;&lt; endl;	</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;		</span><br><span class="line">        <span class="keyword">this</span>-&gt;pAddress[<span class="keyword">this</span>-&gt;m_size] = val;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_size++;		</span><br><span class="line">    &#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>尾删：</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//尾删，删除数组的最后一个数，实际是逻辑删除	</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">popBack</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_size == <span class="number">0</span>)	</span><br><span class="line">    &#123;			</span><br><span class="line">        <span class="keyword">return</span>;	</span><br><span class="line">    &#125;		</span><br><span class="line">    <span class="keyword">else</span>	</span><br><span class="line">    &#123;		</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_size--;<span class="comment">//直接后移一个即可	</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>通过下标访问数据：</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下标访问，即通过arr[0]来访问或更改这个位置的值，实际上就是定义运算符 [ ]	</span></span><br><span class="line"><span class="comment">//由于可能对返回的值进行更改，比如arr[0]=19,所以返回值是这个地方的值的引用而不是这个地方的值</span></span><br><span class="line">T&amp; <span class="keyword">operator</span>[](<span class="type">int</span> index)	</span><br><span class="line">&#123;		</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;pAddress[index];	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>得到数组容量和大小：</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//得到数组容量和大小	</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getCapacity</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_capacity;</span><br><span class="line">&#125;	</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getSize</span><span class="params">()</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="3、所有代码"><a href="#3、所有代码" class="headerlink" title="3、所有代码"></a>3、所有代码</h6><p><strong>Myarray.hpp</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;Myarray.hpp&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//注意，次数&lt;int&gt;可以替换成自己定义的类型，比如之前定义的Person类</span></span><br><span class="line">    <span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">arr1</span><span class="params">(<span class="number">5</span>)</span></span>;<span class="comment">//注意指名T的类型</span></span><br><span class="line">&#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;	</span><br><span class="line">        <span class="built_in">test01</span>();<span class="comment">//析构函数起作用	</span></span><br><span class="line">        <span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">arr2</span><span class="params">(<span class="number">2</span>)</span></span>;	</span><br><span class="line">        <span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">arr3</span><span class="params">(arr2)</span></span>;<span class="comment">//深拷贝函数将起作用</span></span><br><span class="line">        arr2 = arr3;<span class="comment">//重载operator=将起作用	</span></span><br><span class="line">        arr2.<span class="built_in">pushBack</span>(<span class="number">3</span>);	</span><br><span class="line">        arr2.<span class="built_in">pushBack</span>(<span class="number">3</span>);	</span><br><span class="line">        arr2.<span class="built_in">popBack</span>();	</span><br><span class="line">        arr2.<span class="built_in">pushBack</span>(<span class="number">1</span>);	</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;arr2[1] = &quot;</span>&lt;&lt;arr2[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;arr2.getCapacity() = &quot;</span>&lt;&lt;arr2.<span class="built_in">getCapacity</span>()&lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;arr2.getSize() = &quot;</span> &lt;&lt; arr2.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);	</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>Myarray.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;Myarray.hpp&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//注意，次数&lt;int&gt;可以替换成自己定义的类型，比如之前定义的Person类</span></span><br><span class="line">	<span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">arr1</span><span class="params">(<span class="number">5</span>)</span></span>;<span class="comment">//注意指名T的类型</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();<span class="comment">//析构函数起作用</span></span><br><span class="line">	<span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">arr2</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">	<span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">arr3</span><span class="params">(arr2)</span></span>;<span class="comment">//深拷贝函数将起作用</span></span><br><span class="line">	arr2 = arr3;<span class="comment">//重载operator=将起作用</span></span><br><span class="line">	arr2.<span class="built_in">pushBack</span>(<span class="number">3</span>);</span><br><span class="line">	arr2.<span class="built_in">pushBack</span>(<span class="number">3</span>);</span><br><span class="line">	arr2.<span class="built_in">popBack</span>();</span><br><span class="line">	arr2.<span class="built_in">pushBack</span>(<span class="number">1</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;arr2[1] = &quot;</span>&lt;&lt;arr2[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;arr2.getCapacity() = &quot;</span>&lt;&lt;arr2.<span class="built_in">getCapacity</span>()&lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;arr2.getSize() = &quot;</span> &lt;&lt; arr2.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-STL"><a href="#2-STL" class="headerlink" title="2. STL"></a>2. STL</h3><p>STL(Standard Template Library,标准模板库)</p>
<p>STL从广义上说分为容器、算法和迭代器，容器和算法通过迭代器无缝链接</p>
<p>STL大体分为6大组件：容器、算法、迭代器、仿函数、适配器（配接器）、空间配置器</p>
<h4 id="1、容器"><a href="#1、容器" class="headerlink" title="1、容器"></a>1、容器</h4><h5 id="1-1-容器的基本使用"><a href="#1-1-容器的基本使用" class="headerlink" title="1.1 容器的基本使用"></a>1.1 容器的基本使用</h5><p>vector是STL中最常见的容器，可以理解为数组</p>
<p>为了对vector实现插入和遍历的操作需要知道：</p>
<p>容器: <code>vector</code></p>
<p>算法：<code>for_each</code></p>
<p>迭代器：<code>vector&lt;int&gt; :: iterator</code></p>
<p>利用vector容器存储默认的数据类型：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span>;<span class="comment">//要包含vector头文件</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span>;<span class="comment">//使用STL自带算法就要包含这个头文件，被成为便准算法头文件</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;<span class="comment">//一定要有这一句</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span><span class="comment">//使用for_each必须要传入一个函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//定义a，类型为int，一共10个元素，均为1</span></span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">10</span>,<span class="number">1</span>)</span></span>;</span><br><span class="line">	<span class="comment">//利用a来定义b</span></span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">b</span><span class="params">(a)</span></span>;</span><br><span class="line">	<span class="comment">//利用b来定义c，不过是利用的b的第0个元素到第2个元素（共3个）</span></span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">c</span><span class="params">(b.begin(), b.begin() + <span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="comment">//利用普通数组来定义e，注意不能直接vector&lt;int&gt; e(d);</span></span><br><span class="line">	<span class="type">int</span> d[<span class="number">4</span>] = &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">e</span><span class="params">(d,d+<span class="number">4</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//通过遍历改变a原来的值</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		a.<span class="built_in">push_back</span>(i);<span class="comment">//puch_back()是在后面加值，超过了会自动扩展</span></span><br><span class="line">		cout &lt;&lt; a.<span class="built_in">size</span>() &lt;&lt; endl;<span class="comment">//分别是11-20</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//通过迭代器来查看a中的值</span></span><br><span class="line">    <span class="comment">//定义起始迭代器,相当于一个指针，指向a的第一个元素</span></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;::iterator itBegin = a.<span class="built_in">begin</span>();</span><br><span class="line">	<span class="comment">//定义结束迭代器，相当于一个指向a的最后一个元素的下一个位置的指针，所以对a.end()取值是无意义的</span></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;::iterator itEnd = a.<span class="built_in">end</span>();</span><br><span class="line">	<span class="keyword">while</span> (itBegin != itEnd)<span class="comment">//1.使用while循环遍历</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; *itBegin &lt;&lt; endl;</span><br><span class="line">		itBegin++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.利用for循环遍历，更加简洁</span></span><br><span class="line">	<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = b.<span class="built_in">begin</span>(); it != b.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.使用STL自带的for_each()算法来遍历</span></span><br><span class="line">	<span class="comment">//需要传入待遍历的向量的起始和操作函数的函数名，没有（）</span></span><br><span class="line">	for_each(c.<span class="built_in">begin</span>(), c.<span class="built_in">end</span>(), printVector);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>利用vector容器存储 <strong>自定义的数据类型</strong> ：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span>;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:	</span><br><span class="line">        <span class="built_in">Person</span>(string name,<span class="type">int</span> age)	</span><br><span class="line">        &#123;		</span><br><span class="line">            <span class="keyword">this</span>-&gt;m_age = age;		</span><br><span class="line">            <span class="keyword">this</span>-&gt;m_name = name;	</span><br><span class="line">        &#125;	</span><br><span class="line">        string m_name;	</span><br><span class="line">        <span class="type">int</span> m_age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">    vector&lt;Person*&gt; p_array;	</span><br><span class="line">    <span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aa&quot;</span>, <span class="number">10</span>)</span></span>;	</span><br><span class="line">    <span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bb&quot;</span>, <span class="number">20</span>)</span></span>;	</span><br><span class="line">    p_array.<span class="built_in">push_back</span>(&amp;p1);	</span><br><span class="line">    p_array.<span class="built_in">push_back</span>(&amp;p2);	</span><br><span class="line">    <span class="comment">//利用自带的算法遍历	</span></span><br><span class="line">    <span class="keyword">for</span> (vector&lt;Person*&gt;::iterator it = p_array.<span class="built_in">begin</span>(); it != p_array.<span class="built_in">end</span>(); it++)	</span><br><span class="line">    &#123;		</span><br><span class="line">        cout &lt;&lt; (*(*it)).m_name &lt;&lt; endl;		</span><br><span class="line">        cout &lt;&lt; (*it)-&gt;m_name &lt;&lt; endl;	<span class="comment">//用箭头拿到对象对应的值也行，此处*it出来的是个指针</span></span><br><span class="line">    &#125;&#125;  	</span><br></pre></td></tr></table></figure>

<p>vector容器中<strong>嵌套</strong>vector容器：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;vv;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	<span class="type">int</span> a=<span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> b=<span class="number">1</span>;</span><br><span class="line">	v1.<span class="built_in">push_back</span>(a);</span><br><span class="line">	v2.<span class="built_in">push_back</span>(b);</span><br><span class="line">	vv.<span class="built_in">push_back</span>(v1);</span><br><span class="line">	vv.<span class="built_in">push_back</span>(v2);</span><br><span class="line">    <span class="comment">//第一层</span></span><br><span class="line">	<span class="keyword">for</span> (vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;::iterator it = vv.<span class="built_in">begin</span>(); it != vv.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">//第二层，此时*it就是v1或v2</span></span><br><span class="line">		<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it1 = (*it).<span class="built_in">begin</span>(); it1 != (*it).<span class="built_in">end</span>(); it1++)</span><br><span class="line">			cout &lt;&lt; *it1 &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="1-2-常见的容器"><a href="#1-2-常见的容器" class="headerlink" title="1.2 常见的容器"></a>1.2 常见的容器</h5><h6 id="1-2-1-string"><a href="#1-2-1-string" class="headerlink" title="1.2.1 string"></a>1.2.1 string</h6><h6 id="1-2-2-vector"><a href="#1-2-2-vector" class="headerlink" title="1.2.2 vector"></a>1.2.2 vector</h6><p>vector与一般的数组不同，它的大小不是固定的而是可以动态扩展的</p>
<p>vector的构造函数：各种复制方法</p>
<p>vector的容量和大小：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">       <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">10</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="comment">//判断是否为空</span></span><br><span class="line">v1.<span class="built_in">empty</span>();</span><br><span class="line"><span class="comment">//检查容量</span></span><br><span class="line">v1.<span class="built_in">capacity</span>();</span><br><span class="line"><span class="comment">//查看已存放了多少元素</span></span><br><span class="line">v1.<span class="built_in">size</span>();</span><br><span class="line"><span class="comment">//重新指定大小,如果增大，用给定的值填充新增的</span></span><br><span class="line"><span class="comment">//如果变小直接去掉多余的，但是容量capacity并不会变</span></span><br><span class="line">v1.<span class="built_in">resize</span>(<span class="number">10</span>,<span class="number">2</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>vector的插入和删除：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">       <span class="comment">//在最后面直接插入一个元素</span></span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//直接删除最后的一个元素</span></span><br><span class="line">v1.<span class="built_in">pop_back</span>();</span><br><span class="line"><span class="comment">//利用迭代器在任意位置插入指定个数个元素，默认是1个</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = v1.<span class="built_in">begin</span>();</span><br><span class="line">v1.<span class="built_in">insert</span>(it, <span class="number">3</span>,<span class="number">4</span>);<span class="comment">//在开头插入3个4</span></span><br><span class="line"><span class="comment">//利用迭代器删除任意位置的元素</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it2 = --v1.<span class="built_in">end</span>();</span><br><span class="line">v1.<span class="built_in">erase</span>(it2);<span class="comment">//删除的最后一个元素,v1.end()指向的是v1的最后一个的下一个</span></span><br><span class="line">v1.<span class="built_in">erase</span>(v1.<span class="built_in">begin</span>(), --v1.<span class="built_in">end</span>());<span class="comment">//清空v1除了最后一个之外所有的元素</span></span><br><span class="line"><span class="comment">//直接清空</span></span><br><span class="line">v1.<span class="built_in">clear</span>();</span><br></pre></td></tr></table></figure>

<p>vector的数据拿取：</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">       <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">10</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="comment">//利用 [ ] 直接拿</span></span><br><span class="line"><span class="type">int</span> a = v1[<span class="number">0</span>];</span><br><span class="line"><span class="comment">//利用 at 访问第i个元素</span></span><br><span class="line"><span class="type">int</span> b = v1.<span class="built_in">at</span>(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//利用 front 获取第一个元素</span></span><br><span class="line"><span class="type">int</span> c = v1.<span class="built_in">front</span>();</span><br><span class="line"><span class="comment">//利用 back 获取最后一个元素</span></span><br><span class="line"><span class="type">int</span> d = v1.<span class="built_in">back</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>vector容器互换所有数据</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">       <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">10</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v2</span><span class="params">(<span class="number">10</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line">v1.<span class="built_in">swap</span>(v1);  <span class="comment">// v1与v2内容互换</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">       <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">10000</span>, <span class="number">1</span>)</span></span>;<span class="comment">//v1的size是10000，capacity也是10000</span></span><br><span class="line"><span class="comment">//利用swap可以有效的减少空间浪费</span></span><br><span class="line">v1.<span class="built_in">resize</span>(<span class="number">3</span>);<span class="comment">//现在v1的size是3，但capacity仍然是10000</span></span><br><span class="line"><span class="comment">//利用v1定义一个匿名的vector的对象由于是利用v1进行的初始化</span></span><br><span class="line"><span class="comment">//所以该匿名对象的size和capacity都是3(初始化不会把capacity带过来)</span></span><br><span class="line"><span class="comment">// 用swap将原来的v1交换过来，由于swap只交换元素所以新的v1.capacity()只有3</span></span><br><span class="line"><span class="comment">//匿名对象运行结束后会自动删除回收</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(v1).<span class="built_in">swap</span>(v1);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1.capacity(): &quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>();</span><br></pre></td></tr></table></figure>

<p>vector预留空间：</p>
<p>可以自定义预留空间的大小，减少动态扩展的次数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">10</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;reserve之前v1.capacity=&quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>() &lt;&lt; endl;;</span><br><span class="line"><span class="comment">//利用reserve定义预留空间</span></span><br><span class="line">v1.<span class="built_in">reserve</span>(<span class="number">10000</span>);<span class="comment">//v1在10个1之后还有10000个空间，但是不能初始化也不能访问</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;reserve之后v1.capacity=&quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>() &lt;&lt; endl;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="1-2-3-deque"><a href="#1-2-3-deque" class="headerlink" title="1.2.3 deque"></a>1.2.3 deque</h6><p>双端数组，两头都能插入和删除数据，各种操作基本与vector相同</p>
<p>主要的不同就是头插和头删：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//头插</span></span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">11</span>);</span><br><span class="line"><span class="comment">//头删</span></span><br><span class="line">d.<span class="built_in">pop_front</span>();</span><br></pre></td></tr></table></figure>



<p>deque的基本使用：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;deque&gt;</span>;<span class="comment">//要包含deque头文件</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span>;<span class="comment">//使用STL自带算法就要包含这个头文件，被成为便准算法头文件</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;<span class="comment">//一定要有这一句</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt; d1)</span> <span class="comment">//const 只读</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//const_iterator 只读迭代器</span></span><br><span class="line">	<span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d1.<span class="built_in">begin</span>(); it != d1.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test05</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		d.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printDeque</span>(d);</span><br><span class="line">        <span class="comment">//头插</span></span><br><span class="line">	d.<span class="built_in">push_front</span>(<span class="number">11</span>);</span><br><span class="line">	<span class="comment">//头删</span></span><br><span class="line">	d.<span class="built_in">pop_front</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">test05</span>();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="常见容器—-vector-deque-案例"><a href="#常见容器—-vector-deque-案例" class="headerlink" title="常见容器—-vector deque 案例"></a>常见容器—-vector deque 案例</h6><p>利用vector和deque容器</p>
<p>5个人，10个评委打分，去掉最高和最低分求平均值</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;deque&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;string&quot;</span>;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> score, string name)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_score = score;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> m_score;</span><br><span class="line">	string m_name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建5个人且都存到vector容器中去</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createPerson</span><span class="params">(vector&lt;Person&gt;&amp; all_person)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	string nameSeed = <span class="string">&quot;ABCDE&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i ++ )</span><br><span class="line">	&#123;</span><br><span class="line">		string name = <span class="string">&quot;person&quot;</span>;</span><br><span class="line">		name = name + nameSeed[i];</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line">		<span class="function">Person <span class="title">p</span><span class="params">(score, name)</span></span>;</span><br><span class="line">		all_person.<span class="built_in">push_back</span>(p);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//给每个人打分，分数放到deque容器中，但是只把最终结果给person中的score</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setScores</span><span class="params">(vector&lt;Person&gt;&amp; all_person)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = all_person.<span class="built_in">begin</span>(); it != all_person.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		deque&lt;<span class="type">int</span>&gt; all_score;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> score = <span class="built_in">rand</span>() % <span class="number">40</span> + <span class="number">60</span>; <span class="comment">//随机整数40~100</span></span><br><span class="line">			all_score.<span class="built_in">push_back</span>(score);				</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;选手：&quot;</span> &lt;&lt; (*it).m_name &lt;&lt; <span class="string">&quot;具体得分： &quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">for</span>(deque&lt;<span class="type">int</span>&gt;::iterator d_it = all_score.<span class="built_in">begin</span>();d_it!=all_score.<span class="built_in">end</span>();d_it++)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; *d_it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//对每一位选手的所有得分进行排序以删除最高最低分</span></span><br><span class="line">		<span class="built_in">sort</span>(all_score.<span class="built_in">begin</span>(), all_score.<span class="built_in">end</span>());<span class="comment">//sort可以对deque模板区间内内容默认升序排列</span></span><br><span class="line">		all_score.<span class="built_in">pop_front</span>(); <span class="comment">//掐头</span></span><br><span class="line">		all_score.<span class="built_in">pop_back</span>();  <span class="comment">//去尾</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//求平均分</span></span><br><span class="line">		<span class="type">int</span> sum_score = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::iterator d_it = all_score.<span class="built_in">begin</span>(); d_it != all_score.<span class="built_in">end</span>(); d_it++)</span><br><span class="line">		&#123;</span><br><span class="line">			sum_score += *d_it;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> average_score = sum_score/<span class="number">10</span>;</span><br><span class="line">		(*it).m_score = average_score;<span class="comment">//将最终得分赋给选手</span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;选手：&quot;</span> &lt;&lt; (*it).m_name &lt;&lt; <span class="string">&quot;最后得分： &quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; (*it).m_score &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//创建5个人</span></span><br><span class="line">	vector&lt;Person&gt; all_person;</span><br><span class="line">	<span class="built_in">createPerson</span>(all_person);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//打分并显示得分</span></span><br><span class="line">	<span class="built_in">setScores</span>(all_person);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="1-2-4-stack"><a href="#1-2-4-stack" class="headerlink" title="1.2.4 stack"></a>1.2.4 stack</h6><p>栈容器，先进后出 ( <strong>出就是删除</strong> ) ，只有一个口子用来进出，不允许遍历</p>
<p>基本操作：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stack&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;string&quot;</span>;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">	s.<span class="built_in">push</span>(<span class="number">1</span>);        <span class="comment">//进栈</span></span><br><span class="line">	s.<span class="built_in">push</span>(<span class="number">2</span>);        <span class="comment">//进栈</span></span><br><span class="line">	<span class="type">int</span> s_top = s.<span class="built_in">top</span>();  <span class="comment">//s_top为2</span></span><br><span class="line">	s.<span class="built_in">pop</span>();  <span class="comment">//删除2</span></span><br><span class="line">	<span class="type">bool</span> is_empty = s.<span class="built_in">empty</span>();  <span class="comment">//如果空，返回Ture</span></span><br><span class="line">	<span class="type">int</span> s_size = s.<span class="built_in">size</span>();  <span class="comment">//只剩一个元素了</span></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="1-2-5-queue"><a href="#1-2-5-queue" class="headerlink" title="1.2.5 queue"></a>1.2.5 queue</h6><p>队列容器，先进先出，但是队头和队尾的元素都可以被访问到，由于只有队头和队尾可以被使用，因此不可以遍历</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;queue&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;string&quot;</span>;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">	q.<span class="built_in">push</span>(<span class="number">10</span>);</span><br><span class="line">	q.<span class="built_in">push</span>(<span class="number">20</span>);</span><br><span class="line">	q.<span class="built_in">push</span>(<span class="number">30</span>);</span><br><span class="line">	<span class="type">int</span> q_front = q.<span class="built_in">front</span>();  <span class="comment">//q_front 是排在最前面的10</span></span><br><span class="line">	<span class="type">int</span> q_back = q.<span class="built_in">back</span>();  <span class="comment">//q_back 是排在最后面的30</span></span><br><span class="line">	q.<span class="built_in">pop</span>();    <span class="comment">//删除的是最前面的10</span></span><br><span class="line">	q.<span class="built_in">empty</span>();  <span class="comment">//判断是否为空</span></span><br><span class="line">	q.<span class="built_in">size</span>();   <span class="comment">//判断大小</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="1-2-6-list"><a href="#1-2-6-list" class="headerlink" title="1.2.6 list"></a>1.2.6 list</h6><p>链表，由结点构成，结点由数据和指针组成。链表可以快速的在任意位置添加和删除元素，但是由于数据是分散的存储在内存中的导致遍历的速度没有数组快且占用空间比数组大</p>
<p>STL的list比较特殊，是一个双向的循环链表，每一个结点除了记录下一个结点的地址外还记录了上一个结点的地址，是一个 <strong>双向链表</strong>，而且第一个和最后一个结点互指，而不是指向null</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;string&quot;</span>;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// 给sort()用的比较函数</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 降序 V1&gt;V2</span></span><br><span class="line">	<span class="comment">// 升序 V1&lt;V2</span></span><br><span class="line">	<span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//list的各种操作几乎都与Vector相同，见1.2.2vector</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	list&lt;<span class="type">int</span>&gt; l;</span><br><span class="line">	l.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">	l.<span class="built_in">push_back</span>(<span class="number">20</span>);  <span class="comment">//list的赋值构造与vector基本一样</span></span><br><span class="line">	l.<span class="built_in">push_front</span>(<span class="number">50</span>); </span><br><span class="line">	l.<span class="built_in">insert</span>(l.<span class="built_in">begin</span>(),<span class="number">1</span>);  <span class="comment">//利用迭代器在任意位置插入</span></span><br><span class="line">	l.<span class="built_in">erase</span>(l.<span class="built_in">end</span>()); <span class="comment">//利用迭代器删除任意位置的元素</span></span><br><span class="line">	l.<span class="built_in">remove</span>(<span class="number">10</span>); <span class="comment">//删除l中所有为10的元素，这是list独有的操作</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 元素的访问</span></span><br><span class="line">	<span class="comment">// 不能用 l.at(1),或者l[0]的方式访问，因为这本质上属于随机访问</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//遍历方式与vector相同，但是，it只能++或--（双向），不能写成it = it+1,it=it+3,因为这也是跳着走了</span></span><br><span class="line">	<span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::iterator it = l.<span class="built_in">begin</span>(); it != l.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; (*it) &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	list&lt;<span class="type">int</span>&gt; l2;</span><br><span class="line">	l2.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">	l2.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">	l.<span class="built_in">swap</span>(l2); <span class="comment">//元素交换与vector相同</span></span><br><span class="line">	</span><br><span class="line">	l.<span class="built_in">reverse</span>();  <span class="comment">// 反转</span></span><br><span class="line">	<span class="comment">//排序</span></span><br><span class="line">	<span class="comment">//由于链表中的元素不可以随机访问，所以直接sort(l.begin(),l.end())是不行的</span></span><br><span class="line">	<span class="comment">//对于不支持随机访问的容器，不可以用标准算法，比如sort</span></span><br><span class="line">	<span class="comment">//但是这种容器一般有自己内部的排序等算法</span></span><br><span class="line">	l.<span class="built_in">sort</span>();  <span class="comment">//默认由小到大   </span></span><br><span class="line">        <span class="comment">//如果要降序排列</span></span><br><span class="line">        l.<span class="built_in">sort</span>(myCompare);  <span class="comment">// 加入比较器，也就是个返回布尔值的函数</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="排序—-list-案例"><a href="#排序—-list-案例" class="headerlink" title="排序—-list 案例"></a>排序—-list 案例</h6><p>案例描述：</p>
<p>​              将Person自定义数据类型进行排序</p>
<p>​               Person中属性：姓名、年龄、身高</p>
<p>​              排序规则：按照年龄进行升序，如果年龄相同按照身高进行降序</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;string&quot;</span>;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hero</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Hero</span>(string name, <span class="type">int</span> age, <span class="type">int</span> height)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_age = age;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_height = height;</span><br><span class="line">	&#125;</span><br><span class="line">	string m_name;</span><br><span class="line">	<span class="type">int</span> m_age;</span><br><span class="line">	<span class="type">int</span> m_height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义排序标准</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompareHero</span><span class="params">(Hero &amp;h1, Hero &amp;h2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (h1.m_age != h2.m_age)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> h1.m_age &lt; h2.m_age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> h1.m_height &gt; h2.m_height;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test09</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	list&lt;Hero&gt; l;</span><br><span class="line">	<span class="function">Hero <span class="title">h1</span><span class="params">(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">15</span>, <span class="number">170</span>)</span></span>;</span><br><span class="line">	<span class="function">Hero <span class="title">h2</span><span class="params">(<span class="string">&quot;lisi&quot;</span>, <span class="number">15</span>, <span class="number">169</span>)</span></span>;</span><br><span class="line">	<span class="function">Hero <span class="title">h3</span><span class="params">(<span class="string">&quot;wanger&quot;</span>, <span class="number">16</span>, <span class="number">170</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	l.<span class="built_in">push_back</span>(h1);</span><br><span class="line">	l.<span class="built_in">push_back</span>(h2);</span><br><span class="line">	l.<span class="built_in">push_back</span>(h3);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;排序前：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (list&lt;Hero&gt;::iterator it = l.<span class="built_in">begin</span>(); it != l.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;姓名; &quot;</span> &lt;&lt; it-&gt;m_name &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; it-&gt;m_age &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; <span class="string">&quot;身高：&quot;</span> &lt;&lt; it-&gt;m_height &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;-------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 自定义数据类型的排序一定要自定义排序规则，具体怎么指定就需要写比较函数了</span></span><br><span class="line"></span><br><span class="line">	l.<span class="built_in">sort</span>(myCompareHero);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;排序后：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (list&lt;Hero&gt;::iterator it = l.<span class="built_in">begin</span>(); it != l.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;姓名; &quot;</span> &lt;&lt; it-&gt;m_name &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; it-&gt;m_age &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; <span class="string">&quot;身高：&quot;</span> &lt;&lt; it-&gt;m_height &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">test09</span>();</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="1-2-7-set-multiset"><a href="#1-2-7-set-multiset" class="headerlink" title="1.2.7 set / multiset"></a>1.2.7 set / multiset</h6><p>所有元素在插入时会自动排序</p>
<p>set与multiset都是关联式容器，底层代码是二叉树</p>
<p><strong>注意</strong> ：set不允许有重复的元素，但是multiset允许   </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;set&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;string&quot;</span>;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// set容器的基本使用</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test10</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	set&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">    </span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">10</span>);  <span class="comment">// set只能insert的方式插入数据，因为会自动升序排序</span></span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">90</span>);</span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">8</span>);</span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">10</span>);  <span class="comment">// 已经有10了，不会再插入这个10</span></span><br><span class="line">	s.<span class="built_in">erase</span>(<span class="number">10</span>);   <span class="comment">// 删除10</span></span><br><span class="line">	s.<span class="built_in">erase</span>(s.<span class="built_in">begin</span>()); <span class="comment">// 利用迭代器删除第一个元素</span></span><br><span class="line">	<span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	s.<span class="built_in">find</span>(<span class="number">90</span>); <span class="comment">// 查找90这个数，如果有就返回这个值的迭代器，若没有则返回s.end()</span></span><br><span class="line">	s.<span class="built_in">count</span>(<span class="number">90</span>);  <span class="comment">// 返回s中90的个数，对于set容器而言要么是1要么是0</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// set容器insert后会返回是否插入成功的信息，但是multiset没有</span></span><br><span class="line">	<span class="comment">//返回的值的类型是pair队组，里面的bool值可以通过ret.second取到</span></span><br><span class="line">	pair&lt;set&lt;<span class="type">int</span>&gt; ::iterator, <span class="type">bool</span>&gt; ret = s.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">	<span class="keyword">if</span> (ret.second == <span class="literal">false</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;插入失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;插入成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">test10</span>();</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <strong>pair 对组</strong>  </p>
<p>成对出现的数据，利用队组可以一下接受两个数据</p>
<p>创建方式：</p>
<p><code>pair&lt;type, type&gt; p(value, value);</code></p>
<p><code>pair&lt;type, type&gt; p = make_pair(value, value);</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span>;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;string&quot;</span>;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 队组的使用</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">pair&lt;string, <span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;Tom&quot;</span>,<span class="number">18</span>)</span></span>;</span><br><span class="line">	pair&lt;string, <span class="type">int</span>&gt; p2 = <span class="built_in">make_pair</span>(<span class="string">&quot;Jerry&quot;</span>,<span class="number">19</span>);</span><br><span class="line">	cout &lt;&lt; p1.first &lt;&lt; endl;  <span class="comment">// 通过first和second来使用这两个数</span></span><br><span class="line">	cout &lt;&lt; p2.second &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>set容器的排序</strong> </p>
<p>set默认从小到大的排序，利用仿函数可以改变排序规则</p>
<p>仿函数：定义一个类但是重载他的（）运算符让他看起来像个函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;string&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义仿函数</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myCompare</span>  <span class="comment">//这个是仿函数，所以以函数方式命名</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> <span class="type">const</span> <span class="comment">// vs2019后仿函数要加const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// set容器的基本使用</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test11</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 通过仿函数指定从大到小的排序</span></span><br><span class="line">	set&lt;<span class="type">int</span>,myCompare&gt; s;<span class="comment">//</span></span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">10</span>);  <span class="comment">// set只能insert的方式插入数据，因为会自动升序排序</span></span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">90</span>);</span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">8</span>);</span><br><span class="line">	s.<span class="built_in">insert</span>(<span class="number">10</span>);  <span class="comment">// 已经有10了，不会再插入这个10</span></span><br><span class="line">	<span class="comment">// 注意此时遍历容器变了，是set&lt;int,myCompare&gt;</span></span><br><span class="line">	<span class="keyword">for</span> (set&lt;<span class="type">int</span>, myCompare&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">test11</span>();</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>set插入自定义数据类型</strong></p>
<p>由于set每插一个数据就要排序，因此对于自定义的数据类型如果不事先指名排序规则，set容器压根就无法使用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;string&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义数据类型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hero</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Hero</span>(<span class="type">int</span> age,string name)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_age = age;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> m_age;</span><br><span class="line">	string m_name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义仿函数用来比较自定义类型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Herocompare</span>  <span class="comment">//这个是仿函数，所以以函数方式命名</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Hero &amp;h1,<span class="type">const</span> Hero &amp;h2)</span> <span class="type">const</span> <span class="comment">// vs2019后仿函数要加const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">// 按照age降序</span></span><br><span class="line">		<span class="keyword">return</span> h1.m_age &gt; h2.m_age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// set容器的基本使用</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test11</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 通过仿函数指定从大到小的排序</span></span><br><span class="line">	set&lt;Hero,Herocompare&gt; s;<span class="comment">//</span></span><br><span class="line">	<span class="function">Hero <span class="title">h1</span><span class="params">(<span class="number">10</span>,<span class="string">&quot;zhangsan&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">Hero <span class="title">h2</span><span class="params">(<span class="number">20</span>, <span class="string">&quot;lisi&quot;</span>)</span></span>;</span><br><span class="line">	s.<span class="built_in">insert</span>(h1);</span><br><span class="line">	s.<span class="built_in">insert</span>(h2);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 注意此时遍历容器变了，是set&lt;int,myCompare&gt;</span></span><br><span class="line">	<span class="keyword">for</span> (set&lt;Hero, Herocompare &gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; (*it).m_name &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout &lt;&lt; (*it).m_age &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">test11</span>();</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="1-2-8-map-multimap"><a href="#1-2-8-map-multimap" class="headerlink" title="1.2.8 map / multimap"></a>1.2.8 map / multimap</h6><p>map中所有的元素都是pair，都是成对出现的</p>
<p>map中第一个元素为key（键），第二个元素为值（value）</p>
<p>所有元素都会根据键自动排序</p>
<p>map不允许key重复，multimap允许key重复  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;string&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// map容器</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test11</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 创建map容器</span></span><br><span class="line">	map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; m;</span><br><span class="line">	<span class="comment">// 元素以pair的形式插入map容器中</span></span><br><span class="line">	<span class="comment">// 注意数据类型对应</span></span><br><span class="line">	m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>,<span class="type">int</span>&gt;(<span class="number">0</span>,<span class="number">10</span>));</span><br><span class="line">	m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">20</span>));</span><br><span class="line">	<span class="comment">// 遍历输出所有的key和value</span></span><br><span class="line">	<span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// map的查找和统计与set相同，不过查找的是key不是value</span></span><br><span class="line">	<span class="comment">// map的自定义排序也是与set相同</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 根据键查找值并返回</span></span><br><span class="line">	<span class="type">int</span> a = m[<span class="number">0</span>];</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">test11</span>();</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="员工分组—–案例"><a href="#员工分组—–案例" class="headerlink" title="员工分组—–案例"></a>员工分组—–案例</h6><p><strong>要求：</strong></p>
<p>10个员工(ABCDEFGH))，指派员工在哪个部门工作；</p>
<p>员工信息有：姓名、工资、组成部门分为：策划、美术、研发</p>
<p>随机给10名员工分配部门和工资；</p>
<p>通过multimap进行信息的插入key(部门编号) value(员工);</p>
<p>分部门显示员工信息</p>
<p><strong>实现方式：</strong></p>
<p>创建10名员工，放到vector中<br>遍历vector容器，取出每个员工，进行随机分组<br>分组后，将员工部门编号作为key，具体员工作为value，放入到multimap容器中分部门显示员工信息</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;string&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义三个部门和对应的编号</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CEHUA 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MEISHU 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> YANFA 2</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Worker</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// 没有构造函数，创建后再赋值</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	string m_name;</span><br><span class="line">	<span class="type">int</span> m_salary;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// map容器</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createWorkers</span><span class="params">(vector&lt;Worker&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 创建10个员工</span></span><br><span class="line">	string name_seed = <span class="string">&quot;ABCDEFGHIJ&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		Worker worker;</span><br><span class="line">		worker.m_name = <span class="string">&quot;员工&quot;</span>;  <span class="comment">// 不能直接&quot;员工&quot;+name_seed[i]</span></span><br><span class="line">		worker.m_name += name_seed[i];</span><br><span class="line">		worker.m_salary = <span class="built_in">rand</span>() % <span class="number">10000</span> + <span class="number">10000</span>; <span class="comment">// 随机数 10000~19999</span></span><br><span class="line">		v.<span class="built_in">push_back</span>(worker);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setGroup</span><span class="params">(multimap&lt;<span class="type">int</span>, Worker&gt;&amp; m, vector&lt;Worker&gt; v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (vector&lt;Worker&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 随机产生部门的编号</span></span><br><span class="line">		<span class="type">int</span> dep_id = <span class="built_in">rand</span>() % <span class="number">3</span>; <span class="comment">// 0 1 2</span></span><br><span class="line">		<span class="comment">// 依据编号对员工进行分组，其实就是直接插入，会直接根据dep_id进行排序</span></span><br><span class="line">		m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(dep_id, *it));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showWorkersByGroup</span><span class="params">(multimap&lt;<span class="type">int</span>, Worker&gt; m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;策划部门: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">// 注意for循环第二项为真才会循环，一定要将是否end()的判断放在(*it).first == CEHUA的前面防止溢出</span></span><br><span class="line">	<span class="keyword">for</span> (multimap&lt;<span class="type">int</span>, Worker&gt;::iterator it = m.<span class="built_in">find</span>(CEHUA);  it != m.<span class="built_in">end</span>() &amp;&amp; (*it).first == CEHUA; it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; (it-&gt;second).m_name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;工资：&quot;</span> &lt;&lt; (it-&gt;second).m_salary &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;美术部门: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (multimap&lt;<span class="type">int</span>, Worker&gt;::iterator it = m.<span class="built_in">find</span>(MEISHU); it != m.<span class="built_in">end</span>() &amp;&amp; (*it).first == MEISHU ; it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; (it-&gt;second).m_name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;工资：&quot;</span> &lt;&lt; (it-&gt;second).m_salary &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;研发部门: &quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (multimap&lt;<span class="type">int</span>, Worker&gt;::iterator it = m.<span class="built_in">find</span>(YANFA); it != m.<span class="built_in">end</span>()&amp;&amp;(*it).first == YANFA; it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; (it-&gt;second).m_name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;工资：&quot;</span> &lt;&lt; (it-&gt;second).m_salary &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 生成10个员工并放到vector中</span></span><br><span class="line">	vector&lt;Worker&gt; vec_workers;</span><br><span class="line">	<span class="built_in">createWorkers</span>(vec_workers);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 对这10个员工编号并分组</span></span><br><span class="line">	multimap&lt;<span class="type">int</span>, Worker&gt; mul_workers;</span><br><span class="line">	<span class="built_in">setGroup</span>(mul_workers,vec_workers);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 测试员工是否生成</span></span><br><span class="line">	<span class="comment">//for (vector&lt;Worker&gt;::iterator it = vec_workers.begin(); it != vec_workers.end(); it++)</span></span><br><span class="line">	<span class="comment">//&#123;</span></span><br><span class="line">	<span class="comment">//	cout &lt;&lt; it-&gt;m_name &lt;&lt; endl;</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">showWorkersByGroup</span>(mul_workers);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、函数对象"><a href="#2、函数对象" class="headerlink" title="2、函数对象"></a>2、函数对象</h4><h5 id="2-1-函数对象的基本性质"><a href="#2-1-函数对象的基本性质" class="headerlink" title="2.1 函数对象的基本性质"></a>2.1 函数对象的基本性质</h5><p>函数对象，也就是仿函数，是重载了（）操作符的类，因为调用方式与函数相同所以被称为仿函数</p>
<p>本质上，<strong>函数对象（仿函数）是一个类</strong> 而不是一个函数</p>
<p>仿函数的性质：</p>
<p>​     函数对象在使用时，可以像普通函数那样调用，可以有参数，可以有返回值；</p>
<p>​     函数对象超出普通函数的概念，函数对象可以有自己的状态；</p>
<p>​     函数对象可以作为参数传递；</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自己定义一个加法运算的操作</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Myadd</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Myadd</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;count = <span class="number">0</span>; <span class="comment">// 创建时初始状态为0</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 重载（）运算符，看起来就像是函数的调用</span></span><br><span class="line">	<span class="comment">// 第一个()是被重载的操作符，第二个()是用来传入参数的</span></span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		count++; <span class="comment">// 每调用一次技术变量加1</span></span><br><span class="line">		<span class="keyword">return</span> v1 + v2;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> count;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 仿函数可以作为参数传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doMyadd</span><span class="params">(Myadd &amp;m, <span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">m</span>(a, b) &lt;&lt; endl;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Myadd m;</span><br><span class="line">	<span class="comment">// 仿函数在使用时可以像普通函数那样调用</span></span><br><span class="line">	<span class="comment">// 可以有参数，可以有返回值</span></span><br><span class="line">	<span class="type">int</span> b = <span class="built_in">m</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">	<span class="type">int</span> c = <span class="built_in">m</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 有自己的状态意味着可以记录一些属于自己的性质</span></span><br><span class="line">	<span class="comment">// 此处记录的是自己被调用了几次</span></span><br><span class="line">	cout &lt;&lt; m.count &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 仿函数可以作为参数传递</span></span><br><span class="line">	<span class="built_in">doMyadd</span>(m, b, c);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-2-谓词（Pred）"><a href="#2-2-谓词（Pred）" class="headerlink" title="2.2 谓词（Pred）"></a>2.2 谓词（Pred）</h5><p>谓词：返回值是bool类型的仿函数称为谓词</p>
<p>谓词的（）接受一个参数的称为一元谓词，接受两个参数的成为二元谓词</p>
<p><strong>一元谓词的使用：</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一元谓词，find_if算法的需要</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BiggerFive</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val &gt; <span class="number">5</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// find_if算法需要一元谓词</span></span><br><span class="line">	<span class="comment">// find_if返回的是迭代器</span></span><br><span class="line">      <span class="comment">// BiggerFive()是一个匿名对象，正常应该是定义一个BiggerFive的对象然后放在这里</span></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">BiggerFive</span>());</span><br><span class="line">	<span class="keyword">if</span> (it == v.<span class="built_in">end</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;没有找到大于5的数&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;找到了大于5的数：&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>二元谓词：</strong></p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 二元谓词，sort排序算法的需要</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mycompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val1,<span class="type">int</span> val2)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">// 从大到小排序</span></span><br><span class="line">		<span class="keyword">return</span> val1&gt;val2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> j = <span class="built_in">rand</span>() % <span class="number">100</span>;</span><br><span class="line">		v.<span class="built_in">push_back</span>(j);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// sort默认是升序</span></span><br><span class="line">	<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>()); </span><br><span class="line">    </span><br><span class="line">	<span class="comment">// 通过添加二元谓词改为 降序</span></span><br><span class="line">	<span class="comment">// 不使用匿名对象：</span></span><br><span class="line">	Mycompare m;</span><br><span class="line">	<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), m);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用匿名对象：</span></span><br><span class="line">	<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Mycompare</span>());</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-3-内建的函数对象（仿函数）"><a href="#2-3-内建的函数对象（仿函数）" class="headerlink" title="2.3 内建的函数对象（仿函数）"></a>2.3 内建的函数对象（仿函数）</h5><p>STL自己已经建立好了一些仿函数，可以直接使用</p>
<p>内建仿函数分为：算术、逻辑、关系三类</p>
<p>使用前提：包含functional头文件</p>
<p><strong>算术仿函数</strong> </p>
<p>加、减、乘除、取模、取反</p>
<p>除了取反是一元其他都是二元</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 取反</span></span><br><span class="line">	negate&lt;<span class="type">int</span>&gt;n;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">n</span>(<span class="number">10</span>) &lt;&lt; endl;  <span class="comment">// -10</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 加法, 默认是同种数据类型操作</span></span><br><span class="line">	plus&lt;<span class="type">int</span>&gt; p;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">p</span>(<span class="number">10</span>, <span class="number">5</span>) &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>关系仿函数</strong> </p>
<p>大于、小于这些</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> j = <span class="built_in">rand</span>() % <span class="number">100</span>;</span><br><span class="line">		v.<span class="built_in">push_back</span>(j);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// sort默认是升序</span></span><br><span class="line">	<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用自带的关系仿函数 匿名对象：</span></span><br><span class="line">	<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line">	 </span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>逻辑仿函数</strong> </p>
<p>与或非这些</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">bool</span>&gt;v;</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="literal">true</span>);</span><br><span class="line">	vector&lt;<span class="type">bool</span>&gt;v2;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 利用transform算法把v搬运到v2中，且搬运过程中进行取反的操作</span></span><br><span class="line">	<span class="comment">// 使用的是匿名对象</span></span><br><span class="line">	v2.<span class="built_in">resize</span>(v.<span class="built_in">size</span>()); <span class="comment">// 搬运之前要先给空间</span></span><br><span class="line">	<span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), <span class="built_in">logical_not</span>&lt;<span class="type">bool</span>&gt;());</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3、-常见算法"><a href="#3、-常见算法" class="headerlink" title="3、 常见算法"></a>3、 常见算法</h4><p> 算法主要是由头文件  <algorithm>  <functional>  <numeric> 组成。<br><algorithm>  是所有STL头文件中最大的一个，范围涉及到比较、交换、查找、遍历操作、复制、修改等等<br><numeric>  体积很小，只包括几个在序列上面进行简单数学运算的模板函数<br><functional>  定义了一些模板类,用以声明函数对象</p>
<h5 id="3-1-常见的遍历算法"><a href="#3-1-常见的遍历算法" class="headerlink" title="3.1 常见的遍历算法"></a>3.1 常见的遍历算法</h5><p><strong>for_each</strong>  遍历</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 普通函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVal</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仿函数</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Printval</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 使用for_each遍历v，并通过指定的自定义函数进行操作</span></span><br><span class="line">	<span class="comment">// 注意放入函数名即可</span></span><br><span class="line">	for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), printVal);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt;endl;</span><br><span class="line">	<span class="comment">// 还是使用for_each函数，不过是用仿函数进行操作</span></span><br><span class="line">	for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Printval</span>());</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>transform</strong>  搬运</p>
<p>将数据从一个容器搬运到另一个容器中</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// transform与foreach不同，拿出来的每个值还要返回</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">printVal</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仿函数</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Printval</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// transform与foreach不同，拿出来的每个值还要返回</span></span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> val;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"></span><br><span class="line">	v2.<span class="built_in">resize</span>(v.<span class="built_in">size</span>());</span><br><span class="line">	<span class="comment">// 利用普通函数操作</span></span><br><span class="line">	<span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), printVal);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt;endl;</span><br><span class="line">	<span class="comment">// 用仿函数进行操作</span></span><br><span class="line">	<span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), <span class="built_in">Printval</span>());</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-2-常见的查找算法"><a href="#3-2-常见的查找算法" class="headerlink" title="3.2 常见的查找算法"></a>3.2 常见的查找算法</h5><p><strong>find</strong></p>
<p>找到了返回目标值所在的迭代器，没找到返回  end()</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Findperson</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Findperson</span>(<span class="type">int</span> score, string name)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_score = score;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> m_score;</span><br><span class="line">	string m_name;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 重载==号以便find调用</span></span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Findperson&amp;p)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">return</span> (p.m_name == <span class="keyword">this</span>-&gt;m_name &amp;&amp; p.m_score == <span class="keyword">this</span>-&gt;m_score);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// find</span></span><br><span class="line">	<span class="comment">// 对于默认类型find会自动调用==运算符判断是否相等</span></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(),<span class="number">6</span>);</span><br><span class="line">	<span class="comment">// 但是对于自定义类型则需要重载==运算符</span></span><br><span class="line">	</span><br><span class="line">	vector&lt;Findperson&gt;f;</span><br><span class="line">	<span class="function">Findperson <span class="title">f1</span><span class="params">(<span class="number">12</span>,<span class="string">&quot;zhangsan&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">Findperson <span class="title">f2</span><span class="params">(<span class="number">13</span>, <span class="string">&quot;lisi&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">Findperson <span class="title">f_compare</span><span class="params">(<span class="number">12</span>, <span class="string">&quot;zhangsan&quot;</span>)</span></span>;</span><br><span class="line">	f.<span class="built_in">push_back</span>(f1);</span><br><span class="line">	f.<span class="built_in">push_back</span>(f2);</span><br><span class="line">	vector&lt;Findperson&gt;::iterator it2 =   <span class="built_in">find</span>(f.<span class="built_in">begin</span>(), f.<span class="built_in">end</span>(), f_compare);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>adjacent_find</strong> </p>
<p>查找相邻重复元素，返回相邻元素的第一个位置的迭代器</p>
<p>既要重复也要相邻才会查找到</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">adjacent_find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">6</span>);</span><br></pre></td></tr></table></figure>



<p><strong>binary_search</strong> </p>
<p>查找指定元素是否存在，返回的是布尔值</p>
<p>二分查找法，速度非常快，但是在 <strong>无序容器中不可用</strong> （但是可以自己使数据有序后再调用也行，默认容器中的数据必须 <strong>升序</strong> ） </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// binary_search</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">binary_search</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">6</span>);</span><br></pre></td></tr></table></figure>



<p><strong>count</strong> </p>
<p>统计元素的个数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Findperson</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Findperson</span>(<span class="type">int</span> score, string name)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_score = score;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> m_score;</span><br><span class="line">	string m_name;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 重载==号以便find调用</span></span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Findperson&amp;p)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">return</span> (p.m_name == <span class="keyword">this</span>-&gt;m_name &amp;&amp; p.m_score == <span class="keyword">this</span>-&gt;m_score);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// count</span></span><br><span class="line">	<span class="comment">// 对于默认类型count会自动调用==运算符判断是否相等</span></span><br><span class="line">	<span class="type">int</span> num = <span class="built_in">count</span>(v.<span class="built_in">begin</span>(),v.<span class="built_in">end</span>(),<span class="number">0</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 但是对于自定义类型则需要重载==运算符</span></span><br><span class="line">	vector&lt;Findperson&gt;f;</span><br><span class="line">	<span class="function">Findperson <span class="title">f1</span><span class="params">(<span class="number">12</span>,<span class="string">&quot;zhangsan&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">Findperson <span class="title">f2</span><span class="params">(<span class="number">13</span>, <span class="string">&quot;lisi&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">Findperson <span class="title">f_count</span><span class="params">(<span class="number">12</span>, <span class="string">&quot;zhangsan&quot;</span>)</span></span>;</span><br><span class="line">	f.<span class="built_in">push_back</span>(f1);</span><br><span class="line">	f.<span class="built_in">push_back</span>(f2);</span><br><span class="line">	<span class="type">int</span> num2 = <span class="built_in">count</span>(f.<span class="built_in">begin</span>(), f.<span class="built_in">end</span>(), f_count);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; num2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>count_if</strong> </p>
<p>根据条件统计元素个数</p>
<p>需要谓词</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Countperson</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Countperson</span>(<span class="type">int</span> age, string name)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> m_age;</span><br><span class="line">	string m_name;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// count_if 统计内置数据类型的谓词</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greater4</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val &gt; <span class="number">4</span>; <span class="comment">//统计所有&gt;4的数</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// count_if 统计所有年龄大于2的FindPerson所有</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Older2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(Countperson p)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> p.m_age &gt; <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// count</span></span><br><span class="line">	<span class="comment">// 对于默认类型count会自动调用==运算符判断是否相等</span></span><br><span class="line">	<span class="type">int</span> num = <span class="built_in">count_if</span>(v.<span class="built_in">begin</span>(),v.<span class="built_in">end</span>(),<span class="built_in">Greater4</span>());</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 但是对于自定义类型则需要定义谓词</span></span><br><span class="line">	vector&lt;Countperson&gt;f;</span><br><span class="line">	<span class="function">Countperson <span class="title">f1</span><span class="params">(<span class="number">12</span>,<span class="string">&quot;zhangsan&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">Countperson <span class="title">f2</span><span class="params">(<span class="number">13</span>, <span class="string">&quot;lisi&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">Countperson <span class="title">f_count</span><span class="params">(<span class="number">12</span>, <span class="string">&quot;zhangsan&quot;</span>)</span></span>;</span><br><span class="line">	f.<span class="built_in">push_back</span>(f1);</span><br><span class="line">	f.<span class="built_in">push_back</span>(f2);</span><br><span class="line">	<span class="type">int</span> num2 = <span class="built_in">count_if</span>(f.<span class="built_in">begin</span>(), f.<span class="built_in">end</span>(), <span class="built_in">Older2</span>());</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; num2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-3-常用的排序算法"><a href="#3-3-常用的排序算法" class="headerlink" title="3.3 常用的排序算法"></a>3.3 常用的排序算法</h5><p><strong>sort</strong> </p>
<p>对容器内元素默认升序排序，可以自定义谓词变成降序</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Countperson</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Countperson</span>(<span class="type">int</span> age, string name)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> m_age;</span><br><span class="line">	string m_name;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用sort这种时，要用到比较运算符</span></span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> Countperson&amp; p)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> m_age &lt; p.m_age; <span class="comment">// 重载，降序</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// sort对默认数据类型进行排序的自定义仿函数</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sort_lower</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val1,<span class="type">int</span> val2)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val1 &gt; val2; <span class="comment">//统计所有&gt;4的数</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sort对自定义数据类型进行排序的自定义仿函数</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sort_lower_Countperson</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(Countperson val1, Countperson val2)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val1.m_age &gt; val2.m_age; <span class="comment">//统计所有&gt;4的数</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// sort </span></span><br><span class="line">	<span class="comment">// 默认升序排列</span></span><br><span class="line">	<span class="comment">// 内置数据类型</span></span><br><span class="line">	<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//   使用自带的关系仿函数实现降序</span></span><br><span class="line">	<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line"></span><br><span class="line">	<span class="comment">//   使用自己写的仿函数实现降序</span></span><br><span class="line">	<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Sort_lower</span>());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 自定义数据类型</span></span><br><span class="line">	vector&lt;Countperson&gt;f;</span><br><span class="line">	<span class="function">Countperson <span class="title">f1</span><span class="params">(<span class="number">12</span>,<span class="string">&quot;zhangsan&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">Countperson <span class="title">f2</span><span class="params">(<span class="number">13</span>, <span class="string">&quot;lisi&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">Countperson <span class="title">f_count</span><span class="params">(<span class="number">12</span>, <span class="string">&quot;zhangsan&quot;</span>)</span></span>;   </span><br><span class="line">	f.<span class="built_in">push_back</span>(f1);</span><br><span class="line">	f.<span class="built_in">push_back</span>(f2);</span><br><span class="line">	<span class="comment">//   默认升序，已经重构了自定义数据的&lt;运算符</span></span><br><span class="line">	<span class="built_in">sort</span>(f.<span class="built_in">begin</span>(), f.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">	<span class="comment">//   使用自定义的仿函数改为降序</span></span><br><span class="line">	<span class="built_in">sort</span>(f.<span class="built_in">begin</span>(), f.<span class="built_in">end</span>(),<span class="built_in">Sort_lower_Countperson</span>());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>random_shuffle</strong> </p>
<p>洗牌，将容器中指定部分的排序打乱</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span> <span class="comment">// 生成随机数种子</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 生成种子</span></span><br><span class="line">	<span class="built_in">srand</span>((<span class="type">unsigned</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line">	<span class="built_in">random_shuffle</span>(v.<span class="built_in">begin</span>(),v.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">	for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), printVector);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>merge</strong> </p>
<p>合并，将两个容器中的元素合并并放在第三个容器中</p>
<p>注意：被合并的两个容器都必须是有序的，合并完之后还是有序的</p>
<p>​          第三个容器一定要<strong>提前给空间</strong> ！！</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span> <span class="comment">// 生成随机数种子</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">		v2.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v_target;</span><br><span class="line">	v_target.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>() + v2.<span class="built_in">size</span>());</span><br><span class="line"></span><br><span class="line">	<span class="built_in">merge</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), v_target.<span class="built_in">begin</span>());</span><br><span class="line">	for_each(v_target.<span class="built_in">begin</span>(), v_target.<span class="built_in">end</span>(), printVector);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>reverse</strong> </p>
<p>反转指定范围内的元素</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">reverse</span>(v1.<span class="built_in">begin</span>(),v1.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">	for_each(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), printVector);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-4-常用的拷贝和替换算法"><a href="#3-4-常用的拷贝和替换算法" class="headerlink" title="3.4 常用的拷贝和替换算法"></a>3.4 常用的拷贝和替换算法</h5><p><strong>copy</strong> </p>
<p>容器指定范围内元素拷贝到另一容器中</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span> <span class="comment">// 生成随机数种子</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	<span class="comment">// 注意拷贝之前对被拷贝的函数要给空间！</span></span><br><span class="line">	v2.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>());</span><br><span class="line">	<span class="built_in">copy</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">	for_each(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), printVector);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>replace</strong> </p>
<p>将容器指定范围内的旧元素改为新元素</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span> <span class="comment">// 生成随机数种子</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 将0替换成10000</span></span><br><span class="line">	<span class="built_in">replace</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), <span class="number">0</span>, <span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">	for_each(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), printVector); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>replace_if</strong> </p>
<p>将区间内满足条件的元素替换为新的元素</p>
<p>要用到谓词</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span> <span class="comment">// 生成随机数种子</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// replace_if 要用的谓词</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greater30</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 对&gt;3的数进行替换</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val &gt; <span class="number">3</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 将大于3的数替换成10000</span></span><br><span class="line">	<span class="built_in">replace_if</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), <span class="built_in">Greater30</span>(), <span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">	for_each(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), printVector); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>swap</strong></p>
<p>互换两个容器中的元素</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span> <span class="comment">// 生成随机数种子</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">		v2.<span class="built_in">push_back</span>(i + <span class="number">100</span>);</span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 将v1,v2的元素互换</span></span><br><span class="line">	<span class="built_in">swap</span>(v1, v2);</span><br><span class="line"></span><br><span class="line">	for_each(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), printVector); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-5-常用的算数生成算法"><a href="#3-5-常用的算数生成算法" class="headerlink" title="3.5 常用的算数生成算法"></a>3.5 常用的算数生成算法</h5><p>算数生成算法属于小型算法，使用时需要包含头文件<numeric></p>
<p><strong>acumulate</strong></p>
<p>将指定范围内的元素全部加起来</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;numeric&gt;</span> <span class="comment">// 需要包含的头文件</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line"></span><br><span class="line">	&#125; </span><br><span class="line">	  </span><br><span class="line">	<span class="comment">// 第三个参数也会被加进去</span></span><br><span class="line">	<span class="type">int</span> total = <span class="built_in">accumulate</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;total = &quot;</span> &lt;&lt; total &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>fill</strong></p>
<p>填充，将容器指定区间内的数全部变成指定的值</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;numeric&gt;</span> <span class="comment">// 需要包含的头文件</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line">	v1.<span class="built_in">resize</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将v1中的所有元素一把填充为99</span></span><br><span class="line">	<span class="built_in">fill</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), <span class="number">99</span>);</span><br><span class="line"></span><br><span class="line">	for_each(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), printVector);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="3-6-常用的集合算法"><a href="#3-6-常用的集合算法" class="headerlink" title="3.6 常用的集合算法"></a>3.6 常用的集合算法</h5><p>集合，即求交、并、差</p>
<p><strong>set_intersection</strong></p>
<p>交集</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span> <span class="comment">// 生成随机数种子</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">		v2.<span class="built_in">push_back</span>(i + <span class="number">4</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; Vtarger;</span><br><span class="line">	<span class="comment">// Vtarget最大就是v1，v2中较小的那一个</span></span><br><span class="line">	Vtarger.<span class="built_in">resize</span>(<span class="built_in">min</span>(v1.<span class="built_in">size</span>(), v2.<span class="built_in">size</span>()));</span><br><span class="line">	<span class="built_in">set_intersection</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), Vtarger.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	for_each(Vtarger.<span class="built_in">begin</span>(), Vtarger.<span class="built_in">end</span>(), printVector);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>set_union</strong></p>
<p>并集</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span> <span class="comment">// 生成随机数种子</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">		v2.<span class="built_in">push_back</span>(i + <span class="number">4</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; Vtarger;</span><br><span class="line">	<span class="comment">// Vtarget最大就是v1+v2</span></span><br><span class="line">	Vtarger.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>() + v2.<span class="built_in">size</span>());</span><br><span class="line">	<span class="built_in">set_union</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), Vtarger.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	for_each(Vtarger.<span class="built_in">begin</span>(), Vtarger.<span class="built_in">end</span>(), printVector);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>set_difference</strong></p>
<p>差集</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span> <span class="comment">// 生成随机数种子</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印vector容器中的数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">		v2.<span class="built_in">push_back</span>(i + <span class="number">4</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; Vtarger;</span><br><span class="line">	<span class="comment">// Vtarget最大就是v1,v2中大的那个</span></span><br><span class="line">	Vtarger.<span class="built_in">resize</span>(<span class="built_in">max</span>(v1.<span class="built_in">size</span>(),v2.<span class="built_in">size</span>()));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 差集默认时前面的减后面的</span></span><br><span class="line">	<span class="built_in">set_difference</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), Vtarger.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	for_each(Vtarger.<span class="built_in">begin</span>(), Vtarger.<span class="built_in">end</span>(), printVector);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4、STL-案例"><a href="#4、STL-案例" class="headerlink" title="4、STL 案例"></a>4、STL 案例</h4><h5 id="4-1-案例要求"><a href="#4-1-案例要求" class="headerlink" title="4.1 案例要求"></a>4.1 案例要求</h5><p><strong>案例要求：</strong></p>
<div>            <!--块级封装-->
    <center>    <!--将图片和文字居中-->
    <img src="https://s4.ax1x.com/2022/01/10/7Ea8c4.png"
         alt="无法显示图片"
         style="zoom:90%"/>
    <br>        <!--换行-->
    比赛要求    <!--标题-->
    </center>
</div>

<p><strong>程序功能：</strong></p>
<div>            <!--块级封装-->
    <center>    <!--将图片和文字居中-->
    <img src="https://s4.ax1x.com/2022/01/10/7Ed9KJ.png"
         alt="无法显示图片"
         style="zoom:90%"/>
    <br>        <!--换行-->
    程序功能    <!--标题-->
    </center>
</div>



<h5 id="4-2-项目创建"><a href="#4-2-项目创建" class="headerlink" title="4.2  项目创建"></a>4.2  项目创建</h5><p>   自己创去</p>
<h5 id="4-3-创建管理类"><a href="#4-3-创建管理类" class="headerlink" title="4.3 创建管理类"></a>4.3 创建管理类</h5><p>功能：</p>
<p>​        提供菜单界面与用户交互</p>
<p>​        控制比赛的整体流程</p>
<p>​        文件的读写操作</p>
<p>创建SpeechManager类，用来进行具体的操作</p>
<p>speechManager.h</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建演讲的管理类（仅申明）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpeechManager</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 构造函数</span></span><br><span class="line">	<span class="built_in">SpeechManager</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 成员函数，展示菜单</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showMenu</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 析构函数</span></span><br><span class="line">	~<span class="built_in">SpeechManager</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>speechManager.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;speechManager.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// SpeechManage类中函数的实现</span></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line">SpeechManager::<span class="built_in">SpeechManager</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// showMenu的实现</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::showMenu</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;*************************************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  欢迎参加演讲比赛  ********&quot;</span>&lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  1.开始演讲比赛  ************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  2.查看往届记录  ************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  3.清空比赛记录  ************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  0.退出比赛程序  ************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;*************************************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 析构函数</span></span><br><span class="line">SpeechManager::~<span class="built_in">SpeechManager</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-4-实现退出功能"><a href="#4-4-实现退出功能" class="headerlink" title="4.4  实现退出功能"></a>4.4  实现退出功能</h5><p>在speechManager.h中声明quit()函数，在speechManager.cpp中实现，使用exit(0)来退出</p>
<p>更该改 演讲比赛流程管理系统.cpp 实现主循环：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;speechManager.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	SpeechManager sp;</span><br><span class="line">	<span class="type">int</span> choice = <span class="number">-1</span>; <span class="comment">//用户输入变量</span></span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		sp.<span class="built_in">showMenu</span>();</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入你的选择：&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cin &gt;&gt; choice;</span><br><span class="line">		<span class="keyword">switch</span>(choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">			sp.<span class="built_in">quit</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>); <span class="comment">// 输入不对直接清屏</span></span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-5-实现演讲比赛功能"><a href="#4-5-实现演讲比赛功能" class="headerlink" title="4.5 实现演讲比赛功能"></a>4.5 实现演讲比赛功能</h5><p>在所有操作开始之前，有一系列的初始化操作：</p>
<p><strong>首先要创建选手类，即Speaker类，只有头文件，实现在主函数中</strong> </p>
<p>Speaker.h:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Speaker</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	string m_name;</span><br><span class="line">	<span class="type">int</span> m_score[<span class="number">2</span>];  <span class="comment">// 打了两次分</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>接下来在SpeechManager.h中添加需要的容器，用来存放不同的数据：</strong></p>
<p>​              在speechManager.h中声明以下变量： </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// 存放所有的演讲者,注意，只记录编号，通过map找到对应的speaker</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存放晋级的演讲者的编号</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存放最终的前三名</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v_vectory;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编号与speaker一一对应</span></span><br><span class="line">map&lt;<span class="type">int</span>, Speaker&gt; m_Speaker;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 记录比赛轮数</span></span><br><span class="line"><span class="type">int</span> m_index;</span><br></pre></td></tr></table></figure>

<p>​          并且注意要添加初始化函数initSpeaker()，在speechmanager.cpp中的实现如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::initSpeech</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;v1.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;v2.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;v_vectory.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_Speaker.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_index = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​          将初始话函数添加到构造函数中</p>
<p><strong>之后创建12个speaker对象并赋初始值：</strong> </p>
<p>​          在 speechManager.h 中声明createSpeaker()函数，并在 speechManager.cpp 中实现，添加到构造函数中</p>
<p>createSpeaker():</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::createSpeaker</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	string name_seed = <span class="string">&quot;ABCDEFGHIJKL&quot;</span>;</span><br><span class="line">	string name = <span class="string">&quot;选手&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; name_seed.<span class="built_in">size</span>(); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		string speaker_name = name + name_seed[i];</span><br><span class="line">		Speaker speaker;</span><br><span class="line">		speaker.m_name = speaker_name;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">2</span>; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			speaker.m_score[j] = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 选手的编号默认为i+10001</span></span><br><span class="line">	    <span class="comment">// 将所有的选手编号放进v1</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;v1.<span class="built_in">push_back</span>(i + <span class="number">10001</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 将编号与选手一一对应,存放到map中</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Speaker.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(i + <span class="number">1001</span>, speaker));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>初始化操作完成后才开始是功能1,startspeech()的实现</p>
<p>这是这个程序的关键功能，将选手进行抽签、开始第一轮比赛、开始第一次打分、淘汰一半选手、第二次抽签、比赛、打分、记录前三名</p>
<p>startspeech()整个函数功能太多，因此封装成一个个小的函数来实现</p>
<p>首先是抽签 **speechDraw()**：</p>
<p>​          在SpeechManager.h中声明speechDraw()函数，</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 抽签</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speechDraw</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>​          然后在speechManager.cpp中实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::speechDraw</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_index &lt;&lt; <span class="string">&quot;轮比赛正在抽签&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;--------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_index == <span class="number">1</span>) <span class="comment">// 第一轮</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 通过随机打乱来抽签</span></span><br><span class="line">		<span class="built_in">random_shuffle</span>(<span class="keyword">this</span>-&gt;v1.<span class="built_in">begin</span>(), <span class="keyword">this</span>-&gt;v1.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;第一轮抽签后演讲顺序如下：&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v1.<span class="built_in">begin</span>(); it != v1.<span class="built_in">end</span>(); it++)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>  <span class="comment">// 第二轮</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 通过随机打乱来抽签</span></span><br><span class="line">		<span class="built_in">random_shuffle</span>(<span class="keyword">this</span>-&gt;v2.<span class="built_in">begin</span>(), <span class="keyword">this</span>-&gt;v2.<span class="built_in">end</span>());</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;第二轮抽签后演讲顺序如下：&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v2.<span class="built_in">begin</span>(); it != v2.<span class="built_in">end</span>(); it++)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;-------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​          最后将speechDraw()添加到speechStart()中</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::speechStart</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//1.抽签</span></span><br><span class="line">	<span class="built_in">speechDraw</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>然后是开始比赛，speechContest()函数的声明与实现，大概步骤与speechDraw()一样，具体实现如下：</p>
<p>​          speechContest():</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::speechContest</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;----------------第&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_index &lt;&lt; <span class="string">&quot;轮比赛正式开始-----------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">// 临时容器，用来记录分数与选手编号，降序排列以便淘汰</span></span><br><span class="line">	multimap&lt;<span class="type">double</span>, <span class="type">int</span>, greater&lt;<span class="type">double</span>&gt;&gt;groupScore; </span><br><span class="line">	<span class="type">int</span> num = <span class="number">0</span>;  <span class="comment">// 记录打分打到了第几个，一遍6个一组分组</span></span><br><span class="line"></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v_src; <span class="comment">// 将v1或v2放进来以便写两遍一样的代码</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_index == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		v_src = v1;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		v_src = v2;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历所有参赛选手并打分</span></span><br><span class="line">	<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v_src.<span class="built_in">begin</span>(); it != v_src.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		num++; <span class="comment">// 当num==6或12时分组，每组取前三</span></span><br><span class="line">		<span class="comment">// 打分，使用deque双向列表以便去除头尾</span></span><br><span class="line">		deque&lt;<span class="type">double</span>&gt; d;</span><br><span class="line">		   <span class="comment">// 10个评委打分</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">double</span> score = (<span class="built_in">rand</span>() % <span class="number">401</span> + <span class="number">600</span>) / <span class="number">10.0f</span>; <span class="comment">//60.0~100.0</span></span><br><span class="line">			d.<span class="built_in">push_back</span>(score);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">sort</span>(d.<span class="built_in">begin</span>(),d.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">double</span>&gt;());</span><br><span class="line">		<span class="comment">// 掐头去尾</span></span><br><span class="line">		d.<span class="built_in">pop_back</span>();</span><br><span class="line">		d.<span class="built_in">pop_front</span>();</span><br><span class="line">		<span class="type">double</span> sum = <span class="built_in">accumulate</span>(d.<span class="built_in">begin</span>(),d.<span class="built_in">end</span>(),<span class="number">0.0f</span>); <span class="comment">//总分</span></span><br><span class="line">		<span class="type">double</span> avg = sum / (<span class="type">double</span>)d.<span class="built_in">size</span>(); <span class="comment">// 平均分</span></span><br><span class="line">		<span class="comment">// 将平均分存放进m_score中</span></span><br><span class="line">		<span class="comment">// 注意，speaker对象是存放在m_Speaker map中的，通过key访问</span></span><br><span class="line">		<span class="comment">// 此处的key就是vector中存储的序号</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Speaker[*it].m_score[<span class="keyword">this</span>-&gt;m_index - <span class="number">1</span>] = avg;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 处理分组问题，6人一组，按照分与编号一一对应</span></span><br><span class="line">		groupScore.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(avg, *it));</span><br><span class="line">		<span class="keyword">if</span> (num % <span class="number">6</span> == <span class="number">0</span>) <span class="comment">// 当num=6或12时，分组</span></span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; num / <span class="number">6</span> &lt;&lt; <span class="string">&quot;组的比赛名次为：&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">for</span> (multimap&lt;<span class="type">double</span>, <span class="type">int</span>, greater&lt;<span class="type">double</span>&gt;&gt;::iterator it_m = groupScore.<span class="built_in">begin</span>(); it_m != groupScore.<span class="built_in">end</span>(); it_m++)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;编号：&quot;</span> &lt;&lt; (*it_m).second &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Speaker[it_m-&gt;second].m_name &lt;&lt; <span class="string">&quot;成绩：&quot;</span> &lt;&lt; it_m-&gt;first &lt;&lt; endl;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 取小组前三名</span></span><br><span class="line">			<span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span> (multimap&lt;<span class="type">double</span>, <span class="type">int</span>, greater&lt;<span class="type">double</span>&gt;&gt;::iterator it_m = groupScore.<span class="built_in">begin</span>(); it_m != groupScore.<span class="built_in">end</span>() &amp; count&lt;<span class="number">3</span>; it_m++,count++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_index == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">this</span>-&gt;v2.<span class="built_in">push_back</span>(it_m-&gt;second);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">this</span>-&gt;v_vectory.<span class="built_in">push_back</span>(it_m-&gt;second);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			groupScore.<span class="built_in">clear</span>();</span><br><span class="line">			cout &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;----------------第&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_index &lt;&lt; <span class="string">&quot;轮比赛结束-----------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_index++;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_index == <span class="number">3</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;已经超过两轮，可以退出了！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 额外添加一个showScore()函数用来显示所有的分数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::showScore</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_index &lt;&lt; <span class="string">&quot;轮比赛晋级的是：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_index == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		v = <span class="keyword">this</span>-&gt;v2;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		v = <span class="keyword">this</span>-&gt;v_vectory;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Speaker[*it].m_name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;成绩：&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Speaker[*it].m_score[<span class="keyword">this</span>-&gt;m_index - <span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">showMenu</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>至此，第一次比赛的流程已经全部走完了，接下来是第二轮，只需要在SpeechStart()函数中将m_index++，再重复走一遍就好了</p>
<p>​       speechStart():</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::speechStart</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//1.抽签</span></span><br><span class="line">	<span class="built_in">speechDraw</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.正式比赛</span></span><br><span class="line">	<span class="built_in">speechContest</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.显示比赛结果</span></span><br><span class="line">	<span class="built_in">showScore</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 4. index++，进入第二轮,过程一样</span></span><br><span class="line">	<span class="keyword">this</span>-&gt;m_index++;</span><br><span class="line">	<span class="built_in">speechDraw</span>();</span><br><span class="line">	<span class="built_in">speechContest</span>();</span><br><span class="line">	<span class="built_in">showScore</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>   接下来是保存记录到文件中</p>
<p>和上面的函数一样，先在speechManager.h中声明，再在speechManager.cpp中实现</p>
<p>​            声明：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 保存记录</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">saveRecord</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>​        实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::saveRecord</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ofstream ofs;</span><br><span class="line">	<span class="comment">//以输出的方式打开文件,app表示追加，不删除原来的数据</span></span><br><span class="line">	ofs.<span class="built_in">open</span>(<span class="string">&quot;speech.csv&quot;</span>,ios::out|ios::app);</span><br><span class="line">	<span class="comment">// 写入数据</span></span><br><span class="line">	<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="keyword">this</span>-&gt;v_vectory.<span class="built_in">begin</span>(); it != <span class="keyword">this</span>-&gt;v_vectory.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// csv文件需要以，分割,只保留编号和第二次的分数</span></span><br><span class="line">		ofs &lt;&lt; *it &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Speaker[*it].m_score[<span class="number">1</span>] &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	ofs &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//关闭文件</span></span><br><span class="line">	ofs.<span class="built_in">close</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;数据已保存到文件中&quot;</span> &lt;&lt; endl;</span><br><span class="line">		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​     添加到SpeechStart()函数中：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::speechStart</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 再次初始化，防止用户反复调用功能1</span></span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">initSpeech</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">createSpeaker</span>();</span><br><span class="line">    </span><br><span class="line">	<span class="comment">//1.抽签</span></span><br><span class="line">	<span class="built_in">speechDraw</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.正式比赛</span></span><br><span class="line">	<span class="built_in">speechContest</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.显示比赛结果</span></span><br><span class="line">	<span class="built_in">showScore</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 4. index++，进入第二轮,过程一样</span></span><br><span class="line">	<span class="keyword">this</span>-&gt;m_index++;</span><br><span class="line">	<span class="built_in">speechDraw</span>();</span><br><span class="line">	<span class="built_in">speechContest</span>();</span><br><span class="line">	<span class="built_in">showScore</span>();</span><br><span class="line">	<span class="comment">// 准备下次调用</span></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 5.保存最终的数据</span></span><br><span class="line">	<span class="built_in">saveRecord</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;本届比赛完毕！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="4-6-查看往届记录"><a href="#4-6-查看往届记录" class="headerlink" title="4.6  查看往届记录"></a>4.6  查看往届记录</h5><p>查看保存在csv文件中的记录，首先需要</p>
<p>​              声明函数loadRecord()，</p>
<p>​              定义检测文件知否为空的变量file_is_empty，</p>
<p>​             定义用来存储读取内容的map容器 mao&lt;int,vector<string>&gt;  m_Record</p>
<p>​             定义查看往届即文件中的记录的函数，readRecord()</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 读取数据使用的变量和函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loadRecord</span><span class="params">()</span></span>;</span><br><span class="line"><span class="type">bool</span> file_is_empty;</span><br><span class="line"><span class="comment">// 查看文件中的记录</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">readRcord</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// int代表第几届，vector记录所有的信息</span></span><br><span class="line">map&lt;<span class="type">int</span>, vector&lt;string&gt;&gt; m_record;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>​       readRecord() 函数的实现：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::readRcord</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 判断文件是否为空</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;file_is_empty)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;文件为空！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (map&lt;<span class="type">int</span>, vector&lt;string&gt;&gt;::iterator it = <span class="keyword">this</span>-&gt;m_record.<span class="built_in">begin</span>(); it != <span class="keyword">this</span>-&gt;m_record.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; it-&gt;first+<span class="number">1</span> &lt;&lt; <span class="string">&quot;届 &quot;</span> &lt;&lt; <span class="string">&quot;冠军编号：&quot;</span> &lt;&lt; it-&gt;second[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;分数：&quot;</span> &lt;&lt; it-&gt;second[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>并将读取函数放入到构造函数中！</p>
<h5 id="4-7-清空所有数据"><a href="#4-7-清空所有数据" class="headerlink" title="4.7 清空所有数据"></a>4.7 清空所有数据</h5><p>实际操作为，删除所有历史数据，重新初始化，重新创建选手，重新加载数据</p>
<p>​        首先要在speechManager.h中声明clearRecord()函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 清空</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">clearRecord</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>​     在cpp中实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::clearRecord</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;确认清空？&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;1.确认&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;2.取消&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> select = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; select;</span><br><span class="line">	<span class="keyword">if</span> (select == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// trunc模式表示如果文件存在就删除并重新创建</span></span><br><span class="line">		<span class="function">ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;speech.csv&quot;</span>, ios::trunc)</span></span>;</span><br><span class="line">		ofs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 初始化一系列属性</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;<span class="built_in">initSpeech</span>();</span><br><span class="line">		<span class="keyword">this</span>-&gt;<span class="built_in">createSpeaker</span>();</span><br><span class="line">		<span class="keyword">this</span>-&gt;<span class="built_in">loadRecord</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;清空成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p> 至此，所有的程序都已完毕</p>
<h5 id="4-8-所有代码"><a href="#4-8-所有代码" class="headerlink" title="4.8  所有代码"></a>4.8  所有代码</h5><p>一共有4个，分别是：</p>
<p>主程序 演讲比赛流程管理系统.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;speechManager.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	SpeechManager sm;</span><br><span class="line">	<span class="type">int</span> choice = <span class="number">-1</span>; <span class="comment">//用户输入变量</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		sm.<span class="built_in">showMenu</span>();</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入你的选择：&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cin &gt;&gt; choice;</span><br><span class="line">		<span class="keyword">switch</span>(choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			sm.<span class="built_in">speechStart</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="comment">// 重新加载，防止是在操作1之后查看的</span></span><br><span class="line">			sm.<span class="built_in">loadRecord</span>();</span><br><span class="line">			sm.<span class="built_in">readRcord</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			sm.<span class="built_in">clearRecord</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">			sm.<span class="built_in">quit</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>); <span class="comment">// 输入不对直接清屏</span></span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>管理系统的头文件 speechManager.h</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;speaker.h&quot;</span>  <span class="comment">//注意要&quot;&quot;包含，不能用&lt;&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建演讲的管理类（仅申明）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpeechManager</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 构造函数</span></span><br><span class="line">	<span class="built_in">SpeechManager</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 初始化函数，将所有的容器清空</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">initSpeech</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 成员函数，展示菜单</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showMenu</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 退出</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">quit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 创建Speaker对象</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">createSpeaker</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 开始比赛功能</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">speechStart</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">// 抽签</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">speechDraw</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">// 开始比赛</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">speechContest</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">// 显示分数</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showScore</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">// 保存记录</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">saveRecord</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 存放所有的演讲者,注意，只记录编号，通过map找到对应的speaker</span></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 存放晋级的演讲者的编号</span></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 存放最终的前三名</span></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v_vectory;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 编号与speaker一一对应</span></span><br><span class="line">	map&lt;<span class="type">int</span>, Speaker&gt; m_Speaker;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 记录比赛轮数</span></span><br><span class="line">	<span class="type">int</span> m_index;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 读取数据使用的变量和函数</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">loadRecord</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="type">bool</span> file_is_empty;</span><br><span class="line">	<span class="comment">// 查看文件中的记录</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">readRcord</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">// int代表第几届，vector记录所有的信息</span></span><br><span class="line">	map&lt;<span class="type">int</span>, vector&lt;string&gt;&gt; m_record;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 清空</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">clearRecord</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 析构函数</span></span><br><span class="line">	~<span class="built_in">SpeechManager</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>管理系统的实现部分 speechManager.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;speechManager.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;algorithm&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// SpeechManage类中函数的实现</span></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line">SpeechManager::<span class="built_in">SpeechManager</span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">initSpeech</span>(); <span class="comment">// 初始化</span></span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">createSpeaker</span>(); <span class="comment">// 创建speaker</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;创建人员完毕&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">loadRecord</span>(); <span class="comment">// 载入记录中的数据</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// showMenu的实现</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::showMenu</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;*************************************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  欢迎参加演讲比赛  ********&quot;</span>&lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  1.开始演讲比赛  ************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  2.查看往届记录  ************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  3.清空比赛记录  ************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;********  0.退出比赛程序  ************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;*************************************&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::initSpeech</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;v1.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;v2.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;v_vectory.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_Speaker.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_index = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::quit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;欢迎下次使用！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::createSpeaker</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	string name_seed = <span class="string">&quot;ABCDEFGHIJKL&quot;</span>;</span><br><span class="line">	string name = <span class="string">&quot;选手&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;<span class="built_in">int</span>( name_seed.<span class="built_in">size</span>()); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		string speaker_name = name + name_seed[i];</span><br><span class="line">		Speaker speaker;</span><br><span class="line">		speaker.m_name = speaker_name;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">2</span>; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			speaker.m_score[j] = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 选手的编号默认为i+10001</span></span><br><span class="line">	    <span class="comment">// 将所有的选手编号放进v1</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;v1.<span class="built_in">push_back</span>(i + <span class="number">10001</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 将编号与选手一一对应,存放到map中</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Speaker.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(i + <span class="number">10001</span>, speaker));</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::speechStart</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 再次初始化，防止用户反复调用功能1</span></span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">initSpeech</span>();</span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">createSpeaker</span>();</span><br><span class="line">	<span class="comment">//1.抽签</span></span><br><span class="line">	<span class="built_in">speechDraw</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.正式比赛</span></span><br><span class="line">	<span class="built_in">speechContest</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.显示比赛结果</span></span><br><span class="line">	<span class="built_in">showScore</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 4. index++，进入第二轮,过程一样</span></span><br><span class="line">	<span class="keyword">this</span>-&gt;m_index++;</span><br><span class="line">	<span class="built_in">speechDraw</span>();</span><br><span class="line">	<span class="built_in">speechContest</span>();</span><br><span class="line">	<span class="built_in">showScore</span>();</span><br><span class="line">	<span class="comment">// 准备下次调用</span></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 5.保存最终的数据</span></span><br><span class="line">	<span class="built_in">saveRecord</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;本届比赛完毕！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::speechContest</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;----------------第&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_index &lt;&lt; <span class="string">&quot;轮比赛正式开始-----------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">// 临时容器，用来记录分数与选手编号，降序排列以便淘汰</span></span><br><span class="line">	multimap&lt;<span class="type">double</span>, <span class="type">int</span>, greater&lt;<span class="type">double</span>&gt;&gt;groupScore; </span><br><span class="line">	<span class="type">int</span> num = <span class="number">0</span>;  <span class="comment">// 记录打分打到了第几个，一遍6个一组分组</span></span><br><span class="line"></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v_src; <span class="comment">// 将v1或v2放进来以便写两遍一样的代码</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_index == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		v_src = v1;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		v_src = v2;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历所有参赛选手并打分</span></span><br><span class="line">	<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v_src.<span class="built_in">begin</span>(); it != v_src.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		num++; <span class="comment">// 当num==6或12时分组，每组取前三</span></span><br><span class="line">		<span class="comment">// 打分，使用deque双向列表以便去除头尾</span></span><br><span class="line">		deque&lt;<span class="type">double</span>&gt; d;</span><br><span class="line">		   <span class="comment">// 10个评委打分</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">double</span> score = (<span class="built_in">rand</span>() % <span class="number">401</span> + <span class="number">600</span>) / <span class="number">10.0f</span>; <span class="comment">//60.0~100.0</span></span><br><span class="line">			d.<span class="built_in">push_back</span>(score);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">sort</span>(d.<span class="built_in">begin</span>(),d.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">double</span>&gt;());</span><br><span class="line">		<span class="comment">// 掐头去尾</span></span><br><span class="line">		d.<span class="built_in">pop_back</span>();</span><br><span class="line">		d.<span class="built_in">pop_front</span>();</span><br><span class="line">		<span class="type">double</span> sum = <span class="built_in">accumulate</span>(d.<span class="built_in">begin</span>(),d.<span class="built_in">end</span>(),<span class="number">0.0f</span>); <span class="comment">//总分</span></span><br><span class="line">		<span class="type">double</span> avg = sum / (<span class="type">double</span>)d.<span class="built_in">size</span>(); <span class="comment">// 平均分</span></span><br><span class="line">		<span class="comment">// 将平均分存放进m_score中</span></span><br><span class="line">		<span class="comment">// 注意，speaker对象是存放在m_Speaker map中的，通过key访问</span></span><br><span class="line">		<span class="comment">// 此处的key就是vector中存储的序号</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;m_Speaker[*it].m_score[<span class="keyword">this</span>-&gt;m_index - <span class="number">1</span>] = avg;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 处理分组问题，6人一组，按照分与编号一一对应</span></span><br><span class="line">		groupScore.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(avg, *it));</span><br><span class="line">		<span class="keyword">if</span> (num % <span class="number">6</span> == <span class="number">0</span>) <span class="comment">// 当num=6或12时，分组</span></span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; num / <span class="number">6</span> &lt;&lt; <span class="string">&quot;组的比赛名次为：&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">for</span> (multimap&lt;<span class="type">double</span>, <span class="type">int</span>, greater&lt;<span class="type">double</span>&gt;&gt;::iterator it_m = groupScore.<span class="built_in">begin</span>(); it_m != groupScore.<span class="built_in">end</span>(); it_m++)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;编号：&quot;</span> &lt;&lt; (*it_m).second &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Speaker[it_m-&gt;second].m_name &lt;&lt; <span class="string">&quot; 成绩：&quot;</span> &lt;&lt; it_m-&gt;first &lt;&lt; endl;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 取小组前三名</span></span><br><span class="line">			<span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span> (multimap&lt;<span class="type">double</span>, <span class="type">int</span>, greater&lt;<span class="type">double</span>&gt;&gt;::iterator it_m = groupScore.<span class="built_in">begin</span>(); it_m != groupScore.<span class="built_in">end</span>() &amp; count&lt;<span class="number">3</span>; it_m++,count++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_index == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">this</span>-&gt;v2.<span class="built_in">push_back</span>(it_m-&gt;second);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">this</span>-&gt;v_vectory.<span class="built_in">push_back</span>(it_m-&gt;second);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			groupScore.<span class="built_in">clear</span>();</span><br><span class="line">			cout &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;----------------第&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_index &lt;&lt; <span class="string">&quot;轮比赛结束-----------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//this-&gt;m_index++;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//if (this-&gt;m_index == 3)</span></span><br><span class="line">	<span class="comment">//&#123;</span></span><br><span class="line">	<span class="comment">//	cout &lt;&lt; &quot;已经超过两轮，可以退出了！&quot; &lt;&lt; endl;</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::showScore</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_index &lt;&lt; <span class="string">&quot;轮比赛晋级的是：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_index == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		v = <span class="keyword">this</span>-&gt;v2;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		v = <span class="keyword">this</span>-&gt;v_vectory;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Speaker[*it].m_name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;成绩：&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Speaker[*it].m_score[<span class="keyword">this</span>-&gt;m_index - <span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">showMenu</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::speechDraw</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_index &lt;&lt; <span class="string">&quot;轮比赛正在抽签&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;--------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_index == <span class="number">1</span>) <span class="comment">// 第一轮</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 通过随机打乱来抽签</span></span><br><span class="line">		<span class="built_in">random_shuffle</span>(<span class="keyword">this</span>-&gt;v1.<span class="built_in">begin</span>(), <span class="keyword">this</span>-&gt;v1.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;第一轮抽签后演讲顺序如下：&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v1.<span class="built_in">begin</span>(); it != v1.<span class="built_in">end</span>(); it++)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>  <span class="comment">// 第二轮</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 通过随机打乱来抽签</span></span><br><span class="line">		<span class="built_in">random_shuffle</span>(<span class="keyword">this</span>-&gt;v2.<span class="built_in">begin</span>(), <span class="keyword">this</span>-&gt;v2.<span class="built_in">end</span>());</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;第二轮抽签后演讲顺序如下：&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v2.<span class="built_in">begin</span>(); it != v2.<span class="built_in">end</span>(); it++)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;-------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::saveRecord</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ofstream ofs;</span><br><span class="line">	<span class="comment">//以输出的方式打开文件,app表示追加，不删除原来的数据</span></span><br><span class="line">	ofs.<span class="built_in">open</span>(<span class="string">&quot;speech.csv&quot;</span>,ios::out|ios::app);</span><br><span class="line">	<span class="comment">// 写入数据</span></span><br><span class="line">	<span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="keyword">this</span>-&gt;v_vectory.<span class="built_in">begin</span>(); it != <span class="keyword">this</span>-&gt;v_vectory.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;文件正在写入！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="comment">// csv文件需要以，分割,只保留编号和第二次的分数</span></span><br><span class="line">		ofs &lt;&lt; *it &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Speaker[*it].m_score[<span class="number">1</span>] &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	ofs &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//关闭文件</span></span><br><span class="line">	ofs.<span class="built_in">close</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;数据已保存到文件中&quot;</span> &lt;&lt; endl;</span><br><span class="line">		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::loadRecord</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">ifstream <span class="title">ifs</span><span class="params">(<span class="string">&quot;speech.csv&quot;</span>, ios::in)</span></span>; <span class="comment">// 以读取的方式打开文件</span></span><br><span class="line">	<span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>()) <span class="comment">//判断文件是否已打开</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;file_is_empty = <span class="literal">true</span>;</span><br><span class="line">		<span class="comment">// cout &lt;&lt; &quot;文件不存在！&quot; &lt;&lt; endl;;</span></span><br><span class="line">		ifs.<span class="built_in">close</span>();</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 由上面的if得出文件是存在的，接下来判断是否为空</span></span><br><span class="line">	<span class="type">char</span> ch;</span><br><span class="line">	ifs &gt;&gt; ch; <span class="comment">// 读取一个字符，光标后移一位</span></span><br><span class="line">	<span class="keyword">if</span> (ifs.<span class="built_in">eof</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// cout &lt;&lt; &quot;文件为空！&quot; &lt;&lt; endl;</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;file_is_empty = <span class="literal">true</span>;</span><br><span class="line">		ifs.<span class="built_in">close</span>();</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 如果文件通过了上面两次检查，则可以读取</span></span><br><span class="line">	<span class="keyword">this</span>-&gt;file_is_empty = <span class="literal">false</span>;</span><br><span class="line">	ifs.<span class="built_in">putback</span>(ch); <span class="comment">// 检查时读取的一个字符放回去</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 开始读取数据</span></span><br><span class="line">	string data;</span><br><span class="line">	<span class="type">int</span> index = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 一次读一行</span></span><br><span class="line">	<span class="keyword">while</span> (ifs &gt;&gt; data)</span><br><span class="line">	&#123;</span><br><span class="line">		vector&lt;string&gt; v;</span><br><span class="line">		<span class="type">int</span> pos = <span class="number">-1</span>;</span><br><span class="line">		<span class="type">int</span> start = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			pos = data.<span class="built_in">find</span>(<span class="string">&quot;,&quot;</span>, start); <span class="comment">// 从start开始查找“，”</span></span><br><span class="line">			<span class="keyword">if</span> (pos == <span class="number">-1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">break</span>; <span class="comment">// 到头了，没有逗号了，直接退出，下一句</span></span><br><span class="line">			&#125;</span><br><span class="line">			string temp = data.<span class="built_in">substr</span>(start, pos - start);  <span class="comment">// 对这一行进行分割，从start到pos-start为一块</span></span><br><span class="line">			v.<span class="built_in">push_back</span>(temp);</span><br><span class="line">			start = pos+<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_record.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(index, v));</span><br><span class="line">		index++;</span><br><span class="line">	&#125;</span><br><span class="line">	ifs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpeechManager::readRcord</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 判断文件是否为空</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;file_is_empty)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;文件不存在或文件为空！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (map&lt;<span class="type">int</span>, vector&lt;string&gt;&gt;::iterator it = <span class="keyword">this</span>-&gt;m_record.<span class="built_in">begin</span>(); it != <span class="keyword">this</span>-&gt;m_record.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; it-&gt;first+<span class="number">1</span> &lt;&lt; <span class="string">&quot;届 &quot;</span> &lt;&lt; <span class="string">&quot;冠军编号：&quot;</span> &lt;&lt; it-&gt;second[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;分数：&quot;</span> &lt;&lt; it-&gt;second[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SpeechManager::clearRecord</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;确认清空？&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;1.确认&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;2.取消&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="type">int</span> select = <span class="number">0</span>;</span><br><span class="line">		cin &gt;&gt; select;</span><br><span class="line">		<span class="keyword">if</span> (select == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// trunc模式表示如果文件存在就删除并重新创建</span></span><br><span class="line">			<span class="function">ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;speech.csv&quot;</span>, ios::trunc)</span></span>;</span><br><span class="line">			ofs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 初始化一系列属性</span></span><br><span class="line">			<span class="keyword">this</span>-&gt;<span class="built_in">initSpeech</span>();</span><br><span class="line">			<span class="keyword">this</span>-&gt;<span class="built_in">createSpeaker</span>();</span><br><span class="line">			<span class="keyword">this</span>-&gt;<span class="built_in">loadRecord</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;清空成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 析构函数</span></span><br><span class="line">SpeechManager::~<span class="built_in">SpeechManager</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>以及定义speaker类的speaker.h:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Speaker</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	string m_name;</span><br><span class="line">	<span class="type">double</span> m_score[<span class="number">2</span>];  <span class="comment">// 打了两次分</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="总案例"><a href="#总案例" class="headerlink" title="总案例"></a>总案例</h2><p>机房预约系统</p>
<h3 id="1-系统需求"><a href="#1-系统需求" class="headerlink" title="1.  系统需求"></a>1.  系统需求</h3><h4 id="大概需求"><a href="#大概需求" class="headerlink" title="大概需求"></a>大概需求</h4><p><strong>有三种身份来使用这个系统：</strong></p>
<p>学生：申请机房的使用</p>
<p>老师：审核学生的申请</p>
<p>管理员：给老师和学生创建账号</p>
<p><strong>机房类型：</strong></p>
<p>一共三个机房，最大容量分别为100、50、20</p>
<p><strong>申请方式：</strong></p>
<p>申请的订单每周由管理员负责清空。</p>
<p>学生可以预约未来一周内的机房使用，预约的日期为周一至周五，预约时需要选择预约时段(上午、下午)</p>
<p>教师来审核预约，依据实际情况审核预约通过或者不通过</p>
<h4 id="具体需求"><a href="#具体需求" class="headerlink" title="具体需求"></a>具体需求</h4><p>首先进入登陆界面，选择登录的身份：</p>
<p>学生</p>
<p>老师</p>
<p>管理员</p>
<p>退出</p>
<p>根据登录身份输入不同的信息以验证：</p>
<p>学号、姓名、密码</p>
<p>职工号、姓名、密码</p>
<p>管理员账号、密码</p>
<p>验证成功进入各对应的菜单：</p>
<p>学上页面具体功能：</p>
<p>申请预约、查看预约状态、查看所有预约、取消预约、登出</p>
<p>老师页面具体功能：</p>
<p>查看所有预约、审核预约、登出</p>
<p>管理员具体功能：</p>
<p>添加账号、查看所有账号信息、查看所有机房的信息、清空所有的预约、登出</p>
<h3 id="2-创建新项目"><a href="#2-创建新项目" class="headerlink" title="2.  创建新项目"></a>2.  创建新项目</h3><p>自己创去</p>
<h3 id="3-主菜单的创建"><a href="#3-主菜单的创建" class="headerlink" title="3.  主菜单的创建"></a>3.  主菜单的创建</h3><h4 id="3-1-菜单实现"><a href="#3-1-菜单实现" class="headerlink" title="3.1 菜单实现"></a>3.1 菜单实现</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;==================欢迎来到传智播客机房预约系统==================&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入您的身份&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t-----------------------------\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|          1.学生代表        |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|          2. 老师           |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|          3. 管理员         |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|          0. 退出           |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t-----------------------------\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入您的选择&quot;</span>;</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> select;</span><br><span class="line">		cin &gt;&gt; select;</span><br><span class="line">		<span class="keyword">switch</span> (select)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;输入有误，请重新输入！&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">			<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4-退出功能的实现"><a href="#4-退出功能的实现" class="headerlink" title="4.  退出功能的实现"></a>4.  退出功能的实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">          <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;欢迎下次使用！&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>



<h3 id="5-创建身份类"><a href="#5-创建身份类" class="headerlink" title="5.   创建身份类"></a>5.   创建身份类</h3><h4 id="5-1-创建身份基类"><a href="#5-1-创建身份基类" class="headerlink" title="5.1 创建身份基类"></a>5.1 创建身份基类</h4><p>学生，老师，管理员，三种身份抽象成一个身份类，定义在identity.h中</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;string&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Identity</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 纯虚函数，只能在子类中实例化</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">open_menu</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	string m_name;</span><br><span class="line">	string m_pwd;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="5-2-学生类"><a href="#5-2-学生类" class="headerlink" title="5.2 学生类"></a>5.2 学生类</h4><p>student.h   student.cpp</p>
<p>student.h:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;identity.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 学生类</span></span><br><span class="line"><span class="comment">//  首先继承身份基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> :<span class="keyword">public</span> Identity</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 默认构造函数</span></span><br><span class="line">	<span class="built_in">Student</span>();</span><br><span class="line">	<span class="comment">// 有参构造</span></span><br><span class="line">	<span class="built_in">Student</span>(<span class="type">int</span> id, string name, string pwd);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 菜单界面</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">open_menu</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 申请预约</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">applyOrder</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查看我的预约</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showMyOrder</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查看所有预约</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showAllOrder</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 取消预约</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">cancelOrder</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 学号</span></span><br><span class="line">	<span class="type">int</span> m_id;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>student.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;identity.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 学生类</span></span><br><span class="line"><span class="comment">//  首先继承身份基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> :<span class="keyword">public</span> Identity</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 默认构造函数</span></span><br><span class="line">	<span class="built_in">Student</span>();</span><br><span class="line">	<span class="comment">// 有参构造</span></span><br><span class="line">	<span class="built_in">Student</span>(<span class="type">int</span> id, string name, string pwd);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 菜单界面</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">open_menu</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 申请预约</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">applyOrder</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查看我的预约</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showMyOrder</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查看所有预约</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showAllOrder</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 取消预约</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">cancelOrder</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 学号</span></span><br><span class="line">	<span class="type">int</span> m_id;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="5-3-老师类"><a href="#5-3-老师类" class="headerlink" title="5.3 老师类"></a>5.3 老师类</h4><p>teacher.h</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;identity.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span> :<span class="keyword">public</span> Identity</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Teacher</span>();</span><br><span class="line">	<span class="built_in">Teacher</span>(<span class="type">int</span> empid, string name, string pwd);</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">open_menu</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showAllOrder</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">// 审核预约</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">validOrder</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> m_empid;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>teacher.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;teacher.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">Teacher::<span class="built_in">Teacher</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Teacher::<span class="built_in">Teacher</span>(<span class="type">int</span> empid, string name, string pwd)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Teacher::open_menu</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Teacher::showAllOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Teacher::validOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="5-4-管理员类"><a href="#5-4-管理员类" class="headerlink" title="5.4 管理员类"></a>5.4 管理员类</h4><p>manager.h</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;identity.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Manager</span> :<span class="keyword">public</span> Identity</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Manager</span>();</span><br><span class="line">	<span class="built_in">Manager</span>(string name, string pwd);</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">open_menu</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">addPerson</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showComputer</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">clearFile</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>manager.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;manager.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">Manager::<span class="built_in">Manager</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Manager::<span class="built_in">Manager</span>(string name, string pwd)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::open_menu</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::addPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::showComputer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::clearFile</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="5-5-登录模块"><a href="#5-5-登录模块" class="headerlink" title="5.5 登录模块"></a>5.5 登录模块</h4><p>首先将所有的文件名定义到一个全局的头文件中，然后统一操作</p>
<p>globalFile.h</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ADMIN_FILE <span class="string">&quot;admin.txt&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 学生文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STUDENT_FILE <span class="string">&quot;student.txt&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 老师文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TEACHER_FILE <span class="string">&quot;teacher.txt&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 机房信息文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> COMPUTER_FILE <span class="string">&quot;computer.txt&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 预约订单文件</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ORDER_FILE <span class="string">&quot;order.txt&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>封装登录函数LoginIn()</p>
<p>在 <strong>机房预约系统.cpp</strong> 中添加该函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 拿出已经存在的数据进行比对</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LoginIn</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* file_name,<span class="type">int</span> type)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 首先创建父类的指针，准备登陆成功后指向子类的对象</span></span><br><span class="line">	Identity* person = <span class="literal">NULL</span>;</span><br><span class="line">	ifstream ifs;</span><br><span class="line">	ifs.<span class="built_in">open</span>(file_name, ios::in);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 判断文件是否存在</span></span><br><span class="line">	<span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;文件不存在！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		ifs.<span class="built_in">close</span>();</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 获取登录必须的账号密码信息</span></span><br><span class="line">	<span class="type">int</span> id = <span class="number">-1</span>;</span><br><span class="line">	string name;</span><br><span class="line">	string pwd;</span><br><span class="line">	<span class="keyword">if</span> (type == <span class="number">1</span>) <span class="comment">// 学生</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入你的学号：&quot;</span>;</span><br><span class="line">		cin &gt;&gt; id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (type == <span class="number">2</span>)  <span class="comment">//老师</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入工号：&quot;</span>;</span><br><span class="line">		cin &gt;&gt; id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入用户名：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cin &gt;&gt; name;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入密码：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cin &gt;&gt; pwd;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 开始登录的验证</span></span><br><span class="line">	<span class="keyword">if</span> (type == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 学生登录验证</span></span><br><span class="line">        <span class="type">int</span> fid;</span><br><span class="line">		string fname;</span><br><span class="line">		string fpwd;</span><br><span class="line">		<span class="comment">// while是一行一行的读的，而且自动以空格分开</span></span><br><span class="line">		<span class="keyword">while</span> (ifs &gt;&gt; fid &amp;&amp; ifs &gt;&gt; fname &amp;&amp; ifs &gt;&gt; fpwd)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; fid &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; fname &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; fpwd &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">if</span> (fid == id &amp;&amp; fname == name &amp;&amp; fpwd == pwd)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;学生端验证登录成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">				person = <span class="keyword">new</span> <span class="built_in">Student</span>(id, name, pwd);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">        </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (type == <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 老师的登录验证</span></span><br><span class="line">		<span class="type">int</span> fid;</span><br><span class="line">		string fname;</span><br><span class="line">		string fpwd;</span><br><span class="line">		<span class="comment">// while是一行一行的读的，而且自动以空格分开</span></span><br><span class="line">		<span class="keyword">while</span> (ifs &gt;&gt; fid &amp;&amp; ifs &gt;&gt; fname &amp;&amp; ifs &gt;&gt; fpwd)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; fid &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; fname &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; fpwd &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">if</span> (fid == id &amp;&amp; fname == name &amp;&amp; fpwd == pwd)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;教师端验证登录成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">				person = <span class="keyword">new</span> <span class="built_in">Teacher</span>(id, name, pwd);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (type == <span class="number">3</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 管理员的登录验证</span></span><br><span class="line">		string fname;</span><br><span class="line">		string fpwd;</span><br><span class="line">		<span class="comment">// while是一行一行的读的，而且自动以空格分开</span></span><br><span class="line">		<span class="keyword">while</span> (ifs &gt;&gt; fname &amp;&amp; ifs &gt;&gt; fpwd)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; fname &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; fpwd &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">if</span> (fname == name &amp;&amp; fpwd == pwd)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;管理员端验证登录成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">				person = <span class="keyword">new</span> <span class="built_in">Manager</span>(name,pwd);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 如果验证都没进则提示登陆失败</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;登陆失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="6-三大模块具体实现"><a href="#6-三大模块具体实现" class="headerlink" title="6.  三大模块具体实现"></a>6.  三大模块具体实现</h3><h4 id="6-1-管理员模块"><a href="#6-1-管理员模块" class="headerlink" title="6.1 管理员模块"></a>6.1 管理员模块</h4><p><strong>管理员的登录与注销</strong> </p>
<p>登录就是在上面的账号密码核验后进入到managerMenu（）函数，这个函数定义和实现都在 机房预约系统.cpp 中，在managerMenu()函数中实现整个管理员的二级菜单，登录就是新建一个manager对象，注销就是delete掉这个对象，这里的实例化对象的过程没整明白！</p>
<p>managerMenu():</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 实现管理员二级菜单的函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">managerMenu</span><span class="params">(Identity* &amp;manager)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 显示管理员菜单</span></span><br><span class="line">		manager-&gt;<span class="built_in">open_menu</span>();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 实例化一个管理员对象，</span></span><br><span class="line">		Manager* man = (Manager*)manager; <span class="comment">// 强转，将父类转换为子类</span></span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> ma_select =<span class="number">-1</span>;</span><br><span class="line">		cin &gt;&gt; ma_select;</span><br><span class="line">		<span class="keyword">switch</span> (ma_select)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;添加账号&quot;</span> &lt;&lt; endl;</span><br><span class="line">			man-&gt;<span class="built_in">addPerson</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;查看账号&quot;</span> &lt;&lt; endl;</span><br><span class="line">			man-&gt;<span class="built_in">showPerson</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;查看机房&quot;</span> &lt;&lt; endl;</span><br><span class="line">			man-&gt;<span class="built_in">showComputer</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;清空预约&quot;</span> &lt;&lt; endl;</span><br><span class="line">			man-&gt;<span class="built_in">clearFile</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">			<span class="keyword">delete</span> manager;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;注销登录成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">			<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>添加账号功能的实现</strong> </p>
<p>addPerson()函数的实现，首先创建vector容器将所有的文件中的已存在teacher和student对象都读进来以便进行查重。</p>
<p>在manager.h中进行声明</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// 初始化容器，将老师和学生都都读进来</span></span><br><span class="line"><span class="comment">// 以便判断是否有重复的</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">initVector</span><span class="params">()</span></span>;</span><br><span class="line">vector&lt;Student&gt; vStu;</span><br><span class="line">vector&lt;Teacher&gt; vTea;</span><br><span class="line"><span class="comment">// 检测是否有重复</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">checkRepeat</span><span class="params">(<span class="type">int</span> id,<span class="type">int</span> type)</span></span>;</span><br></pre></td></tr></table></figure>

<p>在manager.cpp中对initVector()和checkRepeat()进行实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::initVector</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vStu.<span class="built_in">clear</span>();</span><br><span class="line">	vTea.<span class="built_in">clear</span>();</span><br><span class="line">	ifstream ifs;</span><br><span class="line">	ifs.<span class="built_in">open</span>(STUDENT_FILE, ios::in);</span><br><span class="line">	<span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;文件打开失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	Student st;</span><br><span class="line">	<span class="keyword">while</span> (ifs &gt;&gt; st.m_id &amp;&amp; ifs &gt;&gt; st.m_name &amp;&amp; ifs &gt;&gt; st.m_pwd)</span><br><span class="line">	&#123;</span><br><span class="line">		vStu.<span class="built_in">push_back</span>(st);</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;当前学生数量为：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; vStu.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">	ifs.<span class="built_in">close</span>();</span><br><span class="line">	</span><br><span class="line">	ifs.<span class="built_in">open</span>(TEACHER_FILE, ios::in);</span><br><span class="line">	<span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;文件打开失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	Teacher te;</span><br><span class="line">	<span class="keyword">while</span> (ifs &gt;&gt; te.m_empid &amp;&amp; ifs &gt;&gt; te.m_name &amp;&amp; ifs &gt;&gt; te.m_pwd)</span><br><span class="line">	&#123;</span><br><span class="line">		vTea.<span class="built_in">push_back</span>(te);</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;当前教师数量为：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; vTea.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">	ifs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Manager::checkRepeat</span><span class="params">(<span class="type">int</span> id,<span class="type">int</span> type)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (type == <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (vector&lt;Student&gt;::iterator it = vStu.<span class="built_in">begin</span>(); it != vStu.<span class="built_in">end</span>(); it++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (it-&gt;m_id == id)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (vector&lt;Teacher&gt;::iterator it = vTea.<span class="built_in">begin</span>(); it != vTea.<span class="built_in">end</span>(); it++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (it-&gt;m_empid == id)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>最后才是addPerson()函数的实现：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::addPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入添加的账号类型：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot; 1. 老师&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot; 2. 学生&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	string filename;</span><br><span class="line">	<span class="type">int</span> tip;</span><br><span class="line">	ofstream ofs;</span><br><span class="line">	<span class="type">int</span> type_select = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; type_select;</span><br><span class="line">	<span class="keyword">if</span> (type_select == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		filename = TEACHER_FILE;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入老师工号：&quot;</span> &lt;&lt; endl;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (type_select == <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		filename = STUDENT_FILE;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入学生学号&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		cin &gt;&gt; tip;</span><br><span class="line">		<span class="type">bool</span> ret =<span class="keyword">this</span>-&gt; <span class="built_in">checkRepeat</span>(tip, type_select);</span><br><span class="line">		<span class="keyword">if</span> (ret)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;账号已存在,请重新输入&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	ofs.<span class="built_in">open</span>(filename, ios::out | ios::app);</span><br><span class="line"></span><br><span class="line">	string name;</span><br><span class="line">	string pwd;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入姓名:&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cin &gt;&gt; name;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入密码：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cin &gt;&gt; pwd;</span><br><span class="line">	ofs &lt;&lt; tip &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; pwd &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; endl;;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;添加成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 初始化容器，将刚刚添加的也加进检测是否重复的容器中</span></span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">initVector</span>();</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	ofs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>查看账号</strong> </p>
<p>showPerson()的实现</p>
<p>前面已将所有的studet和teacher类都读进来了，因此只要遍历vSt或vTe即可，但是要先定义printStudent()和printTeacher()函数，以便for_each()算法调用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStudent</span><span class="params">(Student&amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;学号：&quot;</span> &lt;&lt; s.m_id &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; s.m_name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;密码：&quot;</span> &lt;&lt; s.m_pwd &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printTeacher</span><span class="params">(Teacher&amp; t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;工号：&quot;</span> &lt;&lt; t.m_empid &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; t.m_name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;密码：&quot;</span> &lt;&lt; t.m_pwd &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入你要查看的类型：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;1. 老师&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;2. 学生&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> select = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">if</span> (select = <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		for_each(vStu.<span class="built_in">begin</span>(), vStu.<span class="built_in">end</span>(), printStudent);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		for_each(vTea.<span class="built_in">begin</span>(), vTea.<span class="built_in">end</span>(), printTeacher);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>查看机房信息</strong> </p>
<p>查看机房信息showComputer()函数的实现</p>
<p>在实现之前，先创建一个computerRoom类，分别记录机房的ID和最大容量 </p>
<p>computer.h:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ComputerRoom</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 机房编号</span></span><br><span class="line">	<span class="type">int</span> m_comid;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 机房电脑容量</span></span><br><span class="line">	<span class="type">int</span> m_comnum;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>接下来，将机房的信息从txt文件中读到manager中，再Manager管理员类中，添加新的容器以保存机房信息</p>
<p>在manager的有参构造中加入：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Manager::<span class="built_in">Manager</span>( string name, string pwd)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_pwd = pwd;</span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">initVector</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 导入机房信息</span></span><br><span class="line">	ifstream ifs;</span><br><span class="line">	ifs.<span class="built_in">open</span>(COMPUTER_FILE, ios::in);</span><br><span class="line">	ComputerRoom c;</span><br><span class="line">	<span class="keyword">while</span> (ifs &gt;&gt; c.m_comid &amp;&amp; ifs &gt;&gt; c.m_comnum)</span><br><span class="line">	&#123;</span><br><span class="line">		vComputer.<span class="built_in">push_back</span>(c);</span><br><span class="line">	&#125;</span><br><span class="line">	ifs.<span class="built_in">close</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;当前机房数量为：&quot;</span> &lt;&lt; vComputer.<span class="built_in">size</span>()&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>显示机房信息</strong> </p>
<p>再实现showComputer()功能：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::showComputer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (vector&lt;ComputerRoom&gt; ::iterator it = vComputer.<span class="built_in">begin</span>(); it != vComputer.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;机房编号：&quot;</span> &lt;&lt; it-&gt;m_comid &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;机房容量：&quot;</span> &lt;&lt; it-&gt;m_comnum &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>清空预约</strong></p>
<p>即清空order.txt文件</p>
<p>实现clearFile()函数即可</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Manager::clearFile</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ofstream ofs;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// trunc的打开方式，有就清空，没有就新创一个</span></span><br><span class="line">	ofs.<span class="built_in">open</span>(ORDER_FILE, ios::trunc);</span><br><span class="line">	ofs.<span class="built_in">close</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;预约信息清空成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-2-学生模块"><a href="#6-2-学生模块" class="headerlink" title="6.2 学生模块"></a>6.2 学生模块</h4><p><strong>学生的登录与注销</strong></p>
<p>完善Student类的构造函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有参构造</span></span><br><span class="line">Student::<span class="built_in">Student</span>(<span class="type">int</span> id, string name, string pwd)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_id = id;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_pwd = pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 再在主程序中添加学生的子菜单，与添加管理员的子菜单方式相同</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现学生的二级菜单</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">studentMenu</span><span class="params">(Identity* &amp;student)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		student-&gt;<span class="built_in">open_menu</span>();</span><br><span class="line">		<span class="comment">// 实例化一个学生对象</span></span><br><span class="line">		Student* st = (Student*)student;</span><br><span class="line">		<span class="type">int</span> st_select = <span class="number">-1</span>;</span><br><span class="line">		cin &gt;&gt; st_select;</span><br><span class="line">		<span class="keyword">switch</span> (st_select)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			st-&gt;<span class="built_in">applyOrder</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			st-&gt;<span class="built_in">showMyOrder</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			st-&gt;<span class="built_in">showAllOrder</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			st-&gt;<span class="built_in">cancelOrder</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">			<span class="keyword">delete</span> student;</span><br><span class="line">			<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">			<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>记得再LogIn()函数中，学生认证通过后，调用上面创建的学生二级菜单函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开始登录的验证</span></span><br><span class="line">	<span class="keyword">if</span> (type == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 学生登录验证</span></span><br><span class="line">		<span class="type">int</span> fid;</span><br><span class="line">		string fname;</span><br><span class="line">		string fpwd;</span><br><span class="line">		<span class="comment">// while是一行一行的读的，而且自动以空格分开</span></span><br><span class="line">		<span class="keyword">while</span> (ifs &gt;&gt; fid &amp;&amp; ifs &gt;&gt; fname &amp;&amp; ifs &gt;&gt; fpwd)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; fid &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; fname &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; fpwd &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">if</span> (fid == id &amp;&amp; fname == name &amp;&amp; fpwd == pwd)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;学生端验证登录成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">				person = <span class="keyword">new</span> <span class="built_in">Student</span>(id, name, pwd);</span><br><span class="line">				<span class="built_in">studentMenu</span>(person);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><strong>申请预约</strong></p>
<p>申请之前需要得到所有机房的信息，显示出来供学生挑选</p>
<p>所以跟manager类一样，在student类中添加一个新的容器用来存储机房类</p>
<p>首先在student.h中加新容器</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 机房信息</span></span><br><span class="line">vector&lt;ComputerRoom&gt; vCom;</span><br></pre></td></tr></table></figure>

<p>再在有参构造中读进txt文件中的信息</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有参构造</span></span><br><span class="line">Student::<span class="built_in">Student</span>(<span class="type">int</span> id, string name, string pwd)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_id = id;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_pwd = pwd;</span><br><span class="line">	<span class="comment">// 导入机房信息</span></span><br><span class="line">	ifstream ifs;	</span><br><span class="line">	ifs.<span class="built_in">open</span>(COMPUTER_FILE, ios::in);</span><br><span class="line">	ComputerRoom c;</span><br><span class="line">	<span class="keyword">while</span> (ifs &gt;&gt; c.m_comid &amp;&amp; ifs &gt;&gt; c.m_comnum)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;vCom.<span class="built_in">push_back</span>(c);</span><br><span class="line">	&#125;</span><br><span class="line">	ifs.<span class="built_in">close</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;当前机房数量为：&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;vCom.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来时applyOrder()函数的实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 申请预约</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Student::applyOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 日期选择</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;机房开放时间为周一~周五，请选择&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;2&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;3&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;4&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;5&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> date_select = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cin &gt;&gt; date_select;</span><br><span class="line">		<span class="keyword">if</span> (date_select &lt;= <span class="number">5</span> &amp;&amp; date_select &gt;= <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;输入有误，请重新输入！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 上午、下午选择</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;上午还是下午？&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;1.上午&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;2.下午&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> interval_select = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cin &gt;&gt; interval_select;</span><br><span class="line">		<span class="keyword">if</span> (interval_select == <span class="number">1</span> || interval_select == <span class="number">2</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;输入有误，请重新输入！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 机房选择</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;机房编号选择：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;各机房信息：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (vector&lt;ComputerRoom&gt;::iterator it = vCom.<span class="built_in">begin</span>(); it != vCom.<span class="built_in">end</span>(); it++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;机房编号：&quot;</span> &lt;&lt; it-&gt;m_comid &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="string">&quot;机房最大含量：&quot;</span> &lt;&lt; it-&gt;m_comnum &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;2&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;3&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> computer_room_select = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cin &gt;&gt; computer_room_select;</span><br><span class="line">		<span class="keyword">if</span> (computer_room_select &gt;= <span class="number">1</span> &amp;&amp; computer_room_select &lt;= <span class="number">3</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;输入有误，请重新输入！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;预约成功，审核中...&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 将预约信息写入order.txt中</span></span><br><span class="line">	ofstream ofs;</span><br><span class="line">	ofs.<span class="built_in">open</span>(ORDER_FILE, ios::app);</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;date:&quot;</span> &lt;&lt; date_select &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;interval:&quot;</span> &lt;&lt; interval_select &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;stuId:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_id &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;stuName:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_name &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;roomId:&quot;</span> &lt;&lt; computer_room_select &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;status:&quot;</span> &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl;</span><br><span class="line">	ofs.<span class="built_in">close</span>();</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>显示预约</strong> </p>
<p>由于order.txt中可能不止一条预约信息，因此像管理机房类那样创建一个新的容器用来存放所有的预约信息</p>
<p>orderFile.h和orderFile.cpp</p>
<p>orderFile.h的构造函数，负责将txt文件中的预约信息全部导入进来：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">OrderFiles::<span class="built_in">OrderFiles</span>()</span><br><span class="line">&#123;</span><br><span class="line">	ifstream ifs;</span><br><span class="line">	ifs.<span class="built_in">open</span>(ORDER_FILE, ios::in);</span><br><span class="line">	string date;</span><br><span class="line">	string interval;</span><br><span class="line">	string stuid;</span><br><span class="line">	string stuname;</span><br><span class="line">	string roomid;</span><br><span class="line">	string status;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_size = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (ifs &gt;&gt; date &amp;&amp; ifs &gt;&gt; interval &amp;&amp; ifs &gt;&gt; stuid &amp;&amp; ifs &gt;&gt; stuname &amp;&amp; ifs &gt;&gt; roomid &amp;&amp; ifs &gt;&gt; status)</span><br><span class="line">	&#123;</span><br><span class="line">		string key;</span><br><span class="line">		string value;</span><br><span class="line">		map&lt;string, string&gt; m;</span><br><span class="line">		<span class="comment">// 找到 ：所在的位置将字符串隔开</span></span><br><span class="line">		<span class="type">int</span> pos = date.<span class="built_in">find</span>(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (pos != <span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//    注意这个截字符串的操作，是通用的</span></span><br><span class="line">			key = date.<span class="built_in">substr</span>(<span class="number">0</span>, pos);</span><br><span class="line">			value = date.<span class="built_in">substr</span>(pos + <span class="number">1</span>, date.<span class="built_in">size</span>() - pos - <span class="number">1</span>);</span><br><span class="line">			m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, value));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		pos = interval.<span class="built_in">find</span>(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (pos != <span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//    注意这个截字符串的操作，是通用的</span></span><br><span class="line">			key = interval.<span class="built_in">substr</span>(<span class="number">0</span>, pos);</span><br><span class="line">			value = interval.<span class="built_in">substr</span>(pos + <span class="number">1</span>, interval.<span class="built_in">size</span>() - pos - <span class="number">1</span>);</span><br><span class="line">			m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, value));</span><br><span class="line">		&#125;</span><br><span class="line">	    </span><br><span class="line">		pos = stuid.<span class="built_in">find</span>(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (pos != <span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//    注意这个截字符串的操作，是通用的</span></span><br><span class="line">			key = stuid.<span class="built_in">substr</span>(<span class="number">0</span>, pos);</span><br><span class="line">			value = stuid.<span class="built_in">substr</span>(pos + <span class="number">1</span>, stuid.<span class="built_in">size</span>() - pos - <span class="number">1</span>);</span><br><span class="line">			m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, value));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		pos = stuname.<span class="built_in">find</span>(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (pos != <span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//    注意这个截字符串的操作，是通用的</span></span><br><span class="line">			key = stuname.<span class="built_in">substr</span>(<span class="number">0</span>, pos);</span><br><span class="line">			value = stuname.<span class="built_in">substr</span>(pos + <span class="number">1</span>, stuname.<span class="built_in">size</span>() - pos - <span class="number">1</span>);</span><br><span class="line">			m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, value));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		pos = roomid.<span class="built_in">find</span>(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (pos != <span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//    注意这个截字符串的操作，是通用的</span></span><br><span class="line">			key = roomid.<span class="built_in">substr</span>(<span class="number">0</span>, pos);</span><br><span class="line">			value = roomid.<span class="built_in">substr</span>(pos + <span class="number">1</span>, roomid.<span class="built_in">size</span>() - pos - <span class="number">1</span>);</span><br><span class="line">			m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, value));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		pos = status.<span class="built_in">find</span>(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (pos != <span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//    注意这个截字符串的操作，是通用的</span></span><br><span class="line">			key = status.<span class="built_in">substr</span>(<span class="number">0</span>, pos);</span><br><span class="line">			value = status.<span class="built_in">substr</span>(pos + <span class="number">1</span>, status.<span class="built_in">size</span>() - pos - <span class="number">1</span>);</span><br><span class="line">			m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, value));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 将所有的小容器放到大的容器中</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;m_size++;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_orderDtata.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="keyword">this</span>-&gt;m_size, m));</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	ifs.<span class="built_in">close</span>();</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>orderFile()中更新函数的实现，将txt中的所有内容删除，用map容器中的内容重写</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更新函数，负责将操作中新添加的预约信息再加入进来</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OrderFiles::updatefiles</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果没有预约记录就不用更新</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_size == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	ofstream ofs;</span><br><span class="line">	ofs.<span class="built_in">open</span>(ORDER_FILE, ios::out | ios::trunc);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;m_size; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		ofs &lt;&lt; <span class="string">&quot;date:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_orderDtata[i][<span class="string">&quot;date&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		ofs &lt;&lt; <span class="string">&quot;interval:&quot;</span>&lt;&lt; <span class="keyword">this</span>-&gt;m_orderDtata[i][<span class="string">&quot;interval&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		ofs &lt;&lt; <span class="string">&quot;stuId:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_orderDtata[i][<span class="string">&quot;stuId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		ofs &lt;&lt; <span class="string">&quot;stuName:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_orderDtata[i][<span class="string">&quot;stuName&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		ofs &lt;&lt; <span class="string">&quot;roomId:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_orderDtata[i][<span class="string">&quot;roomId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		ofs &lt;&lt; <span class="string">&quot;status:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_orderDtata[i][<span class="string">&quot;status&quot;</span>] &lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>显示自己的预约，ShowMyOrder()的具体实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 显示自己的预约</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Student::showMyOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	OrderFiles of;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (of.m_size == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;没有预约信息！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= of.m_size; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 遍历所有的预约信息，找到属于本实例对象的预约信息并打印</span></span><br><span class="line">		<span class="comment">// .c_str 将string转const char *</span></span><br><span class="line">		<span class="comment">// atoi 将const char* 转为 int</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">atoi</span>(of.m_orderDtata[i][<span class="string">&quot;stuId&quot;</span>].<span class="built_in">c_str</span>()) == <span class="keyword">this</span>-&gt;m_id)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;预约日期: 周&quot;</span> &lt;&lt; of.m_orderDtata[i][<span class="string">&quot;date&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;预约时间段:&quot;</span> &lt;&lt; (of.m_orderDtata[i][<span class="string">&quot;interval&quot;</span>] == <span class="string">&quot;1&quot;</span> ? <span class="string">&quot;上午&quot;</span>:<span class="string">&quot;下午&quot;</span>)&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;stuId:&quot;</span> &lt;&lt; of.m_orderDtata[i][<span class="string">&quot;stuId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;stuName:&quot;</span> &lt;&lt; of.m_orderDtata[i][<span class="string">&quot;stuName&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;机房Id:&quot;</span> &lt;&lt; of.m_orderDtata[i][<span class="string">&quot;roomId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			string order_status = <span class="string">&quot;状态：&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> (of.m_orderDtata[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;1&quot;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; order_status + <span class="string">&quot;待审核&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderDtata[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;2&quot;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; order_status + <span class="string">&quot;已预约&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderDtata[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;-1&quot;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; order_status + <span class="string">&quot;预约失败&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderDtata[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;0&quot;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; order_status + <span class="string">&quot;已取消&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			cout &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>显示所有的预约，showAllOrder()的具体实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 查看所有预约</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Student::showAllOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	OrderFiles of;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (of.m_size == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;没有预约信息！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// ??此处i要从1-2，0不行，不知道原因</span></span><br><span class="line">	<span class="comment">// 遍历所有的预约信息，并打印</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= of.m_size; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;预约日期: 周&quot;</span> &lt;&lt; of.m_orderDtata[i][<span class="string">&quot;date&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;预约时间段:&quot;</span> &lt;&lt; (of.m_orderDtata[i][<span class="string">&quot;interval&quot;</span>] == <span class="string">&quot;1&quot;</span> ? <span class="string">&quot;上午&quot;</span> : <span class="string">&quot;下午&quot;</span>) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;stuId:&quot;</span> &lt;&lt; of.m_orderDtata[i][<span class="string">&quot;stuId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;stuName:&quot;</span> &lt;&lt; of.m_orderDtata[i][<span class="string">&quot;stuName&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;机房Id:&quot;</span> &lt;&lt; of.m_orderDtata[i][<span class="string">&quot;roomId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		string order_status = <span class="string">&quot;状态：&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> (of.m_orderDtata[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;1&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; order_status + <span class="string">&quot;待审核&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderDtata[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;2&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; order_status + <span class="string">&quot;已预约&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderDtata[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;-1&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; order_status + <span class="string">&quot;预约失败&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderDtata[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;0&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; order_status + <span class="string">&quot;已取消&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>取消预约，cancelOrder()的具体实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 取消预约</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Student::cancelOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	OrderFiles of;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (of.m_size == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;没有预约信息！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;只有1或2，即预约中和预约通过的记录可以取消&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">// 遍历所有的预约信息，找到自己的预约记录</span></span><br><span class="line">	<span class="comment">// 只有1或2，即预约中和预约通过的记录可以取消</span></span><br><span class="line">	<span class="type">int</span> index = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; of.m_size; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">atoi</span>(of.m_orderData[i][<span class="string">&quot;stuId&quot;</span>].<span class="built_in">c_str</span>()) == <span class="keyword">this</span>-&gt;m_id)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;找到id符合的用户，接下来判断状态是否吻合。&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">if</span> (<span class="built_in">atoi</span>(of.m_orderData[i][<span class="string">&quot;status&quot;</span>].<span class="built_in">c_str</span>()) == <span class="number">1</span> || <span class="built_in">atoi</span>(of.m_orderData[i][<span class="string">&quot;status&quot;</span>].<span class="built_in">c_str</span>()) == <span class="number">2</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; index&lt;&lt;<span class="string">&quot;、预约日期: 周&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;date&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">				index++;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;预约时间段:&quot;</span> &lt;&lt; (of.m_orderData[i][<span class="string">&quot;interval&quot;</span>] == <span class="string">&quot;1&quot;</span> ? <span class="string">&quot;上午&quot;</span> : <span class="string">&quot;下午&quot;</span>) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;stuId:&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;stuId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;stuName:&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;stuName&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;机房Id:&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;roomId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">				string order_status = <span class="string">&quot;状态：&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;1&quot;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					cout &lt;&lt; order_status + <span class="string">&quot;待审核&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;2&quot;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					cout &lt;&lt; order_status + <span class="string">&quot;已预约&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;-1&quot;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					cout &lt;&lt; order_status + <span class="string">&quot;预约失败&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;0&quot;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					cout &lt;&lt; order_status + <span class="string">&quot;已取消&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				cout &lt;&lt; endl;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;状态不吻合，无法取消&quot;</span> &lt;&lt; endl;</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入要取消的预约序号：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> select = <span class="number">-1</span>;</span><br><span class="line">	std::cin &gt;&gt; select;</span><br><span class="line">	<span class="keyword">if</span> (select &gt; <span class="number">0</span> &amp;&amp; select &lt; index)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> cancel_index = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; of.m_size; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="built_in">atoi</span>(of.m_orderData[i][<span class="string">&quot;stuId&quot;</span>].<span class="built_in">c_str</span>()) == <span class="keyword">this</span>-&gt;m_id&amp;&amp;(<span class="built_in">atoi</span>(of.m_orderData[i][<span class="string">&quot;status&quot;</span>].<span class="built_in">c_str</span>()) == <span class="number">1</span> || <span class="built_in">atoi</span>(of.m_orderData[i][<span class="string">&quot;status&quot;</span>].<span class="built_in">c_str</span>()) == <span class="number">2</span>))</span><br><span class="line">			&#123;</span><br><span class="line">				cancel_index++;</span><br><span class="line">				<span class="keyword">if</span> (cancel_index == select)</span><br><span class="line">				&#123;</span><br><span class="line">					of.m_orderData[i][<span class="string">&quot;status&quot;</span>] = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">					cout &lt;&lt; <span class="string">&quot;取消成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		of.<span class="built_in">updatefiles</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;输入错误，请重新输入！&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-3-教师模块"><a href="#6-3-教师模块" class="headerlink" title="6.3 教师模块"></a>6.3 教师模块</h4><p><strong>教师的登录与注销</strong> </p>
<p>教师的二级菜单</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 实现教师的二级菜单</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">teacherMenu</span><span class="params">(Identity*&amp; teacher)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		teacher-&gt;<span class="built_in">open_menu</span>();</span><br><span class="line">		<span class="comment">// 实例化一个老师对象</span></span><br><span class="line">		Teacher* tea = (Teacher*) teacher;</span><br><span class="line">		<span class="type">int</span> tea_select = <span class="number">-1</span>;</span><br><span class="line">		cin &gt;&gt; tea_select;</span><br><span class="line">		<span class="keyword">switch</span> (tea_select)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			tea-&gt;<span class="built_in">showAllOrder</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			tea-&gt;<span class="built_in">validOrder</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">			<span class="keyword">delete</span> teacher;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>有参构造中初始化教师的属性</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Teacher::<span class="built_in">Teacher</span>(<span class="type">int</span> empid, string name, string pwd)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_empid = empid;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_name = name;</span><br><span class="line">	<span class="keyword">this</span>-&gt;m_pwd = pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在主程序的LoginIn（）函数中老师的验证部分设置好</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 老师的登录验证</span></span><br><span class="line">		<span class="type">int</span> fid;</span><br><span class="line">		string fname;</span><br><span class="line">		string fpwd;</span><br><span class="line">		<span class="comment">// while是一行一行的读的，而且自动以空格分开</span></span><br><span class="line">		<span class="keyword">while</span> (ifs &gt;&gt; fid &amp;&amp; ifs &gt;&gt; fname &amp;&amp; ifs &gt;&gt; fpwd)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; fid &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; fname &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; fpwd &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">if</span> (fid == id &amp;&amp; fname == name &amp;&amp; fpwd == pwd)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; <span class="string">&quot;教师端验证登录成功！&quot;</span> &lt;&lt; endl;</span><br><span class="line">				person = <span class="keyword">new</span> <span class="built_in">Teacher</span>(id, name, pwd);</span><br><span class="line">				<span class="built_in">teacherMenu</span>(person);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">				<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p><strong>显示菜单</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Teacher::open_menu</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;==================欢迎老师==================&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入您的选择&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t-----------------------------\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|          1.查看所有预约    |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|          2.审核预约预约    |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|          0.注销登录        |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t|                            |\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\t\t-----------------------------\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;请输入您的选择&quot;</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<p><strong>显示所有预约信息</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Teacher::showAllOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	OrderFiles of;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (of.m_size == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;没有预约信息！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历所有的预约信息，并打印</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; of.m_size; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;预约日期: 周&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;date&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;预约时间段:&quot;</span> &lt;&lt; (of.m_orderData[i][<span class="string">&quot;interval&quot;</span>] == <span class="string">&quot;1&quot;</span> ? <span class="string">&quot;上午&quot;</span> : <span class="string">&quot;下午&quot;</span>) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;stuId:&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;stuId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;stuName:&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;stuName&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;机房Id:&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;roomId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		string order_status = <span class="string">&quot;状态：&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;1&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; order_status + <span class="string">&quot;待审核&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;2&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; order_status + <span class="string">&quot;已预约&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;-1&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; order_status + <span class="string">&quot;预约失败&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;0&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; order_status + <span class="string">&quot;已取消&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>审核预约</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Teacher::validOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	OrderFiles of;</span><br><span class="line">	<span class="keyword">if</span> (of.m_size == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;没有预约信息！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> index = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; of.m_size; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 只有status为1的才需要审核</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">atoi</span>(of.m_orderData[i][<span class="string">&quot;status&quot;</span>].<span class="built_in">c_str</span>()) == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; index&lt;&lt;<span class="string">&quot;、预约日期: 周&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;date&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			index++;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;预约时间段:&quot;</span> &lt;&lt; (of.m_orderData[i][<span class="string">&quot;interval&quot;</span>] == <span class="string">&quot;1&quot;</span> ? <span class="string">&quot;上午&quot;</span> : <span class="string">&quot;下午&quot;</span>) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;stuId:&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;stuId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;stuName:&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;stuName&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;机房Id:&quot;</span> &lt;&lt; of.m_orderData[i][<span class="string">&quot;roomId&quot;</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">			string order_status = <span class="string">&quot;状态：&quot;</span>;</span><br><span class="line">			<span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;1&quot;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; order_status + <span class="string">&quot;待审核&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;2&quot;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; order_status + <span class="string">&quot;已预约&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;-1&quot;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; order_status + <span class="string">&quot;预约失败&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (of.m_orderData[i][<span class="string">&quot;status&quot;</span>] == <span class="string">&quot;0&quot;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; order_status + <span class="string">&quot;已取消&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			cout &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入要审核的申请编号：&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> valid_select = <span class="number">-1</span>;</span><br><span class="line">	cin &gt;&gt; valid_select;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;1.pass&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;2.faild&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;0.cancel&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> ret = <span class="number">-1</span>;</span><br><span class="line">	cin &gt;&gt; ret;</span><br><span class="line">	<span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (ret == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (ret == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;jinru1&quot;</span>;</span><br><span class="line">			<span class="type">int</span> valid_index = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; of.m_size; i++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 只有status为1的才需要审核</span></span><br><span class="line">				<span class="keyword">if</span> (<span class="built_in">atoi</span>(of.m_orderData[i][<span class="string">&quot;status&quot;</span>].<span class="built_in">c_str</span>()) == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					valid_index++;</span><br><span class="line">					cout &lt;&lt; <span class="string">&quot;valid_index=&quot;</span> &lt;&lt; valid_index &lt;&lt; endl;</span><br><span class="line">					cout &lt;&lt; <span class="string">&quot;valid_select=&quot;</span> &lt;&lt; valid_select &lt;&lt; endl;</span><br><span class="line">					<span class="keyword">if</span> (valid_index == valid_select)</span><br><span class="line">					&#123;</span><br><span class="line">						of.m_orderData[i][<span class="string">&quot;status&quot;</span>] = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (ret == <span class="number">2</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> valid_index = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; of.m_size; i++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 只有status为1的才需要审核</span></span><br><span class="line">				<span class="keyword">if</span> (<span class="built_in">atoi</span>(of.m_orderData[i][<span class="string">&quot;status&quot;</span>].<span class="built_in">c_str</span>()) == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					valid_index++;</span><br><span class="line">					<span class="keyword">if</span> (valid_index == valid_select)</span><br><span class="line">					&#123;</span><br><span class="line">						of.m_orderData[i][<span class="string">&quot;status&quot;</span>] = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;输入有误，退出审核！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	of.<span class="built_in">updatefiles</span>();</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;审核结束&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>






















      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/24/c++%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="cl0204j1q0004akr535dx88fw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c-%E5%AD%A6%E4%B9%A0-%E5%AD%A6%E4%B9%A0/" rel="tag">c++学习, 学习</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2021/11/18/Comsol%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Comsol学习笔记</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Abaqus/" rel="tag">Abaqus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SolidWorks/" rel="tag">SolidWorks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c-%E5%AD%A6%E4%B9%A0-%E5%AD%A6%E4%B9%A0/" rel="tag">c++学习, 学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/comsol/" rel="tag">comsol</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opencv/" rel="tag">opencv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pnp/" rel="tag">pnp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/" rel="tag">机器视觉</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Abaqus/" style="font-size: 10px;">Abaqus</a> <a href="/tags/English/" style="font-size: 15px;">English</a> <a href="/tags/SolidWorks/" style="font-size: 10px;">SolidWorks</a> <a href="/tags/c-%E5%AD%A6%E4%B9%A0-%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">c++学习, 学习</a> <a href="/tags/comsol/" style="font-size: 10px;">comsol</a> <a href="/tags/opencv/" style="font-size: 10px;">opencv</a> <a href="/tags/pnp/" style="font-size: 10px;">pnp</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 20px;">学习笔记</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/" style="font-size: 10px;">机器视觉</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 20px;">随笔</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/02/24/c++%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">c++ 学习笔记</a>
          </li>
        
          <li>
            <a href="/2021/11/18/Comsol%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Comsol学习笔记</a>
          </li>
        
          <li>
            <a href="/2021/11/14/abaqus%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Abaqus 学习笔记</a>
          </li>
        
          <li>
            <a href="/2021/11/14/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/">opencv 学习</a>
          </li>
        
          <li>
            <a href="/2021/11/10/SolisWorks%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">SolidWorks学习笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>